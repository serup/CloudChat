init:
	@echo "------------------------------------------------------"
	@echo " Build RPC server/client for DDD file system "
	@echo "------------------------------------------------------"
	@echo " - make setup    : will generate and rename files"
	@echo " - make all      : build all"
	@echo " - make clean    : remove all object files"
	@echo " - make destroy  : destroy all (autogenerated files)"
	@echo "------------------------------------------------------"

setup:	generate prereq

generate:
	rpcgen -Na DDDfs.x

prereq:
	@echo "- then rename all .c to .cpp"
	rename "s/\.c/\.cpp/" *.c 
	@echo "- then rename all .c to .cpp in Makefile.DDDfs"
	sed -i 's/\.c/\.cpp/g' Makefile.DDDfs
	@echo "- and you can now compile and link using :  make all"

all:
	make -f Makefile.DDDfs 

.PHONY: init 

clean:
	rm *.o

destroy:
	make -f Makefile.DDDfs clean
	rm Makefile.DDDfs
