	
	/*
		Copyright (c) 2010-2013 Liquid Working Group. All Rights Reserved.
		Available on MIT license (see: http://www.jsliquid.com/license.html)
	*/
	
	jsl.__ploads.speeder='try{jsl}catch(e){throw Error("liquid(error) >> [Speeder] module not loaded - cause: jsl core not found")}if(!jsl||jsl.__magic!=="J345NN48H756PQ56"){throw Error("liquid(error) >> [Speeder] module not loaded - cause: jsl core not found (bad magic number)")}if(!jsl.__ready){throw Error("liquid(error) >> [Speeder] module not loaded - cause: previous jsl core error")}if(jsl.__devs.speeder){jsl.console.warn("[Speeder] module already loaded")}if(!jsl.__devs.speeder){jsl.__devs.push("speeder");jsl.__devs.speeder="0.82";if(jsl.__devs.speeder!==jsl.__version){throw jsl.ConfigError("BadVersion",["Speeder module",jsl.__devs.speeder,jsl.__version])}jsl.Speeder=(function(){try{var a;/*!*/if(jsl.getInfo("system.type")==="cli"){throw jsl.NotSupportedError("ModuleNotSupported:Speeder")}/*!*/jsl.require("dev","data");a=new jsl.Module("jsl.Speeder");a.__gapi=jsl.__Dev.gapi;a.__source=null;a.__db=[];a.__ms={};a.__ds={};a.__gid=0;a.__re=/^[\\da-zA-Z_\\.\\-\\\\\\/]+$/;a.__ui={};a.__ui.body=null;a.__ui.i_id=null;a.__ui.b_save=null;a.__ui.b_addg=null;a.addOption("connection");a.addOption("connection.type",{dvalue:"http",setter:function(c,d,f){/*!*/jsl.validate(c,"s+(http,server)",f);/*!*/return c+""}});a.addEvents("beforeStart","beforeCreate","beforeLoad","beforeSave","beforeRemove","beforeClear");a.addEvents("start","create","load","save","remove","clear");return a}catch(b){jsl.throwError(b,"jsl.Speeder")}})();jsl.setMessage("sys.speeder.Create","Enter the identifier of the new dashboard:");jsl.setMessage("sys.speeder.DashboardNotFound","Dashboard not found: $");jsl.setMessage("sys.speeder.DataSourceNotCreated","Create a datasource before apply a label.");jsl.setMessage("sys.speeder.DataSourceNotFound","Datasource not found: $");jsl.setMessage("sys.speeder.EmptyDashboard","The current dashboard does not contains graphs. Do you really want to save?");jsl.setMessage("sys.speeder.EnterBarColor","Enter the color of the current bar (rrggbb):");jsl.setMessage("sys.speeder.EnterGraphTitle","Enter the graph title:");jsl.setMessage("sys.speeder.EnterLabel","Enter the datasource label:");jsl.setMessage("sys.speeder.EnterParam","Enter the parameter requested from the measure:");jsl.setMessage("sys.speeder.EnterSourcePath","Enter the datasource path:");jsl.setMessage("sys.speeder.Load","Enter the identifier of the dashboard to load:");jsl.setMessage("sys.speeder.Remove","Enter the identifier of the dashboard to remove:");jsl.setMessage("sys.speeder.RemoveGraph","Do you really want to remove the current graph?");jsl.Speeder.start=function(f){try{var h,d,c,b,g,a;/*!*/if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(f,"url+","source")}/*!*/b=this;h=b.__gapi;d=b.__ui;if(f){b.__source=f.replace(/\\\\/g,"/")+"";b.__source=b.__source.match(/^(.+?)\\/?$/)[1]+"/"}else{b.__source=jsl.getinfo("app.url")+"/report/"}g=new jsl.Event;a=this.throwEvent("beforeStart",g);h.title("Liquid.Speeder");c="Liquid: v."+jsl.getInfo("liquid.version")+" - Mode: "+jsl.getOption("liquid.mode")+" - Log: "+jsl.getOption("liquid.log");h.info(c);h.text("Dashboard: ");d.i_id=h.input("",true);h.space(5);h.button("Create",function(){b.__create()});h.space(5);h.button("Load",function(){b.__load()});h.space(5);d.b_save=h.button("Save",function(){b.__save()},true);h.space(5);h.button("Remove",function(){b.__remove()});d.body=h.body();d.b_addg=h.button("Add Graph",function(){b.__addGraph()});h.css(d.b_addg,"display:none;margin:5px;margin-top:15px");h.draw();if(!a.stop_sequence){this.throwEvent("start",g)}return this}catch(g){jsl.throwError(g,this,arguments)}};jsl.Speeder.addMeasure=function(f,a,d,b){try{/*!*/if(arguments.length!==4){throw jsl.ParamError()}jsl.validate(f,"s+","id");jsl.validate(a,"s","um");jsl.validate(d,"b","param");jsl.validate(b,"f","measure");/*!*/this.__ms[f]={m:b,um:a,p:!!(d&&d.valueOf())};return this}catch(c){jsl.throwError(c,this,arguments)}};jsl.Speeder.addMeasure("total time","s",false,function(a){return a.time});jsl.Speeder.addMeasure("slower","ms",false,function(a){return a.slower});jsl.Speeder.addMeasure("average","ms",false,function(f){try{var h,d;h=0;d=0;for(var c=0,b=f.length;c<b;c++){if(f[c].type==="a"){d+=f[c].time;h++}}return h?+(d/h).toFixed(3):0}catch(g){jsl.throwError(g,this,arguments)}});jsl.Speeder.addMeasure("text","s",true,function(g){try{var k,f,j,i;k=0;f=0;i=RegExp(g.param);for(var c=0,b=g.length;c<b;c++){j=g[c];if(j.type==="a"&&(!i||j.text.search(i)!==-1)){f+=j.time;k++}}return k?+(f/k/1000).toFixed(3):0}catch(h){jsl.throwError(h,this,arguments)}});jsl.Speeder.addMeasure("suite","s",true,function(g){try{var c,k,i,m,b;c=0;k=0;b=RegExp(g.param);for(var j=0,f=g.length;j<f;j++){i=g[j];if(i.type==="s"){m=!b||i.id.search(b)!==-1}if(m&&i.type==="a"){k+=i.time;c++}}return c?+(k/1000).toFixed(3):0}catch(h){jsl.throwError(h,this,arguments)}});jsl.Speeder.__create=function(){try{var b,d,a;b=this;d=b.__gapi;d.prompt("sys.speeder.Create",b.__re,function(h){var g,i,f;if(h.ok){f=b.__ui;i=h.value;g=new jsl.Event({id:i});a=b.throwEvent("beforeCreate",g);b.__clear();d.show(f.b_addg);d.enable(f.b_save);d.value(f.i_id,i);if(!a.stop_sequence){b.throwEvent("create",g)}}})}catch(c){jsl.throwError(c,this,arguments)}};jsl.Speeder.__load=function(){try{var d,b,a;b=this;d=b.__gapi;d.prompt("sys.speeder.Load",b.__re,function(n){var o,r,k,s,m,p,i,h,f;if(n.ok){h=n.value;o=b.__ui;f=b.__source+h+".sdb";m=new jsl.Event({url:f});a=b.throwEvent("beforeLoad",m);try{r=jsl.__Dev.sapi.service("get::"+f);p=true}catch(m){if(jsl.Error(m).getData("http.status")===404){d.alert(jsl.compileMessage("sys.speeder.DashboardNotFound",f))}else{throw m}}if(p){r=jsl.Data.deserialize(r);b.__clear();b.__db=r;d.show(o.b_addg);d.enable(o.b_save);d.value(o.i_id,h);for(var q=0,j=r.length;q<j;q++){k=b.__addGraph(r[q].title,r[q].measure,q);s=r[q].sources;for(p=0,i=s.length;p<i;p++){if(s[p]){b.__addSource(k,p,s[p])}}}if(!a.stop_sequence){b.throwEvent("load",m)}}}})}catch(c){jsl.throwError(c,this,arguments)}};jsl.Speeder.__save=function(){try{var b,f,a,c;b=this;f=b.__gapi;a=b.__db;c=function(){var h,i,j,g;j=f.value(b.__ui.i_id);h=b.__source+j+".sdb";i=new jsl.Event;i.id=j;i.url=h;i.data=a;a=jsl.Data.serialize(a);g=b.throwEvent("beforeSave",i);if(b.getOption("connection.type")==="http"){jsl.__Dev.sapi.service("put::"+h,a)}else{jsl.__Dev.sapi.service("post::"+h,{data:{op:"save",data:a}})}if(!g.stop_sequence){b.throwEvent("save",i)}};if(a.length){c()}else{f.confirm("sys.speeder.EmptyDashboard",function(g){if(g.ok){c()}})}}catch(d){jsl.throwError(d,this,arguments)}};jsl.Speeder.__remove=function(){try{var d,b,a;b=this;d=b.__gapi;d.prompt("sys.speeder.Remove",b.__re,function(i){var j,g,h,f;if(i.ok){g=b.__ui;j=i.value;f=b.__source+j+".sdb";h=new jsl.Event;h.id=j;h.url=f;a=b.throwEvent("beforeRemove",h);if(j===d.value(g.i_id)){b.__clear()}if(b.getOption("connection.type")==="http"){jsl.__Dev.sapi.service("delete::"+f)}else{jsl.__Dev.sapi.service(f,{data:{op:"remove"}})}if(!a.stop_sequence){b.throwEvent("remove",h)}}})}catch(c){jsl.throwError(c,this,arguments)}};jsl.Speeder.__clear=function(){try{var c,b,f,d,a;f=this.__gapi;c=this.__ui;b=c.body;d=new jsl.Event;a=this.throwEvent("beforeClear",d);f.value(c.i_id,"");f.hide(c.b_addg);f.disable(c.b_save);while(f.childs(b).length>1){f.detach(f.child(b))}this.__db=[];if(!a.stop_sequence){this.throwEvent("clear",d)}}catch(d){jsl.throwError(d,this,arguments)}};jsl.Speeder.__addGraph=function(j,b,a){try{var i,c,f,d;i=this.__gapi;d=this.__ui;f=d.body;c=i.box("width:100%");if(!arguments.length){this.__db.push(c.d={id:this.__gid++,title:j,measure:b||"total time",sources:[]})}else{c.d=this.__db[a];c.d.id=this.__gid++}i.attach(f,c);this.__createGTitle(c,j);this.__createGCanvas(c);this.__createGBar(c);i.attach(f,d.b_addg);return c}catch(h){jsl.throwError(h,this,arguments)}};jsl.Speeder.__createGTitle=function(f,j){try{var i,b,d,a,c;i=this.__gapi;b="font-size:0.8em;font-weight:bold;color:#333333;padding:6px;border-top:1px solid #CCCCCC;";b+="border-bottom:1px solid #BBBBBB;cursor:pointer;margin-top:20px";d=i.box(b);c=j||"Graph Title (click to change)";f.d.title=c;i.inner(d,c);i.attach(f,d);d.onclick=function(){i.prompt("sys.speeder.EnterGraphTitle",null,function(k){var g;if(k.ok){g=k.value;f.d.title=g;i.inner(d,g)}})}}catch(h){jsl.throwError(h,this,arguments)}};jsl.Speeder.__createGCanvas=function(i){try{var f,p,j,d,b,c,h,l,m;f=this;p=f.__gapi;j=p.box("height:220px;border:1px solid #BBBBBB;border-top:1px solid #868886;background-color:#e8e8e8;overflow:hidden");p.attach(i,j);i.areas=[];i.cs=j;f.__createGGrid(i);d=Math.floor((p.width()-16)/70);b=(p.width()-16)%70;m=i.cs.grid.offsetHeight;for(var o=0;o<d;o++){c=p.box("position:relative;top:"+-(m+o*220)+"px;left:"+o*70+"px;height:220px;width:"+(o===d-1?(b+70)+"px;":"70px;"));i.areas[o]=c;h=p.box("height:200px;"+(o?"cursor:pointer":""));l=p.box("font-size:12px;color:#333333;height:19px;text-align:center;border-top:1px solid #868886;background-color:#efefef;cursor:pointer");if(o){h.ix=o;h.eid="box";l.ix=o;p.inner(l,o);p.bind(l,"onclick",function(a){var g;g=a.node;if(!i.d.sources[g.ix]){p.alert("sys.speeder.DataSourceNotCreated")}else{p.prompt.value=p.inner(g);p.prompt("sys.speeder.EnterLabel",null,function(q){var n;if(q.ok){n=q.value;i.d.sources[g.ix].label=n;p.inner(g,n)}})}});p.bind(h,"onmouseover",function(a){var g;g=a.node;if(g.eid==="box"){p.style(g,"border-left","1px solid #b4b6b4");p.style(g,"border-right","1px solid #b4b6b4");if(g.g){p.style(g.g,"margin-left","14px")}}});p.bind(h,"onmouseout",function(a){var g;g=a.node;if(g.eid==="box"){p.style(g,"border-left","none");p.style(g,"border-right","none");if(g.g){p.style(g.g,"margin-left","15px")}}});p.bind(h,"onclick",function(a){var g;g=a.node;if(g.eid==="box"){f.__addSource(i,g.ix)}})}p.attach(c,h);p.attach(c,l);p.attach(j,c)}}catch(k){jsl.throwError(k,this,arguments)}};jsl.Speeder.__createGBar=function(k){try{var o,t,l,u,s,b,a,q,h,j,d,f,i,r;q=this;t=q.__gapi;l=q.__ui.body;u=q.__db;o=t.box("border-top:1px solid #868886;border-bottom:1px solid #888888;background-color:#CCCCCC;padding:3px");s=t.button("Remove",function(){t.confirm("sys.speeder.RemoveGraph",function(p){if(p.ok){t.detach(k);for(var m=0,g=u.length;m<g;m++){if(u[m].id===k.d.id){u.splice(m,1);break}}}})});a=[];b=q.__ms;for(var c in b){if(b.hasOwnProperty(c)){a.push(c)}}j=function(x,y){var w,v,z;w=t.wait();v=k.d.sources;for(var m=0,g=v.length;m<g;m++){if(v[m]){z=q.__loadData(v[m].id);z.param=y;v[m].value=x(z);q.__addSource(k,m,v[m])}}t.hide(w);t.hide(w.dlg)};h=t.combo(a,i=function(p){var g;g=q.__ms[p.node.value];k.d.measure=p.node.value;if(g.p){t.show(d);t.show(r);j(g.m,t.value(d))}else{t.hide(d);t.hide(r);j(g.m,"")}});t.attach(o,s);t.attach(o,t.space(10));f=t.text("Measure: ");t.attach(o,f);t.attach(o,h);d=t.input("width:180px;margin-right:4px",true);t.value(d,k.d.param||"");r=t.button("P",function(){t.prompt.value=t.value(d);t.prompt("sys.speeder.EnterParam",null,function(w){var p,g;if(w.ok){p=w.value;k.d.param=p;t.value(d,p);g=q.__ms[t.value(h)];j(g.m,p)}})});if(k.d.measure){h.value=k.d.measure;if(!q.__ms[h.value].p){t.hide(d),t.hide(r)}}t.attach(o,d);t.attach(o,r);t.attach(k,o)}catch(n){jsl.throwError(n,this,arguments)}};jsl.Speeder.__createGGrid=function(k){try{var m,w,h,p,q,i,t,j,f,s,b,r,u,d;w=this.__gapi;m=w.child(k,1);f=k.d.sources;d=jsl.__sid==="Explorer";if(!m.grid){m.grid=w.box("width:100%");w.attach(m,m.grid);p=w.box("height:7px;line-height:1px;font-size:1px");h=8;w.attach(m.grid,p);while(h){q=w.box("padding-left:4px;color:#333333;font-size:12px;border-top:1px solid #CCCCCC;height:"+(d?24:23)+"px");w.inner(q,h--+"s");w.attach(m.grid,q)}}else{for(t=0,j=f.length,s=0;t<j;t++){if(f[t]&&f[t].value>s){s=f[t].value}}s=s||8;h=s/8;h=s>=8?Math.ceil(h):Math.ceil(h*100)/100;i=w.childs(m.grid);for(t=1;t<=8;t++){w.inner(i[t],((9-t)*h).toFixed(2).replace(/\\.00/,"")+this.__ms[k.d.measure].um)}for(t=0,j=f.length;t<j;t++){if(f[t]){b=w.child(w.child(k.areas[t]));if(b){u=Math.round((200-8)*f[t].value/(h*8));r=f[t].color||"#64727b";w.css(b,"border:1px solid #AAAAAA;border-bottom:none;background-color:"+r+";width:40px;font-size:1px;height:"+u+"px;margin-left:15px;margin-right:15px;position:relative;top:"+(200-u-(d?0:1))+"px")}}}}return h*8}catch(o){jsl.throwError(o,this,arguments)}};jsl.Speeder.__addSource=function(i,b,h){try{var l,m,a,f,c,k;l=this;m=l.__gapi;a=i.d.sources;f=m.child(i.areas[b]);c=function(){if(!f.g){f.g=m.box();f.g.tabIndex=0;m.attach(f,f.g)}else{m.attach(f,f.g)}if(k.label){m.inner(m.child(i.areas[b],1),k.label)}l.__createGGrid(i);m.bind(f.g,"ondblclick",function(d){var g;g=d.node;m.prompt.value=k.color?k.color.slice(1):"63717b";m.prompt("sys.speeder.EnterBarColor",/^[\\dA-Fa-f]{6}$/,function(o){var n=o.value;if(o.ok&&n){m.style(g,"backgroundColor","#"+n);k.color="#"+n}});d.stopPropagation()});m.bind(f.g,"onfocus",function(d){var g;g=d.node;m.style(g,"border","1px solid #f7ae4a");m.style(g,"borderBottom","none")});m.bind(f.g,"onblur",function(d){var g;g=d.node;m.style(g,"border","1px solid #AAAAAA");m.style(g,"borderBottom","none")});m.bind(f.g,"onkeyup",function(d){var g;g=d.node;if(d.keyCode===46){m.inner(m.child(i.areas[b],1),b+"");m.detach(g);a[b]=null;m.hide(l.__ui.tt);l.__createGGrid(i)}});m.bind(f.g,"onmousemove",function(p){var d,q,o,t,s,u,n,g,r;d=p.node;q=l.__ui.tt;if(!q){o="padding:5px;padding-left:7px;padding-right:7px;position:absolute;display:none;border:1px solid #e77118;background-color:#ffffc6;font-size:0.8em";l.__ui.tt=q=m.box(o);m.attach(m.wnd(),q)}m.inner(q,"id: "+k.sid+"\\nvalue: "+k.value+l.__ms[i.d.measure].um);t=p.x+10;s=p.y+10;u=m.width(m.wnd());n=m.height(m.wnd());m.show(q);m.style(q,"top","10px");m.style(q,"left","10px");g=m.width(q);r=m.height(q);m.style(q,"top",s+"px");m.style(q,"left",t+"px");if(t+g>u){m.style(q,"left",(p.x-g-5)+"px")}if(s+r>n){m.style(q,"top",(p.y-r-5)+"px")}});m.bind(f.g,"onmouseout",function(d){m.hide(l.__ui.tt)})};if(h){k=a[b];c()}else{m.prompt("sys.speeder.EnterSourcePath",this.__re,function(o){var q,n,d,g;q=o.value;if(o.ok&&q){try{g=l.__loadData(q);d=true}catch(p){if(jsl.Error(p).getData("http.status")===404){m.alert(jsl.compileMessage("sys.speeder.DataSourceNotFound",l.__source+q))}else{throw p}}if(d){k={};a[b]=k;k.id=q;k.time=g.time;k.slower=g.slower;k.sid=g.sid;l.__ds[q].param=i.d.param;k.value=l.__ms[i.d.measure].m(l.__ds[q]);c()}}})}}catch(j){jsl.throwError(j,this,arguments)}};jsl.Speeder.__loadData=function(f){try{var o,k,i,m,b,g;o=this.__ds[f];if(!o){o=jsl.__Dev.sapi.service(this.__source+f);k=o.split("\\n\\n\\n")[1].split(/\\n+/);i=[];i.time=+o.match(/TIME:\\s*([^s]+)s/i)[1];i.slower=+o.match(/SLOWER:\\s*([^m]+)ms/i)[1];i.sid=o.match(/SYSTEM:\\s*([^\\n]+)/i)[1]+" V"+o.match(/VERSION:\\s*([^\\n]+)/i)[1];i.source=this.__source+f;this.__ds[f]=i;for(var n=0,h=k.length;n<h;n++){m=k[n].match(/\\w/);m=m&&m[0];if(m&&(m==="A"||m==="S"||m==="U"||m==="T")){b={};b.type=m.toLowerCase();i.push(b);if(b.type!=="a"){b.id=k[n].match(/:\\s(.+?)\\s*$/)[1]}else{g=k[n].match(/(\\d+)\\s\\[([^\\]]+)\\]\\s-\\stime:\\s(\\d+)\\s?-?\\s?(.+)?$/);b.id=g[1];b.status=g[2];b.time=+g[3];b.text=g[4]||""}}}}else{i=this.__ds[f]}return i}catch(j){jsl.throwError(j,this,arguments)}}};'