	
	/*
		Copyright (c) 2010-2013 Liquid Working Group. All Rights Reserved.
		Available on MIT license (see: http://www.jsliquid.com/license.html)
	*/
	
	jsl.__ploads.timer='try{jsl}catch(e){throw Error("liquid(error) >> [Timer] module not loaded - cause: jsl core not found")}if(!jsl||jsl.__magic!=="J345NN48H756PQ56"){throw Error("liquid(error) >> [Timer] module not loaded - cause: jsl core not found (bad magic number)")}if(!jsl.__ready){throw Error("liquid(error) >> [Timer] module not loaded - cause: previous jsl core error")}if(jsl.__mods.timer){jsl.console.warn("[Timer] module already loaded")}if(!jsl.__mods.timer){jsl.__mods.push("timer");jsl.__mods.timer="0.82";if(jsl.__mods.timer!==jsl.__version){throw jsl.ConfigError("BadVersion",["Timer module",jsl.__mods.timer,jsl.__version])}jsl.Timer=(function(){try{var a;a=new jsl.Module("jsl.Timer");a.__tid=1;a.__timers=[];a.__groups={};a.addEvents("beforeCreate","beforeRemove","beforeStart","beforeStop","beforeResume");a.addEvents("create","remove","start","stop","resume");a.addEvents("beforePause","beforeExecute","beforeAbort","beforeEnable","beforeDisable");a.addEvents("pause","execute","abort","enable","disable");return a}catch(b){jsl.throwError(b,"jsl.Timer")}})();jsl.Timer.create=function(f,b,d){try{var h,c,g,a;/*!*/if(arguments.length<2||arguments.length>3){throw jsl.ParamError()}jsl.validate(f,"f","action");jsl.validate(b,"i++","interval");if(arguments.length===3){this.__validateData(d,true)}/*!*/if(d&&d.tid&&d.tid.charAt(0)==="T"&&d.tid.slice(1)>=0){this.__tid=+d.tid.slice(1)+1}h={};h.action=f;h.interval=+b;h.tid=d&&d.tid?d.tid+"":"T"+this.__tid++;h.group=d&&d.group?d.group+"":null;h.enabled=d&&d.enabled!=null?d.enabled.valueOf():true;h.param=d&&"param" in d?d.param:null;h.object=d&&d.object||{};h.nid=null;h.ts=null;h.status="idle";h.tick=0;c=h.tid+".";this.addEvents(c+"beforeRemove",c+"beforeStart",c+"beforeStop",c+"beforeResume",c+"remove",c+"start",c+"stop",c+"resume",c+"beforePause",c+"beforeExecute",c+"beforeAbort",c+"beforeEnable",c+"beforeDisable",c+"pause",c+"execute",c+"abort",c+"enable",c+"disable");g=new jsl.Event;g.timer=jsl.Object.clone(h);a=this.throwEvent("beforeCreate",g);this.__timers.push(h);this.__timers["."+h.tid]=h;if(!a.stop_sequence){this.throwEvent("create",g)}return h.tid}catch(g){jsl.throwError(g,this,arguments)}};jsl.Timer.remove=function(c){try{var i,h,g,k,n;/*!*/if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){this.__validateSel(c)}/*!*/i=this.__select(c);for(var m=0,f=i.length;m<f;m++){h=new jsl.Event;h.timer=jsl.Object.clone(i[m]);g=h.timer.tid;k=g+".";n=this.throwEvent(k+"beforeRemove",h);if(!n.stop_sequence){n=this.throwEvent("beforeRemove",h)}if(i[m].status!=="idle"){if(!n.stop_sequence){n=this.throwEvent(k+"beforeAbort",h)}if(!n.stop_sequence){n=this.throwEvent("beforeAbort",h)}this.__stop(i[m]);h.status=i[m].status;if(!n.stop_sequence){n=this.throwEvent(k+"abort",h)}if(!n.stop_sequence){n=this.throwEvent("abort",h)}}delete this.__timers["."+g];for(var j=0,d=this.__timers.length;j<d;j++){if(i[m]===this.__timers[j]){this.__timers.splice(j,1);break}}if(!n.stop_sequence){n=this.throwEvent(k+"remove",h)}if(!n.stop_sequence){this.throwEvent("remove",h)}this.removeEvents(k+"beforeRemove",k+"beforeStart",k+"beforeStop",k+"beforeResume",k+"remove",k+"start",k+"stop",k+"resume",k+"beforePause",k+"beforeExecute",k+"beforeAbort",k+"beforeEnable",k+"beforeDisable",k+"pause",k+"execute",k+"abort",k+"enable",k+"disable")}return this}catch(h){jsl.throwError(h,this,arguments)}};jsl.Timer.setData=function(d,b){try{var f,a;/*!*/if(arguments.length!==2){throw jsl.ParamError()}jsl.validate(d,"s+","tid");if(!this.__timers["."+d]){throw jsl.ParamError("NotDefined:tid")}this.__validateData(b);/*!*/f=this.__timers["."+d];if(b.tid){f.tid=b.tid+""}if(b.group){f.group=b.group+""}if(b.action){f.action=b.action}if(b.interval){f.interval=+b.interval}if(b.enabled!=null){f.enabled=b.enabled.valueOf()}if("object" in b){f.object=b.object||{}}if("param" in b){f.param=b.param}if(d!=f.tid){delete this.__timers["."+d];this.__timers["."+f.tid]=f;a=d+".";this.removeEvents(a+"beforeRemove",a+"beforeStart",a+"beforeStop",a+"beforeResume",a+"remove",a+"start",a+"stop",a+"resume",a+"beforePause",a+"beforeExecute",a+"beforeAbort",a+"beforeEnable",a+"beforeDisable",a+"pause",a+"execute",a+"abort",a+"enable",a+"disable");a=f.tid+".";this.addEvents(a+"beforeRemove",a+"beforeStart",a+"beforeStop",a+"beforeResume",a+"remove",a+"start",a+"stop",a+"resume",a+"beforePause",a+"beforeExecute",a+"beforeAbort",a+"beforeEnable",a+"beforeDisable",a+"pause",a+"execute",a+"abort",a+"enable",a+"disable")}return this}catch(c){jsl.throwError(c,this,arguments)}};jsl.Timer.getData=function(d){try{var a,c;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(d,"s+","tid");if(!this.__timers["."+d]){throw jsl.ParamError("NotDefined:tid")}/*!*/a=this.__timers["."+d];c={};c.tid=a.tid;c.action=a.action;c.group=a.group;c.interval=a.interval;c.enabled=a.enabled;c.param=a.param;c.object=a.object;return c}catch(b){jsl.throwError(b,this,arguments)}};jsl.Timer.createGroup=function(d,a){try{var b;/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(d,"s+","group");if(this.__groups[d]){throw jsl.ParamError("AlreadyDefined:group")}if(arguments.length===2){jsl.validate(a,"s+","parent");if(!this.__groups[a]){throw jsl.ParamError("NotDefined:parent")}}/*!*/b={id:d,cs:[]};this.__groups[d]=b;if(a){this.__groups[a].cs.push(b);b.parent=this.__groups[a]}return this}catch(c){jsl.throwError(c,this,arguments)}};jsl.Timer.removeGroup=function(j){try{var f,d,i;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(j,"s+","group");/*!*/f=this.__groups[j];if(f){d=f.cs;while(d[0]){this.removeGroup(d[0].id)}this.remove("g:"+j);i=f.parent;if(i){d=i.cs;for(var c=0,b=d.length;c<b;c++){if(f===d[c]){d.splice(c,1);break}}}delete this.__groups[j]}return this}catch(h){jsl.throwError(h,this,arguments)}};jsl.Timer.select=function(f){try{var d,h;/*!*/if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){this.__validateSel(f)}/*!*/d=this.__select(f);h=[];for(var c=0,b=d.length;c<b;c++){h[c]=d[c].tid}return h}catch(g){jsl.throwError(g,this,arguments)}};jsl.Timer.count=function(a){try{/*!*/if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){this.__validateSel(a)}/*!*/return this.__select(a).length}catch(b){jsl.throwError(b,this,arguments)}};jsl.Timer.run=function(g){try{var f,j,i,h,d;/*!*/if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){this.__validateSel(g)}/*!*/f=this.__select(g);for(var c=0,b=f.length;c<b;c++){j=f[c];if(j.enabled&&j.status!=="run"){i=new jsl.Event;i.timer=jsl.Object.clone(j);h=i.timer.tid;if(j.status==="idle"){d=this.throwEvent(h+".beforeStart",i);if(!d.stop_sequence){d=this.throwEvent("beforeStart",i)}j.ts=new Date;this.__run(j);if(!d.stop_sequence){d=this.throwEvent(h+".start",i)}if(!d.stop_sequence){this.throwEvent("start",i)}}else{d=this.throwEvent(h+".beforeResume",i);if(!d.stop_sequence){d=this.throwEvent("beforeResume",i)}this.__run(j);if(!d.stop_sequence){d=this.throwEvent(h+".resume",i)}if(!d.stop_sequence){this.throwEvent("resume",i)}}}}return this}catch(i){jsl.throwError(i,this,arguments)}};jsl.Timer.stop=function(g){try{var f,i,j,h,d;/*!*/if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){this.__validateSel(g)}/*!*/f=this.__select(g);for(var c=0,b=f.length;c<b;c++){j=f[c];if(j.enabled&&j.status!=="idle"){i=new jsl.Event;i.timer=jsl.Object.clone(j);h=i.timer.tid;d=this.throwEvent(h+".beforeStop",i);if(!d.stop_sequence){d=this.throwEvent("beforeStop",i)}this.__stop(j);if(!d.stop_sequence){d=this.throwEvent(h+".stop",i)}if(!d.stop_sequence){this.throwEvent("stop",i)}}}return this}catch(i){jsl.throwError(i,this,arguments)}};jsl.Timer.pause=function(g){try{var f,i,j,h,d;/*!*/if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){this.__validateSel(g)}/*!*/f=this.__select(g);for(var c=0,b=f.length;c<b;c++){j=f[c];if(j.enabled&&j.status!=="pause"){i=new jsl.Event;i.timer=jsl.Object.clone(j);h=i.timer.tid;if(j.status==="idle"){this.__run(j)}d=this.throwEvent(h+".beforePause",i);if(!d.stop_sequence){d=this.throwEvent("beforePause",i)}this.__pause(j);if(!d.stop_sequence){d=this.throwEvent(h+".pause",i)}if(!d.stop_sequence){this.throwEvent("pause",i)}}}return this}catch(i){jsl.throwError(i,this,arguments)}};jsl.Timer.enable=function(g){try{var f,i,j,h,d;/*!*/if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){this.__validateSel(g)}/*!*/f=this.__select(g);for(var c=0,b=f.length;c<b;c++){j=f[c];if(!j.enabled){i=new jsl.Event;i.timer=jsl.Object.clone(j);h=i.timer.tid;d=this.throwEvent(h+".beforeEnable",i);if(!d.stop_sequence){d=this.throwEvent("beforeEnable",i)}j.enabled=true;i.timer.enabled=true;if(!d.stop_sequence){d=this.throwEvent(h+".enable",i)}if(!d.stop_sequence){this.throwEvent("enable",i)}}}return this}catch(i){jsl.throwError(i,this,arguments)}};jsl.Timer.disable=function(g){try{var f,i,j,h,d;/*!*/if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){this.__validateSel(g)}/*!*/f=this.__select(g);for(var c=0,b=f.length;c<b;c++){j=f[c];if(j.enabled){i=new jsl.Event;i.timer=jsl.Object.clone(j);h=i.timer.tid;d=this.throwEvent(h+".beforeDisable",i);if(!d.stop_sequence){d=this.throwEvent("beforeDisable",i)}j.enabled=false;i.timer.enabled=false;if(!d.stop_sequence){d=this.throwEvent(h+".disable",i)}if(!d.stop_sequence){this.throwEvent("disable",i)}}}return this}catch(i){jsl.throwError(i,this,arguments)}};jsl.Timer.exists=function(b){try{/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(b,"s+","tid");/*!*/return !!this.__timers["."+b]}catch(a){jsl.throwError(a,this,arguments)}};jsl.Timer.isRunning=function(b){try{/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(b,"s+","tid");if(!this.__timers["."+b]){throw jsl.ParamError("NotDefined:tid")}/*!*/return this.__timers["."+b].status==="run"}catch(a){jsl.throwError(a,this,arguments)}};jsl.Timer.isPaused=function(b){try{/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(b,"s+","tid");if(!this.__timers["."+b]){throw jsl.ParamError("NotDefined:tid")}/*!*/return this.__timers["."+b].status==="pause"}catch(a){jsl.throwError(a,this,arguments)}};jsl.Timer.isIdle=function(b){try{/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(b,"s+","tid");if(!this.__timers["."+b]){throw jsl.ParamError("NotDefined:tid")}/*!*/return this.__timers["."+b].status==="idle"}catch(a){jsl.throwError(a,this,arguments)}};jsl.Timer.isEnabled=function(b){try{/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(b,"s+","tid");if(!this.__timers["."+b]){throw jsl.ParamError("NotDefined:tid")}/*!*/return this.__timers["."+b].enabled}catch(a){jsl.throwError(a,this,arguments)}};jsl.Timer.getStatus=function(b){try{/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(b,"s+","tid");if(!this.__timers["."+b]){throw jsl.ParamError("NotDefined:tid")}/*!*/return this.__timers["."+b].status}catch(a){jsl.throwError(a,this,arguments)}};jsl.Timer.getWaiting=function(d){try{var b,a;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(d,"s+","tid");if(!this.__timers["."+d]){throw jsl.ParamError("NotDefined:tid")}/*!*/b=this.__timers["."+d];if(b.status!=="run"){a=Infinity}else{a=b.ts-new Date+b.interval*b.tick;a=a<=0?0:a}return a}catch(c){jsl.throwError(c,this,arguments)}};/*!*/jsl.Timer.__validateSel=function(a){jsl.validate(a,"t[s+,f]","sel");if(jsl.isString(a)){if(a.slice(0,2)==="g:"){if(!this.__groups[a.slice(2)]){throw jsl.ParamError("NotDefined:sel(group)")}}else{if(!this.__timers["."+a]){throw jsl.ParamError("NotDefined:sel(tid)")}}}};jsl.Timer.__validateData=function(b,a){jsl.validate(b,"o","data");if(b.tid!=null){jsl.validate(b.tid,"s+","data.tid")}if(b.group!=null){jsl.validate(b.group,"s+","data.group")}if(b.enabled!=null){jsl.validate(b.enabled,"b","data.enabled")}if(b.object!=null){jsl.validate(b.object,"o","data.object")}if(!a){if(b.action!=null){jsl.validate(b.action,"f","data.action")}else{if(b.interval!=null){jsl.validate(b.interval,"i++","data.interval")}}}if(b.tid&&this.__timers["."+b.tid]){throw jsl.ParamError("AlreadyDefined:data.tid")}if(b.group&&!this.__groups[b.group]){throw jsl.ParamError("NotDefined:data.group")}};/*!*/jsl.Timer.__run=function(c){var b,a;c.status="run";b=c.ts-new Date+c.interval*c.tick;b=b<=0?0:b;c.nid=jsl.delay(function(){var g,f,d;if(c.enabled){g=new jsl.Event;g.timer=jsl.Object.clone(c);f=c.tid+".";d=jsl.Timer;a=d.throwEvent(f+"beforeExecute",g);if(!a.stop_sequence){a=d.throwEvent("beforeExecute",g)}try{c.action.call(c.object,g.timer)}catch(g){throw jsl.ScriptError("BadScript:action",g)}if(!a.stop_sequence){a=d.throwEvent(f+"execute",g)}if(!a.stop_sequence){d.throwEvent("execute",g)}}c.tick++;if(c.status==="run"){jsl.Timer.__run(c)}},b)};jsl.Timer.__pause=function(a){a.nid&&jsl.removeTimer(a.nid);a.status="pause";a.nid=null};jsl.Timer.__stop=function(a){a.nid&&jsl.removeTimer(a.nid);a.status="idle";a.nid=null;a.tick=1};jsl.Timer.__select=function(b){var c,k,d,m,f,h,i;c=[];k=this.__timers;d=k.length;f=jsl.Object;if(b==null){c=f.clone(k)}else{if(jsl.isFunction(b)){for(m=0;m<d;m++){try{if(b(f.clone(k[m]))){c.push(k[m])}}catch(j){throw jsl.ParamError("BadScript:sel(data)",j)}}}else{if(jsl.isString(b)){if(b.slice(0,2)==="g:"){h=this.__groups[b.slice(2)];if(h){i=h.cs;for(m=0;m<d;m++){if(k[m].group===h.id){c.push(k[m])}}for(m=0;m<i.length;m++){c=c.concat(this.__select("g:"+i[m].id))}}}else{if(this.__timers["."+b]){c.push(this.__timers["."+b])}}}}}return c}};'