	
	/*
		Copyright (c) 2010-2013 Liquid Working Group. All Rights Reserved.
		Available on MIT license (see: http://www.jsliquid.com/license.html)
	*/
	
	jsl.__ploads.data='try{jsl}catch(e){throw Error("liquid(error) >> [Data] module not loaded - cause: jsl core not found")}if(!jsl||jsl.__magic!=="J345NN48H756PQ56"){throw Error("liquid(error) >> [Data] module not loaded - cause: jsl core not found (bad magic number)")}if(!jsl.__ready){throw Error("liquid(error) >> [Data] module not loaded - cause: previous jsl core error")}if(jsl.__mods.data){jsl.console.warn("[Data] module already loaded")}if(!jsl.__mods.data){jsl.__mods.push("data");jsl.__mods.data="0.82";if(jsl.__mods.data!==jsl.__version){throw jsl.ConfigError("BadVersion",["Data module",jsl.__mods.data,jsl.__version])}jsl.require("lang");jsl.setMessage("e.data.BadEncoding","<$> encoding not supported");jsl.setMessage("e.data.BadEncodingSequence","<$> incorrect encoding sequence: wrong input type found at $ entry");jsl.setMessage("e.data.BadDecoding","<$> decoding not supported");jsl.setMessage("e.data.BadDecodingSequence","<$> incorrect decoding sequence: wrong input type found at $ entry");jsl.setMessage("e.data.EncodingError","<$> encoding error");jsl.setMessage("e.data.DecodingError","<$> decoding error");jsl.setMessage("e.data.BadIso88591String","<$> detected a not iso-8859-1 string: byte $ with value $");jsl.setMessage("e.data.BadAsciiString","<$> detected a not ascii string: byte $ with value $");jsl.setMessage("e.data.BadAsciiCode","<$> detected a not ascii code point: byte $ with value $");jsl.setMessage("e.blob.BadSeek","<$> invalid index, attempt to seek to negative position");jsl.setMessage("e.blob.BadByte","<$> invalid byte, expected a numeric value [0-255]");jsl.setMessage("e.blob.BadHexString","<$> invalid hexadecimal string size");jsl.setMessage("e.blob.EOB","<$> attempting to read beyond the end of the BLOB");jsl.setMessage("e.utf.UnicodeCharNotSupported","<$> Unicode character not supported in JavaScript(UCS-2) string found at index $");jsl.setMessage("e.utf.BadByte","<$> invalid byte value found at index $");jsl.setMessage("e.utf.BadChar","<$> found invalid UNICODE character in the string at index $");jsl.setMessage("e.utf.BadUtf16Bom","<$> found invalid BOM (Byte Order Mark)");jsl.setMessage("e.serial.BadNConstructor","<$> found an unkown native constructor, impossible to complete the serialization of the object");jsl.setMessage("e.serial.BadFormat","<$> Data format not recognized");jsl.setMessage("e.serial.BadSidMethod","<v(method:getSerialId())> error inside the method");jsl.setMessage("e.serial.BadSidConstructor","<$> the constructor referenced by the serial identifier does not exists or is of wrong type");jsl.setMessage("e.serial.BadSid",\'<v(method:getSerialId())> found a wrong serial identifier: "$", expected a not empty string\');jsl.setMessage("e.xml.EntityError","error on the resolution of entity [&$;]. Declaration not found.");jsl.setMessage("e.xml.BadNodeType","<$> found a node with a wrong type: [$]");jsl.setMessage("e.json.BadContent","<$> bad content, expected object or array");jsl.setMessage("e.json.BadProperyName",\'<json> syntax error, expected ["] character wrapping the object property name: $\');jsl.setMessage("e.json.BadExtValue","<json> found a wrong extended value [$] in the property [$]");jsl.setMessage("e.csv.BadCsvSeparator","<$> the separator character and the wrapper character must be different");jsl.setMessage("e.csv.SyntaxError","<$> syntax error on row $");jsl.Data=(function(){try{var j,l,d,b,g,n,m,f,i;l=[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70];d=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,50,51,52,53,54,55];b=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47];j=new jsl.Module("jsl.Data");j.__b16=l;j.__b32=d;j.__b64=b;j.__b64i={};g=jsl.Object;g.walk(l,function(c,a){j.__b16[a]=+c});g.walk(d,function(c,a){j.__b32[a]=+c});g.walk(b,function(c,a){j.__b64i[a]=+c});n=j.__m1={};m=j.__m2={};f=String.fromCharCode;for(var k=0;k<256;k++){i=f(k);n[i]=k;m[k]=i}j.__ens={json:"toJson",xml:"toXml",csv:"toCsv",serial:"serialize",ascii:"toAscii","iso-8859-1":"toIso88591",utf8:"toUtf8",utf16:"toUtf16","utf16-be":"toUtf16BE","utf16-le":"toUtf16LE","utf16-be*":"toUtf16","utf16-le*":function(a){return jsl.Data.toUtf16(a,true)},base16:"toBase16",base32:"toBase32",base64:"toBase64",lz77:"toLz77",lzss:"toLzSS"};j.__des={json:"fromJson",xml:"fromXml",csv:"fromCsv",serial:"deserialize",ascii:"fromAscii","iso-8859-1":"fromIso88591",utf8:"fromUtf8",utf16:"fromUtf16","utf16-be":"fromUtf16BE","utf16-le":"fromUtf16LE","utf16-be*":"fromUtf16","utf16-le*":"fromUtf16",base16:"fromBase16",base32:"fromBase32",base64:"fromBase64",lz77:"fromLz77",lzss:"fromLzSS"};j.__objs=[];j.__ids=[];j.__s=[];j.__cxs=["r"];j.__c=false;j.__objs.i=0;j.__crc=null;j.__txt_stream=false;j.__txt_rb=0;j.__LZ_DEFAULT_SBL=14;j.__LZ_DEFAULT_MSL=5;j.__LZ_DEFAULT_MNC=1;j.__LS_DEFAULT_SBL=14;j.__LS_DEFAULT_MSL=5;j.__LS_DEFAULT_MNC=1;j.__XML_OPTS={filter:null,transform:null,prettify:false,validate:false,dtd:"skip",whitetext:"collapse",text:"collapse",entity:"collapse",comment:"preserve",cdata:"preserve",pi:"preserve"};j.__JSN_OPTS={extended:true,prettify:false,filter:null,transform:null};j.__CSV_OPTS={wrapper:\'"\',separator:",",header:false,extended:true};return j}catch(h){jsl.throwError(h,"jsl.Data")}})();jsl.defineValidationRule("Blob",function(a,c,d,b){if(a==null){throw b("NullValue",[d])}if(!jsl.Data.Blob.isClassOf(a)){throw b("BadType",[d,"Blob"])}});jsl.Data.addOption("json");jsl.Data.addOption("json.encoder");jsl.Data.addOption("json.decoder");jsl.Data.addOption("json.extended",{setter:function(a,b,c){jsl.validate(a,"b",c);return this.__o_json_ex=+a}});jsl.Data.addOption("json.extension",{dvalue:jsl.Data.__o_json_es="{~~@#}",setter:function(a,b,c){jsl.validate(a,"s+",c);return this.__o_json_es=a}});jsl.Data.addOption("json.decoder.filter",{setter:function(a,b,c){if(a!=null){jsl.validate(a,"f",c)}return this.__o_json_d_fr=a}});jsl.Data.addOption("json.decoder.transform",{setter:function(a,b,c){if(a!=null){jsl.validate(a,"f",c)}return this.__o_json_d_tr=a}});jsl.Data.addOption("json.encoder.prettify",{setter:function(a,b,c){jsl.validate(a,"b",c);return this.__o_json_e_pr=+a}});jsl.Data.addOption("json.encoder.filter",{setter:function(a,b,c){if(a!=null){jsl.validate(a,"f",c)}return this.__o_json_e_fr=a}});jsl.Data.addOption("json.encoder.transform",{setter:function(a,b,c){if(a!=null){jsl.validate(a,"f",c)}return this.__o_json_e_tr=a}});jsl.Data.addOption("xml");jsl.Data.addOption("xml.encoder");jsl.Data.addOption("xml.decoder");jsl.Data.addOption("xml.encoder.prettify",{dvalue:false,setter:function(a,b,c){jsl.validate(a,"b",c);return this.__o_xml_pr=+a}});jsl.Data.addOption("xml.encoder.filter",{setter:function(a,b,c){if(a!=null){jsl.validate(a,"f",c)}return this.__o_xml_fr=a}});jsl.Data.addOption("xml.encoder.transform",{setter:function(a,b,c){if(a!=null){jsl.validate(a,"f",c)}return this.__o_xml_tr=a}});jsl.Data.addOption("xml.decoder.validate",{dvalue:false,setter:function(a,b,c){jsl.validate(a,"b",c);return this.__o_xml_vl=+a}});jsl.Data.addOption("xml.decoder.whitetext",{dvalue:"collapse",setter:function(a,b,c){jsl.validate(a,"s+[collapse,preserve]",c);return this.__o_xml_wt=a+""}});jsl.Data.addOption("xml.decoder.text",{dvalue:"collapse",setter:function(a,b,c){jsl.validate(a,"s+[collapse,preserve]",c);return this.__o_xml_tx=a+""}});jsl.Data.addOption("xml.decoder.comment",{dvalue:"preserve",setter:function(a,b,c){jsl.validate(a,"s+[collapse,preserve]",c);return this.__o_xml_cm=a+""}});jsl.Data.addOption("xml.decoder.cdata",{dvalue:"preserve",setter:function(a,b,c){jsl.validate(a,"s+[collapse,preserve]",c);return this.__o_xml_cd=a+""}});jsl.Data.addOption("xml.decoder.pi",{dvalue:"preserve",setter:function(a,b,c){jsl.validate(a,"s+[collapse,preserve]",c);return this.__o_xml_pi=a+""}});jsl.Data.addOption("xml.decoder.dtd",{dvalue:"skip",setter:function(a,b,c){jsl.validate(a,"s+[skip,parse]",c);return this.__o_xml_dt=+a}});jsl.Data.addOption("xml.decoder.entity",{dvalue:"collapse",setter:function(a,b,c){jsl.validate(a,"s+[collapse,preserve]",c);return this.__o_xml_en=a+""}});jsl.Data.addOption("csv");jsl.Data.addOption("csv.extended",{dvalue:true,setter:function(a,b,c){jsl.validate(a,"b",c);return !!+a}});jsl.Data.addOption("csv.separator",{dvalue:",",setter:function(a,b,c){jsl.validate(a,"sr/^[^\\\\n]$",c);if(a==this.getOption("csv.wrapper")){throw jsl.ParamError("e.csv.BadCsvSeparator:csv.separator")}return a+""}});jsl.Data.addOption("csv.wrapper",{dvalue:\'"\',setter:function(a,b,c){jsl.validate(a,"sr/^[^\\\\n]$",c);if(a==this.getOption("csv.separator")){throw jsl.ParamError("e.csv.BadCsvSeparator:csv.wrapper")}return a+""}});jsl.Data.addOption("csv.header",{dvalue:false,setter:function(a,b,c){jsl.validate(a,"b",c);return !!+a}});jsl.Data.addOption("lz77");jsl.Data.addOption("lz77.sbl",{dvalue:jsl.Data.__LZ_DEFAULT_SBL,setter:function(a,b,c){jsl.validate(a,"i[2,16]",c);return this.__LZ_DEFAULT_SBL=+a}});jsl.Data.addOption("lz77.msl",{dvalue:jsl.Data.__LZ_DEFAULT_SBL,setter:function(a,b,c){jsl.validate(a,"i[2,8]",c);return this.__LZ_DEFAULT_MSL=+a}});jsl.Data.addOption("lz77.mnc",{dvalue:jsl.Data.__LZ_DEFAULT_MNC,setter:function(a,b,c){jsl.validate(a,"i[1,255]",c);return this.__LZ_DEFAULT_MNC=+a}});jsl.Data.addOption("lzSS");jsl.Data.addOption("lzSS.sbl",{dvalue:jsl.Data.__LS_DEFAULT_SBL,setter:function(a,b,c){jsl.validate(a,"i[2,16]",c);return this.__LS_DEFAULT_SBL=+a}});jsl.Data.addOption("lzSS.msl",{dvalue:jsl.Data.__LS_DEFAULT_MSL,setter:function(a,b,c){jsl.validate(a,"i[2,8]",c);return this.__LS_DEFAULT_MSL=+a}});jsl.Data.addOption("lzSS.mnc",{dvalue:jsl.Data.__LS_DEFAULT_MNC,setter:function(a,b,c){jsl.validate(a,"i[1,255]",c);return this.__LS_DEFAULT_MNC=+a}});jsl.Data.encode=function(h,g){try{var d,j,f,c,b;if(arguments.length!==2){throw jsl.ParamError()}jsl.validate(g,"s+","encoding");d=g.replace(/\\s+/g,"").split(":");f=h;for(c=0,b=d.length;c<b;c++){j=d[c].toLowerCase();if(!j){throw jsl.ParamError("BadSyntax:encoding")}if(!this.__ens[j]){throw jsl.ParamError("e.data.BadEncoding:"+d[c])}switch(j){case"json":if(!jsl.isObject(f)){throw jsl.ParamError("e.data.BadEncodingSequence:encoding:"+j)}f="s";break;case"xml":if(!this.XNode.isClassOf(f)){throw jsl.ParamError("e.data.BadEncodingSequence:encoding:"+j)}f="s";break;case"csv":if(!jsl.require("datasource").DataSet.isClassOf(f)){throw jsl.ParamError("e.data.BadEncodingSequence:encoding:"+j)}f="s";break;case"serial":f="s";break;case"ascii":case"iso-8859-1":case"utf8":case"utf16":case"utf16-be":case"utf16-le":case"utf16-be*":case"utf16-le*":if(!jsl.isString(f)){throw jsl.ParamError("e.data.BadEncodingSequence:encoding:"+j)}f=new this.Blob;break;case"base16":case"base32":case"base64":case"lz77":case"lzss":if(!jsl.isString(f)&&!jsl.isArrayLike(f)&&!(f instanceof this.Blob)){throw jsl.ParamError("e.data.BadEncodingSequence:encoding:"+j)}f=new this.Blob}}f=h;for(c=0,b=d.length;c<b;c++){j=this.__ens[d[c].toLowerCase()];try{f=typeof j==="string"?this[j](f):j(f)}catch(i){throw jsl.ParamError("e.data.EncodingError:"+d[c],i)}}return f}catch(i){jsl.throwError(i,this,arguments)}};jsl.Data.decode=function(h,f){try{var d,j,g,c,b;if(arguments.length!==2){throw jsl.ParamError()}jsl.validate(f,"s+","decoding");d=f.replace(/\\s+/g,"").split(":");g=h;for(c=0,b=d.length;c<b;c++){j=d[c].toLowerCase();if(!j){throw jsl.ParamError("BadSyntax:decoding")}if(!this.__des[j]){throw jsl.ParamError("e.data.BadDecoding:"+d[c])}switch(j){case"json":if(!jsl.isString(g)){throw jsl.ParamError("e.data.BadDecodingSequence:decoding:"+j)}g={};break;case"xml":if(!jsl.isString(g)){throw jsl.ParamError("e.data.BadDecodingSequence:decoding:"+j)}g=new this.XNode;break;case"csv":if(!jsl.isString(g)){throw jsl.ParamError("e.data.BadDecodingSequence:decoding:"+j)}g=new (jsl.require("datasource")).DataSet(["hi"]);break;case"serial":if(!jsl.isString(g)){throw jsl.ParamError("e.data.BadDecodingSequence:decoding:"+j)}g="s";break;case"utf8":case"utf16":case"utf16-be":case"utf16-le":case"utf16-be*":case"utf16-le*":if(!jsl.isString(g)&&!jsl.isArrayLike(g)&&!(g instanceof this.Blob)){throw jsl.ParamError("e.data.BadDecodingSequence:encoding:"+j)}g="s";break;case"ascii":case"iso-8859-1":case"base16":case"base32":case"base64":case"lz77":case"lzss":if(!jsl.isString(g)&&!jsl.isArrayLike(g)&&!(g instanceof this.Blob)){throw jsl.ParamError("e.data.BadDecodingSequence:decoding:"+j)}g=new this.Blob}}g=h;for(c=0,b=d.length;c<b;c++){j=this.__des[d[c].toLowerCase()];try{g=typeof j==="string"?this[j](g):j(g)}catch(i){throw jsl.ParamError("e.data.DecodingError:"+d[c],i)}}return g}catch(i){jsl.throwError(i,this,arguments)}};jsl.Data.toJson=function(l,c){try{var D,F,b,B,z,C,m,E,n,q,h,k,d,w,o,a,j,g,G,u,A,y,x,v;if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(l,"o","obj");if(arguments.length===2){jsl.validate(c,"o","options")}if(c&&c.prettify!=null){jsl.validate(c.prettify,"b","options.prettify")}if(c&&c.filter!=null){jsl.validate(c.filter,"f","options.filter")}if(c&&c.transform!=null){jsl.validate(c.transform,"f","options.transform")}if(c&&c.extended!=null){jsl.validate(c.extended,"b","options.extended")}D=[];F=[];k=[];h=[];b={};B=0;w=0;d=0;G="";q=jsl.Data.toJson.__r;u=c&&c.prettify!=null?c.prettify:this.__o_json_e_pr;C=c&&c.filter!=null?c.filter:this.__o_json_e_fr;m=c&&c.transform!=null?c.transform:this.__o_json_e_tr;E=c&&c.extended!=null?c.extended:this.__o_json_ex;n=\'"\'+this.__o_json_es;j=u?\'": \':\'":\';A=/\\]|\\}/;y=/(,?)\\n?\\s*(\\{|\\[)?([\\s\\S]*)/;x=/(,?)\\n?\\s*("(?:\\.|[^\\\\"])*"|\\{|\\[):?\\s?([\\s\\S]*)/;v=/[\\u0000-\\u001F\\\\"]/g;z=function(K,t,T){var r,M,Q,O,N,f,R,L,s,H,i,P,I,p,J;if(!E&&t instanceof Function){return -1}P=this instanceof Array;I=t instanceof Object;if(T<=d){while(k[w-1]&&k[w-1].length>=T){if(u){H="\\n"+k[--w]+(F[w] instanceof Array?"]":"}")}else{H=F[--w] instanceof Array?"]":"}"}G=k[w];if(m){b.id=null;b.value=F[w];b.depth=G.length;i=H;b.txt=H;b.tokens=["",H.match(A)[0],""];try{H=m.call(F[w],b)}catch(S){throw jsl.ParamError("BadScript:option[transform]",S)}H=H==null?i:H;/*!*/if(!jsl.isString(H)){throw jsl.ParamError("BadReturnType:option[transform]:string")}/*!*/}D[B++]=H;g=true}}if(C){b.id=K;b.value=t;b.depth=T;try{if(!C.call(this,b)){return -1}}catch(S){throw jsl.ParamError("BadScript:option[filter]",S)}}if(K){H=(g?",":"")+(u?"\\n"+G:"")+(P?"":\'"\'+K.replace(v,q)+(I?\'":\':j))}else{H=""}d=T;g=true;p=-1;/*!*/if(I){s=h.length;for(R=0;R<s;R++){if(t===h[R]){throw jsl.ParamError("CircularReference:obj")}}h[s]=l;}/*!*/if(typeof t==="number"||t instanceof Number){if(isNaN(t)){H+=E?n+\'N"\':"null"}else{if(!isFinite(t)){H+=E?n+(t>0?\'I"\':\'-"\'):"null"}else{H+=t+""}}}else{if(typeof t==="string"||t instanceof String){H+=\'"\'+t.replace(v,q)+\'"\'}else{if(typeof t==="boolean"||(t instanceof Boolean)){H+=+t?"true":"false"}else{if(t instanceof Date){if(E){H+=n+"d"+t.getTime()+\'"\'}else{r=t.getFullYear();M=(t.getMonth()+1)+"";M=M.length===2?M:"0"+M;Q=t.getDate()+"";Q=Q.length===2?Q:"0"+Q;O=t.getHours();O=O.length===2?O:"0"+O;N=t.getMinutes();N=N.length===2?N:"0"+N;f=t.getSeconds();f=f.length===2?f:"0"+f;H+=\'"\'+r+"-"+M+"-"+Q+"T"+O+":"+N+":"+f+\'Z"\'}}else{if(t instanceof Array){H+="[";F[w]=t;k[w++]=G;G=G+"\\t";g=false;p=0}else{if(E&&t instanceof RegExp){H+=n+(t+"").replace(v,q)+\'"\'}else{if(t instanceof Function){H+=n+(t+"").replace(/^[\\s\\S]*?function/,"function").replace(v,q)+\'"\'}else{if(t===undefined){if(E){H+=n+\'u"\'}else{H+="null"}}else{if(t===null){H+="null"}else{if(I){H+="{";F[w]=t;k[w++]=G;G=G+"\\t";g=false;p=0}}}}}}}}}}if(m){b.id=K;b.value=t;b.depth=T;i=H;b.txt=H;b.tokens=P?H.match(y).slice(1):H.match(x).slice(1);try{H=m.call(this,b)}catch(S){throw jsl.ParamError("BadScript:option[transform]",S)}H=H==null?i:H;/*!*/if(!jsl.isString(H)){throw jsl.ParamError("BadReturnType:option[transform]:string")}/*!*/}D[B++]=H;if(!p){if(t instanceof Array){for(R=0,L=t.length;R<L;R++){z.call(t,R+"",t[R],T+1)}}else{p=[];for(J in t){if(t.hasOwnProperty(J)){p.push(J)}}p.sort();for(R=0,L=p.length;R<L;R++){z.call(t,p[R],t[p[R]],T+1)}}}};try{z("",l,0)}catch(E){throw jsl.Error(E).clearStackTrace()}while(F[--w]){if(u){o="\\n"+k[w]+(F[w] instanceof Array?"]":"}")}else{o=F[w] instanceof Array?"]":"}"}if(m){b.id=null;b.value=F[w];b.depth=k[w].length;a=o;b.txt=o;b.tokens=["",o.match(A)[0],""];try{o=m.call(F[w],b)}catch(E){throw jsl.ParamError("BadScript:option[transform]",E)}o=o==null?a:o;/*!*/if(!jsl.isString(o)){throw jsl.ParamError("BadReturnType:option[transform]:string")}/*!*/}D[B++]=o}D=D.join("");return D}catch(E){jsl.throwError(E,this,arguments)}};jsl.Data.toJson.__dt={\'"\':\'\\\\"\',"\\\\":"\\\\\\\\","/":"\\\\/","\\b":"\\\\b","\\f":"\\\\f","\\n":"\\\\n","\\r":"\\\\r","\\t":"\\\\t"};jsl.Data.toJson.__r=function(a){return jsl.Data.toJson.__dt[a]||"\\\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)};jsl.Data.fromJson=function(m,p){try{var o,h,b,g,j,n,k,d,c,a;/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(m,"s+","json");if(arguments.length===2){jsl.validate(p,"o","options")}if(p&&p.filter!=null){jsl.validate(p.filter,"f","options.filter")}if(p&&p.transform!=null){jsl.validate(p.transform,"f","options.transform")}if(p&&p.extended!=null){jsl.validate(p.extended,"b","options.extended")}/*!*/if(this.__ni_jsn_decode){try{g=this.__ni_jsn_decode(m)}catch(k){throw jsl.ParamError("BadSyntax:json",k)}}else{/*!*/o=m.replace(/"(\\\\.|[^"\\\\])*"/g,\'""\');h=o.search(/[^,":{}\\[\\]0-9.\\-+Eeaflnrstu\\n\\r\\s]/);if(h!==-1){throw jsl.ParamError("BadSyntax:json")}h=o.search(/^[\\s\\r\\n]*(\\{|\\[)/);if(h===-1){throw jsl.ParamError("json.BadContent:json")}b=o.match(/([^"\\s\\r\\n]+)[\\s\\r\\n]*:/);if(b){throw jsl.ParamError("json.BadProperyName",[b[1]])}/*!*/try{jsl.__ni_script_execute("jsl.__tmp.obj="+m)}catch(k){throw jsl.ParamError("BadSyntax:json",k)}g=jsl.__tmp.obj}j=p&&p.hasOwnProperty("filter")?p.filter:this.__o_json_d_fr;n=p&&p.hasOwnProperty("transform")?p.transform:this.__o_json_d_tr;k=p&&p.hasOwnProperty("extended")?p.extended:this.__o_json_ex;if(j||n||k){c={};a=Object.prototype.hasOwnProperty;d=function(f,x,q){var i,z,w,t,u;if(j){c.id=f;c.value=x;c.last=q;try{if(!j.call(this,c)){delete this[f];return -1}}catch(y){throw jsl.ParamError("BadScript:option[filter]",y)}}if(n){c.id=f;c.value=x;c.last=q;try{i=n.call(this,c)}catch(y){throw jsl.ParamError("BadScript:option[transform]",y)}if(i!==x){if(i&&x&&((u=typeof i)==="object"||u==="function")&&((u=typeof x)==="object"||u==="function")){for(var r in x){if(a.call(x,r)){i[r]=x[r]}}this[f]=i}else{this[f]=i}}}if(k&&(x=n?i:x)&&typeof x==="string"){t=jsl.Data.__o_json_es.length;z=x.slice(0,t);if(z===jsl.Data.__o_json_es){switch(x.charAt(t)){case"/":try{w=x.slice(t).match(/^\\/([\\s\\S]+)\\/([gim]{0,3})$/);this[f]=RegExp(w[1],w[2])}catch(y){throw jsl.ParamError("json.BadExtValue",["json[RegExp]",this[f],f])}break;case"u":this[f]=undefined;/*!*/if(x.length!==t+1){throw jsl.ParamError("json.BadExtValue",["json",this[f],f])}/*!*/break;case"N":this[f]=NaN;/*!*/if(x.length!==t+1){throw jsl.ParamError("json.BadExtValue",["json",this[f],f])}/*!*/break;case"I":this[f]=Infinity;/*!*/if(x.length!==t+1){throw jsl.ParamError("json.BadExtValue",["json",this[f],f])}/*!*/break;case"-":this[f]=-Infinity;/*!*/if(x.length!==t+1){throw jsl.ParamError("json.BadExtValue",["json",this[f],f])}/*!*/break;case"f":try{jsl.__ni_script_execute("jsl.__tmp.f="+x.slice(t))}catch(y){throw jsl.ParamError("json.BadExtValue",["json[Function]",this[f],f],y)}this[f]=jsl.__tmp.f;break;case"d":i=new Date(+x.slice(t+1));/*!*/if(isNaN(i.getTime())){throw jsl.ParamError("json.BadExtValue",["json[Date]",i,f])}/*!*/this[f]=i}}}};jsl.Object.walk(g,d,true)}return g}catch(k){jsl.throwError(k,this,arguments)}};jsl.Data.toXml=function(w,b){try{var c,A,l,x,v,m,y,u,h,g,k,a,B,j,C,d,q,n;/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}if(w==null){throw jsl.ParamError("NullValue:xnode")}if(!jsl.Data.XNode.isClassOf(w)){throw jsl.ParamError("BadType:xnode:jsl.Data.XNode")}if(arguments.length===2){jsl.validate(b,"o","options")}if(arguments.length===2&&b.filter!=null){jsl.validate(b.filter,"f","options.filter")}if(arguments.length===2&&b.prettify!=null){jsl.validate(b.prettify,"b","options.prettify")}if(arguments.length===2&&b.transform!=null){jsl.validate(b.transform,"f","options.transform")}/*!*/c=[];A=[];l=[];x=0;v=0;m=b&&b.prettify!=null?b.prettify:this.__o_xml_pr;y=u=b&&b.hasOwnProperty("filter")?b.filter:this.__o_xml_fr;h=g=b&&b.hasOwnProperty("transform")?b.transform:this.__o_xml_tr;k=w.__type===9;n=w.getRoot().__type===9?1:0;a={};B="";/*!*/if(y){y=function(){try{var f=u.apply(this,arguments)}catch(i){throw jsl.ParamError("BadScript:option[filter]",i)}return f}}if(h){h=function(){try{var f=g.apply(this,arguments)}catch(i){throw jsl.ParamError("BadScript:option[transform]",i)}if(f!=null&&!jsl.isString(f)){throw jsl.ParamError("BadReturnValue:option[transform]:string")}return f}}/*!*/q=function(p,o,i,f){if(o){return"&lt;"}else{if(i){return"&amp;"}else{return"&quot;"}}};w.walk(function(p){var F,t,E,K,H,f,L,D,I,i,G,J,o,r;F=y&&!y.call(p,a);t=p.getDepth();while(v&&t<=l[v-1].length+n){H=A[--v];f=H.__name;B=l[v];if(m&&!d){L="\\n"+B+"</"+f+">"}else{L="</"+f+">",d=false}if(h){a.node=H;a.txt=L;a.end=true;L=h.call(H,a);c[x++]=L==null?a.txt:L}else{c[x++]=L}}if(F){return -1}E=p.__type;K=/\\s*(\\r\\n|\\r|\\n)+\\s*/g;switch(E){case 1:A[v]=p;l[v++]=B;if(m){L="\\n"+B+"<"+p.__name}else{L="<"+p.__name}B=B+"\\t";D=p.__atts||(p.__drv_getAttributes(),p.__atts);I=p.__nss||(p.__drv_getNss(),p.__nss);J=[];o=0;for(i in D){if(D.hasOwnProperty(i)){J[o++]=i}}J.sort();for(o=0,r=J.length;o<r;o++){L+=" "+J[o]+\'="\'+(D[J[o]]+"").replace(/(<)|(&)|(")/g,q)+\'"\'}J=[];o=0;for(i in I){if(I.hasOwnProperty(i)){J[o++]=i}}J.sort();for(o=0,r=J.length;o<r;o++){L+=(J[o]?" xmlns:"+J[o]:" xmlns")+\'="\'+(I[J[o]]+"").replace(/(<)|(&)|(")/g,q)+\'"\'}L+=">";G=p.__value;if(G){G=(G+"").replace(/(<)|(&)/g,q);if(m&&G.search(/[\\n\\r]/)!==-1){L+=("\\n"+G+"\\n").replace(K,"\\n"+B).slice(0,-(B.length+1))}else{if(m){L+=G,d=!(p.__childs||p.__drv_getChildren()).length}else{L+=G}}}else{d=(p.__childs||p.__drv_getChildren()).length===1&&p.getChild(0).__type===3}break;case 3:G=p.__value.replace(/(<)|(&)/g,q);if(m&&G.search(/[\\n\\r]/)!==-1){L=("\\n"+G+"\\n").replace(K,"\\n"+B).slice(0,-(B.length+1))}else{L=G}break;case 4:G=p.__value.replace(/\\]\\]>/g,"]]&gt;");if(m&&G.search(/[\\n\\r]/)!==-1){L="\\n"+B+("<![CDATA[\\n"+G+"\\n").replace(K,"\\n\\t"+B).slice(0,-1)+"]]>"}else{if(m){L="\\n"+B+"<![CDATA["+G+"]]>"}else{L="<![CDATA["+G+"]]>"}}break;case 5:L="&"+p.__name+";";F=true;break;case 7:G=p.__value.replace(/\\?>/g,"?&gt;");if(m&&G.search(/[\\n\\r]/)!==-1){L="\\n"+B+"<?\\n"+p.__name+("\\n"+G+"\\n").replace(K,"\\n\\t"+B).slice(0,-1)+"?>"}else{if(m){L="\\n"+B+"<?"+p.__name+" "+G+"?>"}else{L="<?"+p.__name+" "+G+"?>"}}break;case 8:G=p.__value.replace(/-->/g,"--&gt;");if(m&&G.search(/[\\n\\r]/)!==-1){L="\\n"+B+("<!--\\n"+G+"\\n").replace(K,"\\n\\t"+B).slice(0,-1)+"-->"}else{if(m){L="\\n"+B+"<!--"+G+"-->"}else{L="<!--"+G+"-->"}}break;case 9:break;case 10:G=p.__value;if(G.replace(/"[^"]*"|\'[^\']*\'/g,"").indexOf("[")===-1){if(m){L="\\n"+B+"<!DOCTYPE "+p.__name+" "+G.replace(/[\\n\\r\\s]+/g," ")+">"}else{L="<!DOCTYPE "+p.__name+" "+G+">"}}else{if(m){G=G.replace(/\\]\\s*$/,"");K=/<!--[\\s\\S]*?-->|<\\?[\\s\\S]*?\\?>|<!(?:[^"\'>]+|"[^"]*"|\'[^\']*\')+>/g;L="\\n"+B+"<!DOCTYPE "+p.__name+" "+G.replace(K,"\\n"+B+"\\t$&")+"\\n"+B+"]>"}else{L="<!DOCTYPE "+p.__name+" "+G+">"}}break ;/*!*/default:throw jsl.ParamError("xml.BadNodeType",[p.__name,E])/*!*/}if(h){a.node=p;a.txt=L;a.end=false;L=h.call(p,a);c[x++]=L==null?a.txt:L}else{c[x++]=L}if(F){return -1}},!k);while(--v>=0){C=A[v].__name;if(m&&!d){j="\\n"+l[v]+"</"+C+">"}else{j="</"+C+">",d=false}if(h){a.node=A[v];a.txt=j;a.end=true;j=h.call(A[v],a);c[x++]=j==null?a.txt:j}else{c[x++]=j}}if(c.length){c[0]=c[0].replace(/^[^<]+/,"")}return c.join("").replace(/<(?!!|\\?)([^\\s\\n\\r>]+)([^<]*)>[\\n\\r\\s]*<\\/\\1>/g,"<$1$2/>")}catch(z){jsl.throwError(z,this,arguments)}};jsl.Data.fromXml=function(d,c){try{var l,h,m,t,p,g,r,j,n,s,q,k,a,f,b,o;/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(d,"s+","xml");if(arguments.length===2){jsl.validate(c,"o","options")}if(c&&c.validate!=null){jsl.validate(c.validate,"b","options.validate")}if(c&&c.dtd!=null){jsl.validate(c.dtd,"s+[skip,parse]","options.dtd")}if(c&&c.whitetext!=null){jsl.validate(c.whitetext,"s+[collapse,preserve]","options.whitetext")}if(c&&c.entity!=null){jsl.validate(c.entity,"s+[collapse,preserve]","options.entity")}if(c&&c.text!=null){jsl.validate(c.text,"s+[collapse,preserve]","options.text")}if(c&&c.comment!=null){jsl.validate(c.comment,"s+[collapse,preserve]","options.comment")}if(c&&c.cdata!=null){jsl.validate(c.cdata,"s+[collapse,preserve]","options.cdata")}if(c&&c.pi!=null){jsl.validate(c.pi,"s+[collapse,preserve]","options.pi")}/*!*/if(c&&c.validate!=null?+c.validate:this.__o_xml_vl){this.__ni_xml_validate(d)}p=0;g=(c&&c.comment||this.__o_xml_cm)=="collapse";j=(c&&c.cdata||this.__o_xml_cd)=="collapse";r=(c&&c.pi||this.__o_xml_pi)=="collapse";a=(c&&c.whitetext||this.__o_xml_wt)!="preserve";b=(c&&c.dtd||this.__o_xml_dt)!="parse";f=(c&&c.entity||this.__o_xml_en)!="preserve"&&!b;q=">"+(a?"[\\\\s\\\\n\\\\r]+(?=<)":"");l="(<!--[\\\\s\\\\S]*?--"+(g?q:"(?=>)")+")|(<\\\\?[\\\\s\\\\S]*?\\\\?"+(r?q:"(?=>)")+")|(<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]"+(j?q:"(?=>)")+")|(<!DOCTYPE[\\\\s\\\\r\\\\n](?:<!--[\\\\s\\\\S]*?-->|<\\\\?[\\\\s\\\\S]*?\\\\?>|[^\\"\'\\\\[>]+|\\"[^\\"]*\\"|\'[^\']*\'|\\\\[[^\\\\]]*])+(?=>))|<(?:[^\\"\'/>]|\\"[^\\"]*\\"|\'[^\']*\')+/(?=>)|<((/?)[^\\\\s\\\\r\\\\n>]+)(?=(?:[^\\"\'>]|\\"[^\\"]*\\"|\'[^\']*\')*>)|(>)[\\\\s\\\\n\\\\r]+(?=<)";if(f){l+="|&(?!lt|gt|amp|apos|quot|#x?\\\\d+)([^;\'\\"<>]+);"}m=d.replace(RegExp(l,"g"),function(u,i,B,A,z,y,x,w,v){if(y){return u+"@"+(x?--p:p++)}else{if(w&&a){return">"}else{if(i&&g){return""}else{if(B&&r){return""}else{if(A&&j){return""}else{if(v&&f){return jsl.Data.XNode.__drv_en_resolve(v,s)}else{if(z&&!b){z=z.replace(/&#(x?\\d+);/g,function(C){return String.fromCharCode("0"+C)});l=/<!ENTITY[\\s\\n\\r]+([^%\\s\\n\\r][^\\s\\n\\r]*)[\\s\\n\\r]+(?:("[^"]*")|(\'[^\']*\'))[\\s\\n\\r]*>/g;s={};while((q=l.exec(z))){s[q[1]]=(q[2]||q[3]).slice(1,-1)}s["@dtd"]=n;s["@os"]=c||{};s["@os"].validate=false}}}}}}}return u});g=g?"":"!--[\\\\s\\\\S]*?-->|";r=r?"":"\\\\?[\\\\s\\\\S]*?\\\\?>|";j=j?"":"![CDATA[\\\\s\\\\S]*?]]>|";b=b||f?"":"&(?!lt|gt|amp|apos|quot|#x?\\\\d+)[^;\'\\"<>]+;|";k="!DOCTYPE[\\\\s\\\\r\\\\n](?:<!--[\\\\s\\\\S]*?-->|<\\\\?[\\\\s\\\\S]*?\\\\?>|[^\\"\'\\\\[>]+|\\"[^\\"]*\\"|\'[^\']*\'|\\\\[[^\\\\]]*])+>|";h=b+"[^<"+(b?"&":"")+"]+|<(?:"+k+g+r+j+"(?:[^\\"\'/>]|\\"[^\\"]*\\"|\'[^\']*\')+/>|([^\\\\s\\\\n\\\\r>]+)(?:"+b+"[^<"+(b?"&":"")+"]+|"+(g?"<"+g:"")+(r?"<"+r:"")+(j?"<"+j:"")+"<(?!/\\\\1)[^<]+)*?</\\\\1[\\\\s\\\\n\\\\r]*>)";o=new this.XNode;o.__name="#document";o.__type=9;o.__value=null;o.__cix=0;o.__drv_re=RegExp(h,"g");o.__drv_txt="<d>"+m+"</d>";o.__drv_tc=(c&&c.text||this.__o_xml_tx)!="preserve";o.__drv_emap=b?s:null;try{n=o.select("chd::@dtd[1]")[0]}catch(q){throw jsl.ParamError("SyntaxError:xml",q)}if(n){o.__drv_re=RegExp(h.replace(/!DOCTYPE[\\s\\S]+?\\+>|/,""),"g")}try{t=o.select("chd::[1]")[0]}catch(q){throw jsl.ParamError("SyntaxError:xml",q)}/*!*/if(!t){throw jsl.ParamError("SyntaxError:xml")}/*!*/if(!n){t.__drv_re=RegExp(h.replace(/!DOCTYPE[\\s\\S]+?\\+>\\|/,""),"g")}return t}catch(q){jsl.throwError(q,this,arguments)}};jsl.Data.toCsv=function(d,t){try{var g,r,i,f,c,m,s,p,o,l,q,k,h;g=t||{};jsl.require("datasource");/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}if(!jsl.DataSource.DataSet.isClassOf(d)){throw jsl.ParamError("BadType:ds:DataSet")}if(arguments.length===2){jsl.validate(g,"o","options")}if(g.separator!=null){jsl.validate(g.separator,"sr/^[^\\\\r\\\\n]$","options.separator")}if(g.wrapper!=null){jsl.validate(g.wrapper,"sr/^[^\\\\r\\\\n]$","options.wrapper")}if(g.extended!=null){jsl.validate(g.extended,"b","options.extended")}if(g.header!=null){jsl.validate(g.header,"b","options.header")}/*!*/g.separator=g.separator||this.getOption("csv.separator");g.wrapper=g.wrapper||this.getOption("csv.wrapper");g.extended=g.extended!=null?g.extended:this.getOption("csv.extended");g.header=g.header!=null?g.header:this.getOption("csv.header");/*!*/if(g.separator==g.wrapper){throw jsl.ParamError("e.csv.BadCsvSeparator:options.separator")}/*!*/k=g.wrapper;r=RegExp("[\\\\"+g.separator+"\\\\"+k+"\\\\n\\\\r]");i=RegExp("\\\\"+k,"g");f=d.toArray(false);c=f.length;m=d.metadata();s=m.length;for(p=0;p<s;p++){o=m[p].type;if(o==="d"){for(l=0;l<c;l++){q=+f[l][p]+"";f[l][p]=r.test(q)?k+q.replace(i,k+k)+k:q}}else{if(o==="xml"){for(l=0;l<c;l++){q=f[l][p]!=null?this.toXml(f[l][p],this.__XML_OPTS):"null";f[l][p]=r.test(q)?k+q.replace(i,k+k)+k:q}}else{if(o==="json"){for(l=0;l<c;l++){q=f[l][p]!=null?this.toJson(f[l][p],this.__JSN_OPTS):"null";f[l][p]=r.test(q)?k+q.replace(i,k+k)+k:q}}else{if(o==="any"){for(l=0;l<c;l++){q=f[l][p]!=null?this.serialize(f[l][p]):"null";f[l][p]=r.test(q)?k+q.replace(i,k+k)+k:q}}else{if(o==="blob"){for(l=0;l<c;l++){q=f[l][p]!=null?f[l][p].toString(16):"null";f[l][p]=r.test(q)?k+q.replace(i,k+k)+k:q}}else{for(l=0;l<c;l++){q=f[l][p]+"";f[l][p]=r.test(q)?k+q.replace(i,k+k)+k:q}}}}}}}if(g.header){c++;h=[];for(p=0;p<s;p++){h[p]=m[p].id+(g.extended?"("+m[p].type+")":"")}f.unshift(h)}for(p=0;p<c;p++){f[p]=f[p].join(g.separator)}return f.join("\\n")}catch(j){jsl.throwError(j,this,arguments)}};jsl.Data.fromCsv=function(o,h){try{var l,z,f,x,m,j,t,C,D,u,y,k,g,q,v,p,A,d;l=h||{};/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(o,"s","csv");if(arguments.length===2){jsl.validate(l,"o","options")}if(l.separator!=null){jsl.validate(l.separator,"sr/^[^\\\\r\\\\n]$","options.separator")}if(l.wrapper!=null){jsl.validate(l.wrapper,"sr/^[^\\\\r\\\\n]$","options.wrapper")}if(l.extended!=null){jsl.validate(l.extended,"b","options.extended")}if(l.header!=null){jsl.validate(l.header,"b","options.header")}/*!*/z=l.separator||this.getOption("csv.separator");f=l.wrapper||this.getOption("csv.wrapper");A=l.extended!=null?l.extended:this.getOption("csv.extended");k=l.header!=null?l.header:this.getOption("csv.header");/*!*/if(z==f){throw jsl.ParamError("e.csv.BadCsvSeparator:options.separator")}/*!*/z="\\\\"+z;f="\\\\"+f;g="\\\\n\\\\r";j=z+"|\\\\n\\\\r|\\\\r\\\\n|\\\\n|\\\\r|$";x=RegExp(f+"([^"+f+"]|"+f+f+")*"+f+"|[^"+z+g+"]+|("+j+")","g");t=o.match(x);x=RegExp(f+f,"g");f=f.charAt(1);z=z.charAt(1);m=[];u=[""];D=0;y=0;q=0;p=0;for(var E=0,w=t.length;E<w;E++){j=t[E];C=j.charAt(0);if(C===z){u[++y]="";if(y>p){p=y}q=0}else{if(C===f){/*!*/if(q===1){throw jsl.ParamError("e.csv.SyntaxError:csv:"+D)}/*!*/u[y]=j.slice(1,-1).replace(x,f);q=1}else{if(C&&C!=="\\n"&&C!=="\\r"){/*!*/if(q===1){throw jsl.ParamError("e.csv.SyntaxError:csv:"+D)}/*!*/u[y]=j;q=1}else{m[D++]=u;u=[""];y=0;q=0}}}}if(k){k=m.splice(0,1)[0];if(A){x=/\\((.+)\\)$/;d={s:1,"s+":1,i:1,"i+":1,"i++":1,n:1,"n+":1,"n++":1,d:1,b:1,blob:1,xml:1,json:1,any:1};w=m.length;for(E=0;E<k.length;E++){t=k[E].match(x);if(t){t=t[1];k[E]={id:k[E].replace(x,""),type:d[t]?t:"s"};C=t.charAt(0);if(t==="d"){for(D=0;D<w;D++){m[D][E]=new Date(+m[D][E])}}else{if(t==="b"){for(D=0;D<w;D++){m[D][E]=m[D][E]==="true"}}else{if(C==="i"){for(D=0;D<w;D++){m[D][E]=+m[D][E]}}else{if(C==="n"){for(D=0;D<w;D++){m[D][E]=+m[D][E]}}else{if(C==="x"){for(D=0;D<w;D++){m[D][E]=m[D][E]!=null?this.fromXml(m[D][E],this.__XML_OPTS):null}}else{if(C==="j"){for(D=0;D<w;D++){m[D][E]=m[D][E]!=null?this.fromJson(m[D][E],this.__JSN_OPTS):null}}else{if(t==="blob"){for(D=0;D<w;D++){m[D][E]=m[D][E]!=null?new this.Blob(this.Blob.HEX+m[D][E]):null}}else{if(t==="any"){for(D=0;D<w;D++){m[D][E]=m[D][E]!=null?this.deserialize(m[D][E]):null}}}}}}}}}}}}for(E=k.length;E<=p;E++){k[E]="column"+E}}else{k=[];for(E=0;E<=p;E++){k[E]="column"+E}}if(p){v=new (jsl.require("datasource")).DataSet(k);v.inject(m)}return v||null}catch(B){jsl.throwError(B,this,arguments)}};jsl.Data.serialize=function(k,g){try{var D,m,j,u,n,d,c,o,y,h,p,C,w,r,q,x,B,z;/*!*/if(arguments.length<1||arguments.length>2){throw jsl.ParamError()}if(arguments.length===2){jsl.validate(g,"o","options")}if(g&&g.compress!=null){jsl.validate(g.compress,"b","options.compress")}/*!*/D=Object.prototype.hasOwnProperty;m=typeof k;j=this.__objs;u=this.__ids;d=this.__cxs;c=d[d.length-1];n=this.__s;o=j.length;y=n.length;if(!j.i&&g){this.__c=g.compress&&g.compress.valueOf()}j.i++;if((k&&m==="object")||m==="function"){if(k instanceof Array){n[y]="[];"}else{if(k instanceof Date){n[y]="new Date("+ +k+");"}else{if(k instanceof RegExp){n[y]=k+";"}else{if(k instanceof String){n[y]=\'new String("\'+k.replace(/\\\\|"/g,"\\\\$&").replace(/\\r/g,"\\\\r").replace(/\\n/g,"\\\\n")+\'");\'}else{if(k instanceof Number){n[y]="new Number("+k+");"}else{if(k instanceof Boolean){n[y]="new Boolean("+k+");"}else{if(k instanceof Error){n[y]="new "+jsl.Object.getName(k)+\'("\'+jsl.Error.getMessage(k).replace(/\\\\|"/g,"\\\\$&").replace(/\\r/g,"\\\\r").replace(/\\n/g,"\\\\n")+\'");\'}else{if(m==="function"){p=jsl.__mlng_function_getBody(k);if(p.replace(/"([^\\\\"]|\\\\.)*"|\'([^\\\\\']|\\\\.)*\'|\\/([^\\\\\\/]|\\\\.)*\\//g,"").search(/\\[native code[^\\]]*\\]/i)!==-1){p=jsl.__mlng_function_getName(k);if(typeof jsl.__go[p]!=="function"){throw jsl.ParamError("serial.BadNConstructor:v("+jsl.__mlng_function_getName(k)+")")}else{n[y]=p+";"}}else{n[y]=k+";"}}else{if(k.getSerialId&&k.getSerialId()!=null){try{h=k.getSerialId()}catch(A){throw jsl.ScriptError("serial.BadSidMethod",A)}h=h.replace(/\\\\|"/g,"\\\\$&").replace(/\\r/g,"\\\\r").replace(/\\n/g,"\\\\n");if(jsl.__debug){p="(function(){try{var o;";p+="f.prototype="+h+".prototype;";p+="if(typeof "+h+\'!=="function")throw jsl.TypeError("BadType",["\'+h+\'","function"]);\';p+="o=new f;o.constructor="+h+";if(jsl.isClass("+h+"))o.__class="+h+";return o}";p+=\'catch(e){throw jsl.Error("serial.BadSidConstructor",["\'+h+\'"],e)}\';p+="})();"}else{p="(f.prototype="+h+".prototype,new f);"}n[y]=p}else{n[y]="{};"}}}}}}}}}r=o;B=m!=="function";m=null;j[o]=k;u[o++]=y++;for(q in k){if(D.call(k,q)&&q!=="constructor"&&q!=="__class"&&q!=="__proto"&&(B||q!=="prototype")){m=typeof k[q];n[y++]=c+\'["\'+q.replace(/\\\\|"/g,"\\\\$&").replace(/\\r/g,"\\\\r").replace(/\\n/g,"\\\\n")+\'"]=\';if(k[q]&&(m==="object"||m==="function")){for(C=0,w=j.length;C<w;C++){if(k[q]===j[C]){break}}if(C<w){n[y++]=C?"_._"+C+";":"r;";u[C]>0&&(u[C]*=-1)}else{d[d.length]="_._"+o;this.serialize(k[q]);y=n.length;o=j.length}}else{if(m!=="string"){n[y++]=k[q]+";"}else{n[y++]=\'"\'+k[q].replace(/\\\\|"/g,"\\\\$&").replace(/\\r/g,"\\\\r").replace(/\\n/g,"\\\\n")+\'";\'}}}}if(m&&u[r]>0){u[r]*=-1}}else{if(m!=="string"){n[y++]=k+";"}else{n[y++]=\'"\'+k.replace(/\\\\|"/g,"\\\\$&").replace(/\\r/g,"\\\\r").replace(/\\n/g,"\\\\n")+\'";\'}}j.i--;d.pop();if(!j.i){for(C=1,w=j.length;C<w;C++){y=u[C];if(y<0){n[-y]="_._"+C+"="+n[-y]}}x=n.join("").replace(/\\u2028/g,"\\\\u2028").replace(/\\u2029/g,"\\\\u2029");d[0]="r";j.length=0;u.length=0;n.length=0;if(this.__c){n=x.replace(/\\u0100-\\uffff/g,function(a){return"\\\\u"+("000"+a.charCodeAt(0).toString(16)).slice(-4)});z=String.fromCharCode;x=[];B=0;this.__c=false;for(C=0,w=n.length;C<w;C++){x[B++]=z(n.charCodeAt(C++)<<8|n.charCodeAt(C))}if(n.length%2){x="JSL~SO"+x.join("")}else{x="JSL~SE"+x.join("")}}else{x="JSL~SR"+x}}return x}catch(A){this.__cxs=["r"];this.__objs.i=this.__objs.length=this.__ids.length=this.__s.length=0;this.__c=false;jsl.throwError(A.clearStackTrace(),this,arguments)}};jsl.Data.deserialize=function(o){try{var b,k,h,c,i;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(o,"s+","s");if(o.length<=6){throw jsl.ParamError("serial.BadFormat:s")}/*!*/b=o.slice(0,6);/*!*/if(!(/JSL~S(R|E|O)/).test(b)){throw jsl.ParamError("serial.BadFormat:s")}/*!*/b=b.slice(-1);k=o.slice(6);if(b!=="R"){h=[];i=String.fromCharCode;for(var m=0,g=k.length;m<g;m++){c=k.charCodeAt(m);h[m]=i(c>>8,c&255)}if(b==="O"){h[--m]=h[m].charAt(0)}k=h.join("")}try{jsl.__ni_script_execute("jsl.__tmp.r=(function(){var f=function(){},_={},r="+k+"return r})()")}catch(j){throw jsl.ParamError("BadData",j)}return jsl.__tmp.r}catch(j){jsl.throwError(j,this,arguments)}};jsl.Data.crc32=function(h){try{var c,k,f,g,b,d;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(h,"t[al,s,Blob]","data");/*!*/try{d=this.Blob.toArray(h)}catch(j){if(j instanceof jsl.ParamError){throw j.clearStackTrace()}else{throw j}}if(!this.__crc){for(c=0,k={};c<256;c++){for(f=0,g=c;f<8;f++){if(g&1){g=g>>>1^3988292384}else{g>>>=1}}k[c]=g}this.__crc=k}b=d.length;k=this.__crc;f=0;g=-1;while(f<b){g=k[(g^d[f++])&255]^g>>>8}return(g^-1)>>>0}catch(j){jsl.throwError(j,this,arguments)}};jsl.Data.toBase16=function(i){try{var h,k,f,g,d,c;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(i,"t[al,s,Blob]","data");/*!*/try{h=this.Blob.toArray(i)}catch(j){if(j instanceof jsl.ParamError){throw j.clearStackTrace()}else{throw j}}k=this.__b16;f=h.length;g=[];d=0;c=0;while(d<f){g[c++]=k[h[d]>>4];g[c++]=k[h[d++]&15]}return new this.Blob(g)}catch(j){jsl.throwError(j,this,arguments)}};jsl.Data.fromBase16=function(h){try{var g,k,f,i,d,c;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(h,"t[al,s,Blob]","b16");/*!*/try{g=this.Blob.toArray(h)}catch(j){if(j instanceof jsl.ParamError){throw j.clearStackTrace()}else{throw j}}/*!*/if(h.length%2){throw jsl.ParamError("BadValue:b16")}if(h.length&&!(/^[A-F0-9]+$/).test(this.Blob.toString(h))){throw jsl.ParamError("BadValue:b16")}/*!*/k=this.__b16;f=g.length;i=[];d=0;c=0;while(d<f){i[c++]=k[g[d++]]<<4|k[g[d++]]}return new this.Blob(i)}catch(j){jsl.throwError(j,this,arguments)}};jsl.Data.toBase32=function(h){try{var m,d,f,g,k,j,c;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(h,"t[al,s,Blob]","data");/*!*/try{m=this.Blob.toArray(h)}catch(i){if(i instanceof jsl.ParamError){throw i.clearStackTrace()}else{throw i}}d=this.__b32;f=m.length;g=[];k=0;j=0;while(k<f){g[j++]=d[m[k]>>3];g[j++]=d[(m[k++]&7)<<2|m[k]>>6];g[j++]=d[(m[k]&62)>>1];g[j++]=d[(m[k++]&1)<<4|m[k]>>4];g[j++]=d[(m[k++]&15)<<1|m[k]>>7];g[j++]=d[(m[k]&124)>>2];g[j++]=d[(m[k++]&3)<<3|m[k]>>5];g[j++]=d[m[k++]&31]}c=f%5;if(c===1){g[j-6]=g[j-5]=g[j-4]=g[j-3]=g[j-2]=g[j-1]=61}else{if(c===2){g[j-4]=g[j-3]=g[j-2]=g[j-1]=61}else{if(c===3){g[j-3]=g[j-2]=g[j-1]=61}else{if(c===4){g[j-1]=61}}}}return new this.Blob(g)}catch(i){jsl.throwError(i,this,arguments)}};jsl.Data.fromBase32=function(d){try{var h,k,g,i,f,c;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(d,"t[al,s,Blob]","b32");/*!*/try{h=this.Blob.toArray(d)}catch(j){if(j instanceof jsl.ParamError){throw j.clearStackTrace()}else{throw j}}/*!*/if(d.length%8){throw jsl.ParamError("BadValue:b32")}if(d.length&&!(/^[A-Z2-7]+(={0,1}|={3,4}|={6})$/).test(this.Blob.toString(d))){throw jsl.ParamError("BadValue:b32")}/*!*/k=this.__b32;g=h.length;i=[];f=0;c=0;while(f<g){i[c++]=(k[h[f++]]<<3|k[h[f]]>>2);if(h[f+1]===61){break}i[c++]=(k[h[f++]]<<6|k[h[f++]]<<1|k[h[f]]>>4)&255;if(h[f+1]===61){break}i[c++]=(k[h[f++]]<<4|k[h[f]]>>1)&255;if(h[f+1]===61){break}i[c++]=(k[h[f++]]<<7|k[h[f++]]<<2|k[h[f]]>>3)&255;if(h[f+1]===61){break}i[c++]=(k[h[f++]]<<5|k[h[f++]])&255}return new this.Blob(i)}catch(j){jsl.throwError(j,this,arguments)}};jsl.Data.toBase64=function(h){try{var m,d,g,f,k,j,c;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(h,"t[al,s,Blob]","data");/*!*/try{m=this.Blob.toArray(h)}catch(i){if(i instanceof jsl.ParamError){throw i.clearStackTrace()}else{throw i}}d=this.__b64;g=m.length;f=[];k=0;j=0;while(k<g){f[j++]=d[m[k]>>2];f[j++]=d[(m[k++]&3)<<4|m[k]>>4];f[j++]=d[(m[k++]&15)<<2|m[k]>>6];f[j++]=d[m[k++]&63]}c=g%3;if(c===1){f[j-2]=f[j-1]=61}else{if(c===2){f[j-1]=61}}return new this.Blob(f)}catch(i){jsl.throwError(i,this,arguments)}};jsl.Data.fromBase64=function(h){try{var g,k,f,i,d,c;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(h,"t[al,s,Blob]","b64");/*!*/try{g=this.Blob.toArray(h)}catch(j){if(j instanceof jsl.ParamError){throw j.clearStackTrace()}else{throw j}}/*!*/if(h.length%4){throw jsl.ParamError("BadValue:b64")}if(h.length&&!(/^[A-Za-z0-9\\+\\/]+\\={0,2}$/).test(this.Blob.toString(h))){throw jsl.ParamError("BadValue:b64")}/*!*/k=this.__b64i;f=g.length;i=[];d=0;c=0;while(d<f){i[c++]=k[g[d++]]<<2|k[g[d]]>>4;if(g[d+1]===61){break}i[c++]=(k[g[d++]]<<4|k[g[d]]>>2)&255;if(g[d+1]===61){break}i[c++]=(k[g[d++]]<<6|k[g[d++]])&255}return new this.Blob(i)}catch(j){jsl.throwError(j,this,arguments)}};jsl.Data.toAscii=function(g){try{var d,f,i;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(g,"s","s");/*!*/f=g.split("");i=this.__m1;for(var c=0,b=g.length;c<b;c++){f[c]=i[f[c]];/*!*/if(f[c]==null||f[c]>127){throw jsl.ParamError("e.data.BadAsciiString:s:"+c+":"+f[c])}/*!*/}d=new this.Blob;d.__bs=f;return d}catch(h){jsl.throwError(h,this,arguments)}};jsl.Data.fromAscii=function(b){try{var g,f;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(b,"t[al,s,Blob]","ascii");/*!*/try{g=this.Blob.toArray(b)}catch(h){throw (h instanceof jsl.ParamError?h.clearStackTrace():h)}/*!*/for(var d=0,c=g.length;d<c;d++){if(g[d]&128){throw jsl.ParamError("e.data.BadAsciiCode:ascii:"+d+":"+g[d])}}/*!*/this.__txt_rb=0;f=new this.Blob;f.__bs=g;return f+""}catch(h){jsl.throwError(h,this,arguments)}};jsl.Data.toIso88591=function(g){try{var d,f,i;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(g,"s","s");/*!*/f=g.split("");i=this.__m1;for(var c=0,b=g.length;c<b;c++){f[c]=i[f[c]];/*!*/if(f[c]==null){throw jsl.ParamError("e.data.BadIso88591String:s:"+c+":"+f[c])}/*!*/}d=new this.Blob;d.__bs=f;return d}catch(h){jsl.throwError(h,this,arguments)}};jsl.Data.fromIso88591=function(d){try{var b,a;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(d,"t[al,s,Blob]","iso88591");/*!*/try{b=this.Blob.toArray(d)}catch(c){throw (c instanceof jsl.ParamError?c.clearStackTrace():c)}this.__txt_rb=0;a=new this.Blob;a.__bs=b;return a+""}catch(c){jsl.throwError(c,this,arguments)}};jsl.Data.toUtf8=function(i){try{var h,g,f,d,k;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(i,"s","s");/*!*/g=i.length;f=d=0;h=[];while(f<g){k=i.charCodeAt(f++);/*!*/if(k>=55296&&k<=57343){throw jsl.ParamError("utf.BadChar:s:"+(f-1))}/*!*/if(k<128){h[d++]=k}else{if(k<2048){h[d++]=192|k>>6;h[d++]=128|k&63}else{if(k<65535){h[d++]=224|k>>12;h[d++]=128|k>>6&63;h[d++]=128|k&63}}}}return new this.Blob(h)}catch(j){jsl.throwError(j,this,arguments)}};jsl.Data.fromUtf8=function(n){try{var p,h,o,m,d,q,k,g,f,j;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(n,"t[al,s,Blob]","utf8");/*!*/try{p=this.Blob.toArray(n)}catch(i){if(i instanceof jsl.ParamError){throw i.clearStackTrace()}else{throw i}}j=this.__txt_stream;h=String.fromCharCode;o=m=0;d=p.length;q=[];this.__txt_rb=0;while(o<d){k=p[o++];if(k<128){q[m++]=h(k)}else{if((k&224)===192){g=p[o++];if(j&&g==null){this.__txt_rb=1;break;}/*!*/if((g&192)!==128){throw jsl.ParamError("utf.BadByte:utf8:"+(o-1))}/*!*/q[m++]=h(((k&31)<<6)|(g&63))}else{if((k&240)===224){g=p[o++];f=p[o++];if(j&&(g==null||f==null)){this.__txt_rb=g==null?2:1;break;}/*!*/if((g&192)!==128){throw jsl.ParamError("utf.BadByte:utf8:"+(o-2))}if((f&192)!==128){throw jsl.ParamError("utf.BadByte:utf8:"+(o-1))}/*!*/q[m++]=h(((k&15)<<12)|((g&63)<<6)|(f&63));}/*!*/else{if((k&248)===240){throw jsl.ParamError("utf.UnicodeCharNotSupported:utf8:"+(o-1))}else{throw jsl.ParamError("utf.BadByte:utf8:"+(o-1))}}/*!*/}}}return q.join("")}catch(i){jsl.throwError(i,this,arguments)}};jsl.Data.toUtf16=function(b,a){try{/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(b,"s","s");if(arguments.length===2){jsl.validate(a,"b","le")}/*!*/return a?this.toUtf16LE(String.fromCharCode(65279)+b):this.toUtf16BE(String.fromCharCode(65279)+b)}catch(c){throw jsl.Error(c).clearStackTrace().trace(this,arguments)}};jsl.Data.fromUtf16=function(a){try{var b,d,c;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(a,"t[al,s,Blob]","utf16");/*!*/b=this.Blob.toArray(a);if(b.length){/*!*/if(!this.__txt_stream&&b.length%2){throw jsl.ParamError("BadSize:utf16")}/*!*/d=b[0]<<8|b[1];b.shift();b.shift();if(d===65279){c=this.fromUtf16BE(b)}else{if(d===65534){c=this.fromUtf16LE(b)}/*!*/else{throw jsl.ParamError("utf.BadUtf16Bom:utf16")}/*!*/}}return c||""}catch(f){throw jsl.Error(f).clearStackTrace().trace(this,arguments)}};jsl.Data.toUtf16BE=function(i){try{var f,h,g,d,k;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(i,"s","s");/*!*/f=[];h=i.length;g=d=0;while(g<h){k=i.charCodeAt(g++);/*!*/if(k>=55296&&k<=57343){throw jsl.ParamError("utf.BadChar:s:"+(g-1))}/*!*/f[d++]=k>>8;f[d++]=k&255}return new this.Blob(f)}catch(j){jsl.throwError(j,this,arguments)}};jsl.Data.fromUtf16BE=function(k){try{var g,f,d,c,h,j;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(k,"t[al,s,Blob]","utf16be");/*!*/g=this.Blob.toArray(k);j=String.fromCharCode;f=g.length;d=c=0;h=[];/*!*/if(!this.__txt_stream&&f%2){throw jsl.ParamError("BadSize:utf16be")}/*!*/while(d<f){/*!*/if(g[d]>=55296&&g[d]<=57343){throw jsl.ParamError("utf.UnicodeCharNotSupported:utf16be["+d+"]")}/*!*/h[c++]=j((g[d++]<<8)|g[d++])}this.__txt_rb=0;if(this.__txt_stream){this.__txt_rb=g.length%2;if(this.__txt_rb){h.length--}}return h.join("")}catch(i){throw jsl.Error(i).clearStackTrace().trace(this,arguments)}};jsl.Data.toUtf16LE=function(i){try{var f,h,g,d,k;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(i,"s","s");/*!*/f=[];h=i.length;g=d=0;while(g<h){k=i.charCodeAt(g++);/*!*/if(k>=55296&&k<=57343){throw jsl.ParamError("utf.BadChar:s:"+(g-1))}/*!*/f[d++]=k&255;f[d++]=k>>8}return new this.Blob(f)}catch(j){jsl.throwError(j,this,arguments)}};jsl.Data.fromUtf16LE=function(i){try{var g,f,d,c,h,k;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(i,"t[al,s,Blob]","utf16le");/*!*/g=this.Blob.toArray(i);k=String.fromCharCode;f=g.length;d=c=0;h=[];/*!*/if(!this.__txt_stream&&f%2){throw jsl.ParamError("BadSize:utf16le")}/*!*/while(d<f){/*!*/if(g[d]>=55296&&g[d]<=57343){throw jsl.ParamError("utf.UnicodeCharNotSupported:utf16le["+d+"]")}/*!*/h[c++]=k(g[d++]|(g[d++]<<8))}this.__txt_rb=0;if(this.__txt_stream){this.__txt_rb=g.length%2;if(this.__txt_rb){h.length--}}return h.join("")}catch(j){throw jsl.Error(j).clearStackTrace().trace(this,arguments)}};jsl.Data.toLz77=function(H,k){try{var x,h,t,q,b,E,g,G,v,A,C,m,s,y,D,z,F,j,w,p,u,f;/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(H,"t[al,s,Blob]","data");if(arguments.length===2){jsl.validate(k,"o","options"),k.sbl!=null&&jsl.validate(k.sbl,"i[2,16]","options.sbl"),k.msl!=null&&jsl.validate(k.msl,"i[2,8]","options.msl"),k.mnc!=null&&jsl.validate(k.mnc,"i[1,255]","options.mnc")}/*!*/x=k&&k.sbl||this.__LZ_DEFAULT_SBL;h=k&&k.msl||this.__LZ_DEFAULT_MSL;t=k&&k.mnc||this.__LZ_DEFAULT_MNC;q=(1<<x)-1;b=(1<<h)-1;E=this.Blob.toArray(H);g=[];G={};v=x+h+8;A=w=u=f=0;while(E[A]!=null){C=E[A]<<24|E[A+1]<<16|E[A+2]<<8|E[A+3];m=G[C];if(m){s=y=0;D=E[A];z=m.i=m.length-m.i>t?m.length-t:m.i;for(F=m.length-1;F>=z;F--){j=m[F];if(A-j>q){m.i=F+1;break}j=j+2;w=A+2;while(w-A<=b&&E[j]===E[w]){j++,w++}if(--w-A>y){s=A-m[F];y=w-A;D=E[A+y]}}m[m.length]=A;A+=y+1}else{G[C]=[A];G[C].i=0;s=0;y=0;D=E[A++]}C=s<<h+8|y<<8|D;p=v-8+f%8;g[u]=g[u++]|C>>>p;if(p>7){g[u++]=C>>>p-8&255,p-=8}if(p>7){g[u++]=C>>>p-8&255,p-=8}if(p>7){g[u++]=C>>>p-8&255,p-=8}if(p===8){g[u++]=(C&(1<<p)-1)<<8-p}else{g[u]=(C&(1<<p)-1)<<8-p}f+=v}return new this.Blob(g)}catch(B){jsl.throwError(B,this,arguments)}};jsl.Data.fromLz77=function(z,f){try{var p,b,y,u,t,k,a,h,g,s,n,j,w,q,x;/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(z,"t[al,s,Blob]","data");if(arguments.length===2){jsl.validate(f,"o","options"),f.sbl!=null&&jsl.validate(f.sbl,"i[2,16]","options.sbl"),f.msl!=null&&jsl.validate(f.msl,"i[2,8]","options.msl")}/*!*/p=(f&&f.sbl)||this.__LZ_DEFAULT_SBL;b=(f&&f.msl)||this.__LZ_DEFAULT_MSL;y=this.Blob.toArray(z);u=[];t=0;a=0;k=0;while(y[t+1]!=null){h=p;g=a%8;s=8-g;n=(1<<s)-1;j=0;if(h>8){j=(y[t++]&n)<<g|(y[t]&~n)>>s,h=h-8}w=y[t]&n;if(h<s){w=w>>>s-h}else{w=w<<h-s|(y[++t]&~n)>>16-h-g}j=j<<h|w;a=a+p;if(j){g=a%8;s=8-g;n=(1<<s)-1;w=y[t]&n;if(b<s){q=w>>>s-b}else{q=w<<b-s|(y[++t]&~n)>>16-b-g}a=a+b}else{a=a+b,t=~~(a/8)}g=a%8;s=8-g;n=(1<<s)-1;x=(y[t++]&n)<<g|(y[t]&~n)>>s;a=a+8;if(j){for(q+=k;k-q;){u[k]=u[k++-j]}}u[k++]=x}if(j&&y[t]==null){u.splice(u.length-1,1)}return new this.Blob(u)}catch(v){jsl.throwError(v,this,arguments)}};jsl.Data.toLzSS=function(H,j){try{var x,g,t,q,b,E,k,G,v,A,C,m,s,y,D,z,F,h,w,p,u,f;if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(H,"t[al,s,Blob]","data");if(arguments.length===2){jsl.validate(j,"o","options"),j.sbl!=null&&jsl.validate(j.sbl,"i[2,16]","options.sbl"),j.msl!=null&&jsl.validate(j.msl,"i[2,8]","options.msl"),j.mnc!=null&&jsl.validate(j.mnc,"i[1,255]","options.mnc")}x=j&&j.sbl||this.__LS_DEFAULT_SBL;g=j&&j.msl||this.__LS_DEFAULT_MSL;t=j&&j.mnc||this.__LS_DEFAULT_MNC;q=(1<<x)-1;b=(1<<g)-1;E=this.Blob.toArray(H);k=[];G={};v=x+g;A=w=u=f=0;while(E[A]!=null){C=E[A]<<24|E[A+1]<<16|E[A+2]<<8|E[A+3];m=G[C];if(m){s=y=0;z=m.i=m.length-m.i>t?m.length-t:m.i;for(F=m.length-1;F>=z;F--){h=m[F];if(A-h>q){m.i=F+1;break}h=h+2;w=A+2;while(w-A<=b&&E[h]===E[w]){h++,w++}if(--w-A>y){s=A-m[F];y=w-A}}m[m.length]=A;if(s){A+=y}else{D=E[A++]}}else{G[C]=[A];G[C].i=0;s=0;D=E[A++]}p=f++%8;if(s){if(p===7){k[u++]|=1}else{k[u]|=1<<7-p}C=s<<g|y;p=v-8+f%8;if(p>=0){k[u]=k[u++]|C>>>p}else{k[u]=k[u]|C<<-p,p=0}if(p>7){k[u++]=C>>>p-8&255,p-=8}if(p>7){k[u++]=C>>>p-8&255,p-=8}if(p===8){k[u++]=(C&(1<<p)-1)<<8-p}else{if(p){k[u]=(C&(1<<p)-1)<<8-p}}f+=v}else{if(p===7){u++;k[u++]=D}else{k[u]=k[u++]|D>>>p+1;k[u]=(D&(1<<p+1)-1)<<7-p}f+=8}}return new this.Blob(k)}catch(B){jsl.throwError(B,this,arguments)}};jsl.Data.fromLzSS=function(A,c){try{var q,b,z,v,u,n,w,a,h,g,t,p,j,y,s,k;if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(A,"t[al,s,Blob]","data");if(arguments.length===2){jsl.validate(c,"o","options"),c.sbl!=null&&jsl.validate(c.sbl,"i[2,16]","options.sbl"),c.msl!=null&&jsl.validate(c.msl,"i[2,8]","options.msl")}q=(c&&c.sbl)||this.__LS_DEFAULT_SBL;b=(c&&c.msl)||this.__LS_DEFAULT_MSL;z=this.Blob.toArray(A);v=[];u=0;a=0;n=0;while(z[u+1]!=null){w=z[u]&1<<7-a++%8;u=~~(a/8);if(w){h=q;g=a%8;t=8-g;p=(1<<t)-1;j=0;if(h>8){j=(z[u++]&p)<<g|(z[u]&~p)>>t,h=h-8}y=z[u]&p;if(h<t){y=y>>>t-h}else{y=y<<h-t|(z[++u]&~p)>>16-h-g}j=j<<h|y;a=a+q;g=a%8;t=8-g;p=(1<<t)-1;y=z[u]&p;if(b<t){s=y>>>t-b}else{s=y<<b-t|(z[++u]&~p)>>16-b-g}a=a+b;for(s+=n,k=n-j;n-s;){v[n++]=v[k++]}}else{g=a%8;t=8-g;p=(1<<t)-1;a=a+8;v[n++]=(z[u++]&p)<<g|(z[u]&~p)>>t}}return new this.Blob(v)}catch(x){jsl.throwError(x,this,arguments)}};jsl.Class("jsl.Data.XNode",{inherits:jsl.Node,st___qts:{},st___qfs:{},st___qvs:{},initializer:function(){var a=":A-Z_a-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD";a=RegExp("^["+a+"](["+a+"\\\\-\\\\.0-9\\\\u00b7\\\\u0300-\\\\u036f\\\\u203f-\\\\u2040])*$");this.__re_name=a;this.prototype.__re_name=a},st_createDocument:function(){var a;/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/a=new this;a.__name="#document";a.__value=null;a.__type=9;return a},st_createDtd:function(a,b){var c;/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(a,"s+","name");if(!this.__re_name.test(a)){throw jsl.ParamError("BadCharacter:name")}if(arguments.length===2){jsl.validate(b,"s","content")}/*!*/c=new this(a);c.__value=b?b+"":"";c.__type=10;return c},st_createElement:function(b,a){var d,h,c,f;/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(b,"s+","name");if(!this.__re_name.test(b)){throw jsl.ParamError("BadCharacter:name")}if(arguments.length===2){jsl.validate(a,"o","attributes")}/*!*/d=new this(b);d.__value=null;d.__type=1;if(a){h={};c={};for(var g in a){if(a.hasOwnProperty(g)){/*!*/if(!this.__re_name.test(g)){throw jsl.ParamError("BadCharacter:attribute("+g+")")}/*!*/f=g.slice(0,6);if(f==="xmlns"){c[""]=a[g]}else{if(f==="xmlns:"){c[g.slice(6)]=a[g]}else{h[g]=a[g]}}}}d.__nss=c;d.__atts=h}return d},st_createText:function(b){var a;/*!*/if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(b,"s","text")}/*!*/a=new this;a.__name="#text";a.__value=b?b+"":"";a.__type=3;return a},st_createComment:function(b){var a;/*!*/if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(b,"s","comment")}/*!*/a=new this;a.__name="#comment";a.__value=b?b+"":"";a.__type=8;return a},st_createPi:function(a,b){var c;/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(a,"s+","name");if(!this.__re_name.test(a)){throw jsl.ParamError("BadCharacter:name")}if(/^xml$/i.test(a)){throw jsl.ParamError("ValueNotPermitted:name=xml")}if(arguments.length===2){jsl.validate(b,"s","content")}/*!*/c=new this(a);c.__value=b?b+"":"";c.__type=7;return c},st_createCdata:function(a){var b;/*!*/if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(a,"s","content")}/*!*/b=new this;b.__name="#cdata-section";b.__value=a?a+"":"";b.__type=4;return b},XNode:function(a){/*!*/if(arguments.length>1){throw jsl.ParamError()}/*!*/this.__id=this.__proto.__id++;if(arguments.length){/*!*/jsl.validate(a,"s+","name");if(!this.__re_name.test(a)){throw jsl.ParamError("BadCharacter:name")}/*!*/this.setName(a);this.__type=1}},toXml:function(a){try{return jsl.Data.toXml(this,a||{})}catch(b){throw b instanceof jsl.ParamError?b.clearStackTrace():b}},importChildren:function(b,a){var c;/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(b,"s+","xml");if(arguments.length===2){jsl.validate(a,"o","options")}/*!*/c=jsl.Data.fromXml("<d>"+b+"</d>",a||{});this.__childs=c.__drv_getChildren();this.__drv_re=c.__drv_re;this.__drv_tc=c.__drv_tc;this.__drv_emap=c.__drv_emap;return this},setType:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(a,"i[1,10]","type");if(a==2||a==6){throw jsl.ParamError("BadValue")}/*!*/this.__type=+a;return this},setName:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(a,"s+","name");if(!this.__re_name.test(a)){throw jsl.ParamError("BadCharacter:name")}/*!*/jsl.Node.prototype.setName.call(this,a);return this},setValue:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/this.__value=a+"";return this},setAttribute:function(b,a){/*!*/if(arguments.length!==2){throw jsl.ParamError()}jsl.validate(b,"s+","id");if(!this.__re_name.test(b)){throw jsl.ParamError("BadCharacter:id")}/*!*/return jsl.Node.prototype.setAttribute.call(this,b,a)},attach:function(c,a){var b;/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}if(c==null){throw jsl.ParamError("NullValue:	parent")}if(!jsl.Data.XNode.isClassOf(c)){throw jsl.ParamError("BadType:		parent:jsl.Data.XNode")}if(this.__type==null){throw jsl.ParamError("OperationDenied:node(type=null)")}b=c.__type;if(b!==1&&b!==9){throw jsl.ParamError("OperationDenied:parent(type)")}if(this.__type===9){throw jsl.ParamError("OperationDenied:document")}/*!*/return jsl.Node.prototype.attach.apply(this,arguments)}});jsl.Data.XNode.setQType("tag",1);jsl.Data.XNode.setQType("text",3);jsl.Data.XNode.setQType("cdata",4);jsl.Data.XNode.setQType("pi",7);jsl.Data.XNode.setQType("comment",8);jsl.Data.XNode.setQType("dtd",10);jsl.Data.XNode.setQType("entity",5);jsl.Data.XNode.setQType("default","tag");jsl.Data.XNode.prototype.__drv_re2=/^<([^"\'>]+|"[^"]*"|\'[^\']*\')+>|<[^>]+>$/g;jsl.Data.XNode.prototype.__drv_re3=/^<([^\\n\\r\\s>\\/]+)/;jsl.Data.XNode.prototype.__drv_re4=/^<\\?([^\\s\\n\\r?]+)(?:[\\s\\n\\r]([\\s\\S]*?))?\\?>/;jsl.Data.XNode.prototype.__drv_re5=/^<!DOCTYPE[\\s\\r\\n]([^\\s\\r\\n]+)[\\s\\r\\n]+(<!--[\\s\\S]*?-->|<\\?[\\s\\S]*?\\?>|[^"\'\\[>]+|"[^"]*"|\'[^\']*\'|\\[[^\\]]*])+>/;jsl.Data.XNode.prototype.__drv_re6=/^<([^"\'>]+|"[^"]*"|\'[^\']*\')+>/;jsl.Data.XNode.prototype.__drv_re7=/[^\\s\\n\\r="\']+(?=[\\s\\n\\r]*=)|"[^"]*"|\'[^\']*\'/g;jsl.Data.XNode.prototype.__drv_re8=/&#(x?\\d+);|(&lt;)|(&gt;)|(&amp;)|(&apos;)|(&quot;)|&([^;\'"<>]+);|^.|.$/g;jsl.Data.XNode.prototype.__drv_f=function(d,c,b,a,i,h,g,f){if(c){return String.fromCharCode("0"+c)}else{if(b){return"<"}else{if(a){return">"}else{if(i){return"&"}else{if(h){return"\'"}else{if(g){return\'"\'}else{if(f&&!arguments.callee.emap){return d}else{if(f&&arguments.callee.a){return("."+jsl.Data.XNode.__drv_en_resolve(f,arguments.callee.emap)+".").replace(jsl.Data.XNode.prototype.__drv_re8,arguments.callee)}else{if(f){return jsl.Data.XNode.__drv_en_resolve(f,arguments.callee.emap)}else{return arguments.callee.l?"":d}}}}}}}}}};jsl.Data.XNode.__drv_en_store={};jsl.Data.XNode.__drv_en_resolve=function(g,d){var b,a,c;b=jsl.Data.XNode.__drv_en_store;if(!b[g]){c=arguments.callee;a=d[g];/*!*/if(a==null){throw jsl.ParamError("xml.EntityError",[g])}/*!*/b[g]=a.replace(/&(?!lt|gt|amp|apos|quot|#x?\\d+)([^;"\'<>]+);/g,function(f,h){return c(h,d)})}return b[g]};jsl.Data.XNode.prototype.__drv_getAttributes=jsl.Data.XNode.prototype.__drv_getNss=function(){try{var c,j,g,n,m,h,b;c={};j={};if(this.__type===1){g=this.__drv_txt;if(g){g=g.match(this.__drv_re6)[0];n=g.match(this.__drv_re7);if(n){m=this.__drv_re8;h=this.__drv_f;h.emap=this.__drv_emap;h.l=h.a=true;for(var k=0,d=n.length;k<d;k+=2){b=n[k].slice(0,6);if(b==="xmlns"){j[""]=n[k+1].replace(m,h)}else{if(b==="xmlns:"){j[n[k].slice(6)]=n[k+1].replace(m,h)}else{c[n[k]]=n[k+1].replace(m,h)}}}}}}this.__atts=c;this.__nss=j;return}catch(i){jsl.throwError(jsl.ParamError("SyntaxError:xml",i),this,arguments)}};jsl.Data.XNode.prototype.__drv_getChildren=function(){try{var a,d,b,c;if(this.__drv_txt&&(this.__type===1||this.__type===9)){a=this.__drv_txt.replace(this.__drv_re2,"");if(a){if(jsl.__sid==="Android-browser"){this.__drv_re.lastIndex=0;d=[];b=0;while((c=this.__drv_re.exec(a))){d[b++]=c[0]}}else{d=a.match(this.__drv_re)}}}return this.__childs=d||[]}catch(f){jsl.throwError(jsl.ParamError("SyntaxError:xml",f),this,arguments)}};jsl.Data.XNode.prototype.__drv_getChild=function(g){try{var k,y,d,n,s,t,j,x,u,r,h,b,w,o;k=this.__childs[g];d=k.slice(0,3).split("");if(d[0]!=="<"){if(!this.__drv_emap||d[0]!=="&"){y="#text";s=this.__drv_f;s.emap=this.__drv_emap;s.l=s.a=false;n=k.replace(this.__drv_re8,s);d=3}else{y=k.slice(1,-1);n=this.__drv_emap[y];d=5;/*!*/if(n==null){throw jsl.ParamError("EntityError",[y])}/*!*/j=jsl.Data.fromXml(this.__drv_emap["@dtd"]+"<doc>"+n+"</doc>",this.__drv_emap["@os"])}}else{if(d[1]!=="!"&&d[1]!=="?"){y=k.match(this.__drv_re3)[1].split("@")[0];n=null;d=1;t=true}else{if(d[2]==="-"){y="#comment";n=k.slice(4,-3);d=8}else{if(d[1]==="?"){x=k.match(this.__drv_re4);y=x[1];n=x[2]||"";d=7}else{if(d[2]==="["){y="#cdata-section";n=k.slice(9,-3);d=4}else{if(d[2]==="D"){x=k.match(this.__drv_re5);y=x[1];n=x[2];d=10}}}}}}u=new jsl.Data.XNode;r=y.indexOf(":");u.__name=y+"";u.__lname=r>=0?y.slice(r+1):u.__name;u.__pfx=r>=0?y.slice(0,r):null;u.__type=d;u.__value=n;u.__cix=g;u.__drv_txt=k;u.__drv_tc=this.__drv_tc;u.__drv_re=this.__drv_re;u.__drv_emap=this.__drv_emap;u.__parent=this;this.__childs[g]=u;if(d===5){u.__childs=j.__drv_getChildren()}if(t&&this.__drv_tc){h=u.__drv_getChildren();b=[];k=[];w=this.__drv_emap;for(var v=0,q=0,m=0,p=h.length;v<p;v++){o=h[v].charAt(0);if(o==="<"){b[m++]=h[v]}else{if(o==="&"&&w){b[m++]=h[v]}else{k[q++]=h[v]}}}u.__childs=b;s=this.__drv_f;s.emap=this.__drv_emap;s.l=s.a=false;u.__value=k.join("").replace(this.__drv_re8,s)}return u}catch(t){jsl.throwError(jsl.ParamError("SyntaxError:xml",t),this,arguments)}};jsl.Class("jsl.Data.Blob",{st_HEX:"\\u0100",st___m1:[],st___m2:[],__bs:null,__ix:0,initializer:function(){var d,c,f;d=this.__m1;c=this.__m2;for(var b=0;b<256;b++){f=b.toString(16);f=f.length===1?"0"+f:f;d[f]=b;c[b]=f}},st_toArray:function(n){var j,g,m,k,d,i,f,c,h;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(n,"t(s,al,Blob)","bytes");/*!*/if(jsl.isArray(n)){j=n}else{if(jsl.isArrayLike(n)){j=Array.prototype.slice.call(n)}else{if(this.isClassOf(n)){j=n.__bs.slice(),g=true}else{j=[];d=n.charAt(0)===this.HEX;if(d){/*!*/if((c=n.search(/[\\s\\S][^a-fA-F\\d]/))>=0){throw jsl.ParamError("blob.BadByte:bytes["+c+"]")}if(!(n.length%2)){throw jsl.ParamError("blob.BadHexString:bytes")}/*!*/m=this.__m1;k=n.slice(1).toLowerCase().split("");for(i=0,h=0,f=k.length;i<f;i+=2){j[h++]=m[k[i]+k[i+1]]}}else{m=jsl.Data.__m1;k=n.split("");for(i=0,f=k.length;i<f;i++){j[i]=m[k[i]]}}}}}/*!*/if(!g){for(i=0,f=j.length;i<f;i++){if(!(j[i]>=0&&j[i]<256)){throw jsl.ParamError("blob.BadByte:bytes["+i+"]")}}}/*!*/return j},st_toString:function(q,g){var k,p,d,n,j,f,o,m,h,i,c;/*!*/if(arguments.length>2){throw jsl.ParamError()}if(arguments.length){jsl.validate(q,"t(s,al,Blob)","bytes")}if(arguments.length===2){jsl.validate(g,"ns(16)","encode")}/*!*/if(!arguments.length){k=this.getName()}else{if((p=jsl.isString(q))&&q.charAt(0)===this.HEX){/*!*/if((d=q.search(/[\\s\\S][^a-fA-F\\d]/))>=0){throw jsl.ParamError("blob.BadByte:bytes["+(d-1)+"]")}if(!(q.length%2)){throw jsl.ParamError("blob.BadHexString:bytes")}/*!*/n=q.slice(1);if(g){k=n+""}else{k=[];o=this.__m1;m=jsl.Data.__m2;n=n.toLowerCase().replace(/[a-f\\d]{2}/g,"$&*").split("*");n.pop();for(j=0,f=n.length;j<f;j++){k[j]=m[o[n[j]]]}k=k.join("")}}else{if(p){/*!*/if((d=q.search(/[^\\u0000-\\u00FE]/))>-1){throw jsl.ParamError("blob.BadByte:bytes["+d+"]")}/*!*/if(!g){k=q+""}else{k=[];n=q.split("");o=jsl.Data.__m1;m=this.__m2;for(j=0,f=n.length;j<f;j++){k[j]=m[o[n[j]]]}k=k.join("")}}else{k=[];i=0;h=jsl.Data.Blob.isClassOf(q);n=h?q.__bs:q;/*!*/if(!h){for(j=0,f=n.length;j<f;j++){if(!(n[j]>=0&&n[j]<256)){throw jsl.ParamError("blob.BadByte:bytes["+j+"]")}}}/*!*/if(g){c="0123456789abcdef".split("");i=0;for(j=0,f=n.length;j<f;j++){k[i++]=c[n[j]>>4];k[i++]=c[n[j]&15]}}else{k=[];m=jsl.Data.__m2;for(j=0,f=n.length;j<f;j++){k[j]=m[n[j]]}}k=k.join("")}}}return k},Blob:function(a){var b;/*!*/if(arguments.length>1){throw jsl.ParamError()}/*!*/if(arguments.length){/*!*/jsl.validate(a,"t[al,s,Blob]","bytes");/*!*/b=jsl.Data.Blob.toArray(a)}this.__bs=b||[]},getSize:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return this.__bs.length},setSize:function(d){var c;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(d,"i","n");/*!*/c=this.__bs;if(d>c.length){for(var b=c.length;b<d;b++){c[b]=0}}else{c.length=d<0?this.__bs.length+d:d}return this},toArray:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return jsl.Data.Blob.toArray(this)},toString:function(a){if(arguments[0]==16){return jsl.Data.Blob.toString(this,16)}else{return jsl.Data.Blob.toString(this)}},valueOf:function(){return jsl.Data.Blob.toString(this)},encode:function(a){var b;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(a,"s+","encoding");/*!*/try{b=jsl.Data.encode(this,a)}catch(c){throw (c instanceof jsl.ParamError?jsl.Error(c).clearStackTrace():c)}return b},decode:function(a){var b;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(a,"s+","decoding");/*!*/try{b=jsl.Data.decode(this,a)}catch(c){throw (c instanceof jsl.ParamError?jsl.Error(c).clearStackTrace():c)}return b},seek:function(b){var a;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(b,"i","ix");/*!*/a=b>=0?+b:this.__bs.length*8+b;/*!*/if(a<0){throw jsl.ParamError("blob.BadSeek:ix")}/*!*/this.__ix=a;return this},rseek:function(b){var a;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(b,"i","ix");/*!*/a=this.__ix+b;/*!*/if(a<0){throw jsl.ParamError("blob.BadSeek:ix")}/*!*/this.__ix=a;return this},getIndex:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return this.__ix},getIterator:function(c){var a,b;/*!*/if(arguments.length>1){throw jsl.ParamError()}if(arguments.length===1){jsl.validate(c,"i+","n")}/*!*/a={__ix:this.__ix,__ix2:c!=null?this.__ix+c:null,__name:"jsl.Data.BlobIterator"};b=this;a.hasNext=function(d){try{/*!*/if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(d,"i++",d)}/*!*/return this.__ix+(d?d-1:0)<(this.__ix2||b.__bs.length*8)}catch(f){jsl.throwError(f,this,arguments)}};a.next=function(f){try{var i,h;/*!*/if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(f,"i++","bits")}if(this.__ix>=(this.__ix2||b.__bs.length*8)){throw jsl.EndOfIterationError()}/*!*/i=f||8;h=b.read(i,this.__ix);this.__ix+=i;return h}catch(g){jsl.throwError(g,this,arguments)}};return a},read:function(k,d){var f,g,l,b,j,c,h;/*!*/if(arguments.length>2){throw jsl.ParamError()}if(arguments.length){jsl.validate(k,"i++","bits")}if(arguments.length===2){jsl.validate(d,"i","ix")}/*!*/f=d==null?this.__ix:d;f=f<0?this.__bs.length*8+f:f;g=k||8;/*!*/if(f<0){throw jsl.ParamError("BadValue:ix")}if(f+g>this.__bs.length*8){throw jsl.ParamError("blob.EOB:bits")}/*!*/l=this.__bs;b=f%8;f=~~(f/8);if(g<=32){j=(l[f]<<24|l[++f]<<16|l[++f]<<8|l[++f])<<b;j=j>>>(32-g)}else{c=g;h=0;j=[];while(c>0){j[h++]=(l[f]<<8|l[++f])<<b>>>(c>=8?8:16-c);c=c-8}}if(arguments.length<2){this.__ix+=g}return j},write:function(g,q,d){var h,j,r,b,k,c,s,p,n,f;if(!arguments.length||arguments.length>3){throw jsl.ParamError()}jsl.validate(g,"t[i,al,s,Blob]","data");if(jsl.isNumber(g)){if(arguments.length>1){jsl.validate(q,"i[1,32]","bits")}if(arguments.length>2){jsl.validate(d,"i","ix")}}else{if(arguments.length>1){jsl.validate(q,"i","ix")}if(arguments.length>2){throw jsl.ParamError()}}h=jsl.isNumber(g);if(h){j=d!=null?d:this.__ix}else{j=q!=null?q:this.__ix}j=j<0?this.__bs.length*8+j:j;if(j<0){throw jsl.ParamError("BadValue:ix")}b=j%8;j=~~(j/8);r=this.__bs;if(j>=r.length){for(n=r.length;n<=j;n++){r[n]=0}}if(h){k=q||8;c=g<<32-k;f=k>=8-b?8-b:k;s=~((1<<f)-1<<8-b-f)&255;p=c>>>32-8+b;do{r[j]=r[j++]&s|p&~s;k=k-f;c=c<<f;f=k>8?8:k;s=(1<<8-f)-1;p=c>>>24}while(k>0);if(d==null){this.__ix+=q||8}}else{try{c=jsl.Data.Blob.toArray(g)}catch(m){/*!*/throw jsl.ParamError(jsl.Error(m).getMessage())/*!*/}s=(1<<8-b)-1;p=255-s;for(n=0,f=c.length;n<f;n++){r[j]=r[j++]&p|c[n]>>>b;if(b){r[j]=r[j]&s|c[n]<<8-b&255}}if(q==null){this.__ix+=c.length*8}}return this},insert:function(h,r,b){var s,j,g,k,f,m,t,q,c,p,a;/*!*/if(!arguments.length||arguments.length>3){throw jsl.ParamError()}jsl.validate(h,"t[i,al,s,Blob]","data");if(jsl.isNumber(h)){if(arguments.length>1){jsl.validate(r,"i[1,32]","bits")}if(arguments.length>2){jsl.validate(b,"i","ix")}}else{if(arguments.length>1){jsl.validate(r,"i","ix")}if(arguments.length>2){throw jsl.ParamError()}}/*!*/s=this.__bs;m=s.length*8;j=jsl.isNumber(h);if(j){g=b!=null?b:this.__ix,c=r||8}else{g=r!=null?r:this.__ix,c=h.length*8}g=g<0?this.__bs.length*8+g:g;/*!*/if(g<0){throw jsl.ParamError("BadValue:ix")}/*!*/if(g+c<=m){f=m-1,k=f-c}else{if(g<m){a=s[s.length-1]}}while(k>=g){t=k%8;q=f%8;c=(t<q?t:q)+1;c=k-c+1<g?k-g+1:c;p=(s[~~(k/8)]>>>7-t&((1<<c)-1))<<7-q;s[~~(f/8)]=s[~~(f/8)]&~(((1<<c)-1)<<7-q)|p;k-=c;f-=c}try{this.write.apply(this,arguments)}catch(o){if(o instanceof jsl.ParamError){throw o.clearStackTrace()}else{throw o}}if(a!=null){s[s.length-1]|=a>>(g+c)%8}return this},remove:function(q,c){var r,g,h,f,o,j,s,p,k,b;if(arguments.length>2){throw jsl.ParamError()}if(arguments.length){jsl.validate(q,"i+","bits")}if(arguments.length>1){jsl.validate(c,"i","ix")}r=this.__bs;g=q||8;h=c!=null?+c:this.__ix;h=h<0?this.__bs.length*8+h:h;if(h<0){throw jsl.ParamError("BadValue:ix")}f=h+g;o=(r.length<~~(f/8)?r.length:~~(f/8))-1-~~(h/8);j=r.length*8;if(o>0){r.splice(~~(h/8)+1,o),f-=o*8,j-=o*8}if(h+g<j){while(f<j){s=7-h%8;p=7-f%8;g=(s<p?s:p)+1;k=(r[~~(f/8)]<<f%8&255)>>>h%8;r[~~(h/8)]=r[~~(h/8)]&~((1<<g)-1<<8-g>>h%8)|k;h+=g;f+=g}b=(q||8)-(o>0?o:0);if(b<=8){r[r.length-1]&=~((1<<b)-1)}else{r[r.length-1]&=0,r[r.length-2]&=~((1<<b-8)-1)}}else{if(h<j){b=7-h%8;h=~~(h/8);r[h]=r[h]>>>b<<b}}for(var m=0;m<o;m++){r.push(0)}return this},clear:function(){if(arguments.length){throw jsl.ParamError()}return this.setSize(0)},append:function(b,a){if(!arguments.length){throw jsl.ParamError()}if(arguments.length>(jsl.isNumber(b)?2:1)){throw jsl.ParamError()}this.__ix=this.__bs.length*8;try{this.write.apply(this,arguments)}catch(c){if(c instanceof jsl.ParamError){throw c.clearStackTrace()}else{throw c}}return this}});jsl.Interface("jsl.Data.Serializable",{getSerialId:function(){}});if(jsl.__go.JSON&&jsl.__go.JSON.parse!=null){jsl.Data.__ni_jsn_decode=function(a){try{return JSON.parse(a+"")}catch(b){jsl.throwError(b,this,arguments)}}}if(jsl.__go.JSON&&jsl.__go.JSON.stringify!=null){jsl.Data.__ni_jsn_encode=function(b){try{return JSON.stringify(b)}catch(a){jsl.throwError(a,this,arguments)}}}jsl.Data.__ni_xml_validate=function(a){try{var c,f,b,i,d,j,g,h;c=jsl.__sid;if(c==="V8cgi"){f=require("dom");b=new f.DOMParser;try{i=b.parseFromString(a)}catch(h){throw jsl.ParamError("ParserError:source",h)}if(i.documentElement&&i.documentElement.nodeName==="parsererror"){throw jsl.ParamError("ParserError:source",i.documentElement.childNodes[0].nodeValue)}}else{if(c==="Rhino"){d=Packages.javax.xml.parsers.DocumentBuilderFactory.newInstance();d.setNamespaceAware(true);d.setValidating(false);j=d.newDocumentBuilder();g=new Packages.org.xml.sax.InputSource();g.setCharacterStream(new java.io.StringReader(a));try{i=j.parse(g)}catch(h){throw jsl.ParamError("ParserError:source",h)}}else{if(jsl.__go.DOMParser){b=new jsl.__go.DOMParser;i=b.parseFromString(a,"text/xml");if(i.documentElement&&i.documentElement.nodeName==="parsererror"){throw jsl.ParamError("ParserError:source",i.documentElement.childNodes[0].nodeValue)}if(i.documentElement&&i.documentElement.nodeName==="html"&&i.documentElement.childNodes[0]&&i.documentElement.childNodes[0].nodeName==="body"&&i.documentElement.childNodes[0].childNodes[0]&&i.documentElement.childNodes[0].childNodes[0].nodeName==="parsererror"){throw jsl.ParamError("ParserError:source",i.documentElement.childNodes[0].childNodes[0].nodeValue)}if(i.documentElement&&i.documentElement.nodeName==="html"&&i.documentElement.childNodes[0]&&i.documentElement.childNodes[0].nodeName==="body"&&i.documentElement.childNodes[0].childNodes[0]&&i.documentElement.childNodes[0].childNodes[0].nodeName==="h1"&&i.documentElement.childNodes[0].childNodes[0].childNodes[0]&&i.documentElement.childNodes[0].childNodes[0].childNodes[0].nodeValue.match(/xml\\s+parsing\\s+error/i)){throw jsl.ParamError("ParserError:source",i.documentElement.childNodes[0].childNodes[0].childNodes[0].nodeValue)}}else{if(jsl.__go.ActiveXObject){i=new jsl.__go.ActiveXObject("Microsoft.XMLDOM");i.async=false;i.validateOnParse=false;i.resolveExternals=false;i.loadXML(a);if(i.parseError&&i.parseError.errorCode!=0){h=jsl.ParamError("ParserError:source");h.setLine(i.parseError.line);if(i.parseError.linePos){h.setChar(i.parseError.linePos)}throw h.setCause(i.parseError.reason)}}else{throw jsl.NativeError("NotSupported:xml-validation")}}}}}catch(h){jsl.throwError(h,this,arguments)}}};'