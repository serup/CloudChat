	
	/*
		Copyright (c) 2010-2013 Liquid Working Group. All Rights Reserved.
		Available on MIT license (see: http://www.jsliquid.com/license.html)
	*/
	
	jsl.__ploads.lang='try{jsl}catch(e){throw Error("liquid(error) >> [Lang] library not loaded - cause: jsl core not found")}if(!jsl||jsl.__magic!=="J345NN48H756PQ56"){throw Error("liquid(error) >> [Lang] library not loaded - cause: jsl core not found (bad magic number)")}if(!jsl.__ready){throw Error("liquid(error) >> [Lang] library not loaded - cause: previous jsl core error")}if(jsl.__libs.lang){jsl.console.warn("[Lang] library already loaded")}if(!jsl.__libs.lang){jsl.__libs.push("lang");jsl.__libs.lang="0.82";if(jsl.__libs.lang!==jsl.__version){throw jsl.ConfigError("BadVersion",["Lang library",jsl.__libs.lang,jsl.__version])}jsl.Array=function(b){try{var c,g;/*!*/if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(b,"a")}/*!*/if(arguments.length){if(b.__augmented){return b}else{g=b}}else{g=[]}c=jsl.Array.prototype;for(var f in c){if(c.hasOwnProperty(f)){g[f]=c[f]}}g.__native=arguments.callee.__native;return g}catch(d){jsl.throwError(d,this,arguments)}};jsl.Array.__name="jsl.Array";jsl.Array.prototype=jsl.Object();jsl.Array.replicate=function(h,d){try{var g;/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(h,"i+","n");/*!*/g=Array(h);if(d!==undefined){for(var c=0,b=g.length;c<b;c++){g[c]=d}}return g}catch(f){jsl.throwError(f,this,arguments)}};jsl.Array.prototype.after=function(b,f,a){try{var c;/*!*/if(!jsl.isArray(this)){throw jsl.TypeError("BadMethodCall:Array")}if(!arguments.length||arguments.length>3){throw jsl.ParamError()}if(arguments.length>=2){jsl.validate(f,"i!0","n")}if(arguments.length===3){jsl.validate(a,"i+","idx")}/*!*/c=jsl.Array.prototype.index.apply(this,arguments);return c!==-1?this.slice(c+1):[]}catch(d){jsl.throwError(d,this,arguments)}};jsl.Array.prototype.before=function(b,f,a){try{var c;/*!*/if(!jsl.isArray(this)){throw jsl.TypeError("BadMethodCall:Array")}if(!arguments.length||arguments.length>3){throw jsl.ParamError()}if(arguments.length>=2){jsl.validate(f,"i!0","n")}if(arguments.length===3){jsl.validate(a,"i+","idx")}/*!*/c=jsl.Array.prototype.index.apply(this,arguments);return c!==-1?this.slice(0,c):this.slice()}catch(d){jsl.throwError(d,this,arguments)}};jsl.Array.prototype.last=function(){try{/*!*/if(!jsl.isArray(this)){throw jsl.TypeError("BadMethodCall:Array")}if(arguments.length){throw jsl.ParamError()}/*!*/return this.length?this[this.length-1]:null}catch(a){jsl.throwError(a,this,arguments)}};jsl.Array.prototype.left=function(b){try{/*!*/if(!jsl.isArray(this)){throw jsl.TypeError("BadMethodCall:Array")}if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(b,"i","n");/*!*/return this.slice(0,b)}catch(a){jsl.throwError(a,this,arguments)}};jsl.Array.prototype.right=function(b){try{/*!*/if(!jsl.isArray(this)){throw jsl.TypeError("BadMethodCall:Array")}if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(b,"i","n");/*!*/return b!=0?this.slice(-b):[]}catch(a){jsl.throwError(a,this,arguments)}};jsl.Array.prototype.contains=function(b,a){try{/*!*/if(!jsl.isArray(this)){throw jsl.TypeError("BadMethodCall:Array")}if(!arguments.length||arguments.length>2){throw jsl.ParamError()}if(arguments.length===2){jsl.validate(a,"i+","idx")}/*!*/return jsl.Array.prototype.index.call(this,b,1,a||0)!==-1}catch(c){jsl.throwError(c,this,arguments)}};jsl.Array.prototype.index=function(m,b,k){try{var g,d,c,j,f;/*!*/if(!jsl.isArray(this)){throw jsl.TypeError("BadMethodCall:Array")}if(!arguments.length||arguments.length>3){throw jsl.ParamError()}if(arguments.length>=2&&b!="*"){jsl.validate(b,"i!0","n")}if(arguments.length===3){jsl.validate(k,"i+","idx")}/*!*/g=+b||1;d=+k||0;c=-1;if(b=="*"){c=[];for(j=d,f=this.length;j<f;j++){if(this[j]===m){c.push(j)}}c=c.length?c:null}else{if(g<0){for(j=this.length-1;j>=d&&c===-1;j--){if(this[j]===m&&!++g){c=j}}}else{for(j=d,f=this.length;j<f&&c===-1;j++){if(this[j]===m&&!--g){c=j}}}}return c}catch(h){jsl.throwError(h,this,arguments)}};jsl.Array.prototype.isUnique=function(){try{/*!*/if(!jsl.isArray(this)){throw jsl.TypeError("BadMethodCall:Array")}if(arguments.length){throw jsl.ParamError()}/*!*/loop:for(var f=0,d=this.length;f<d;f++){for(var c=f+1;c<d;c++){if(this[f]===this[c]){break loop}}}return f===d}catch(g){jsl.throwError(g,this,arguments)}};jsl.Array.prototype.intersects=function(f){try{var g;/*!*/if(!jsl.isArray(this)){throw jsl.TypeError("BadMethodCall:Array")}if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(f,"al","a");/*!*/for(var c=0,d=f.length;c<d&&!g;c++){g=jsl.Array.prototype.index.call(this,f[c])!==-1}return !!g}catch(h){jsl.throwError(h,this,arguments)}};jsl.Array.prototype.count=function(f,b){try{var h;/*!*/if(!jsl.isArray(this)){throw jsl.TypeError("BadMethodCall:Array")}if(!arguments.length||arguments.length>2){throw jsl.ParamError()}if(arguments.length===2){jsl.validate(b,"i+","idx")}/*!*/h=0;for(var d=+b||0,c=this.length;d<c;d++){if(this[d]===f){h++}}return h}catch(g){jsl.throwError(g,this,arguments)}};jsl.Array.prototype.sum=function(b){try{var g;/*!*/if(!jsl.isArray(this)){throw jsl.TypeError("BadMethodCall:Array")}if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(b,"i+","idx")}/*!*/g=0;for(var d=+b||0,c=this.length;d<c;d++){g+=+this[d]}return g}catch(f){jsl.throwError(f,this,arguments)}};jsl.Array.prototype.unique=function(g){try{var c,b,d,f;/*!*/if(!jsl.isArray(this)){throw jsl.TypeError("BadMethodCall:Array")}if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(g,"b","right")}/*!*/d=[];f=jsl.Array.prototype.index;if(g){for(c=this.length-1;c>=0;c--){if(f.call(d,this[c])===-1){d.unshift(this[c])}}}else{for(c=0,b=this.length;c<b;c++){if(f.call(d,this[c])===-1){d.push(this[c])}}}return d}catch(h){jsl.throwError(h,this,arguments)}};jsl.Array.prototype.intersecate=function(h){try{var i;/*!*/if(!jsl.isArray(this)){throw jsl.TypeError("BadMethodCall:Array")}if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(h,"al","a");/*!*/i=[];for(var f=0,g=this.length;f<g;f++){for(var k=0,d=h.length;k<d;k++){if(h[k]===this[f]){i.push(this[f]);break}}}return i}catch(j){jsl.throwError(j,this,arguments)}};jsl.Array.prototype.union=function(f){try{var g,h,c,d;/*!*/if(!jsl.isArray(this)){throw jsl.TypeError("BadMethodCall:Array")}if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(f,"al","a");/*!*/g=this.slice();h=jsl.Array.prototype.index;for(c=0,d=f.length;c<d;c++){if(h.call(g,f[c])===-1){g.push(f[c])}}return g}catch(j){jsl.throwError(j,this,arguments)}};jsl.Array.prototype.less=function(f){try{var g,h,d,c;/*!*/if(!jsl.isArray(this)){throw jsl.TypeError("BadMethodCall:Array")}if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(f,"al","a");/*!*/g=this.slice();h=jsl.Array.prototype.index;for(c=f.length-1;c>=0;c--){d=h.call(g,f[c]);if(d!==-1){g.splice(d,1)}}return g}catch(j){jsl.throwError(j,this,arguments)}};jsl.Array.prototype.inject=function(f,b){try{var g,h;/*!*/if(!jsl.isArray(this)){throw jsl.TypeError("BadMethodCall:Array")}if(!arguments.length||arguments.length>2){throw jsl.ParamError()}if(arguments.length===2){jsl.validate(b,"i+","idx")}/*!*/h=arguments.length===2?+b:this.length;if(f instanceof Array){for(var d=0,c=f.length;d<c;d+=20000){g=[h+d*20000,0].concat(f.slice(d,d+20000));this.splice.apply(this,g)}}else{this.splice(h,0,f)}return this}catch(j){jsl.throwError(j,this,arguments)}};jsl.Array.prototype.include=function(g,b){try{var h,f;/*!*/if(!jsl.isArray(this)){throw jsl.TypeError("BadMethodCall:Array")}if(!arguments.length||arguments.length>2){throw jsl.ParamError()}if(arguments.length===2){jsl.validate(b,"i+","idx")}/*!*/h=arguments.length===2?+b:this.length;f=jsl.Array.prototype.index;if(g instanceof Array){for(var d=0,c=g.length;d<c;d++){if(f.call(this,g[d])===-1){this.splice(h++,0,g[d])}}}else{if(f.call(this,g)===-1){this.splice(h,0,g)}}return this}catch(j){jsl.throwError(j,this,arguments)}};jsl.Array.prototype.modify=function(l,h,b,k){try{var d,c,f;/*!*/if(!jsl.isArray(this)){throw jsl.TypeError("BadMethodCall:Array")}if(arguments.length<2||arguments.length>4){throw jsl.ParamError()}if(arguments.length>=3&&b!="*"){jsl.validate(b,"i!0","n")}if(arguments.length===4){jsl.validate(k,"i+","idx")}/*!*/d=arguments.length===4?+k:0;c=jsl.Array.prototype.index;if(b=="*"){for(var j=this.length-1;j>=d;j--){if(this[j]===l){this.splice(j,1,h)}}}else{f=arguments.length>=3?+b:1;f=c.call(this,l,f,d);if(f!==-1){this.splice(f,1,h)}}return this}catch(g){jsl.throwError(g,this,arguments)}};jsl.Array.prototype.remove=function(f,k,b){try{var d,h,g;/*!*/if(!jsl.isArray(this)){throw jsl.TypeError("BadMethodCall:Array")}if(!arguments.length||arguments.length>3){throw jsl.ParamError()}if(arguments.length>=2&&k!="*"){jsl.validate(k,"i!0","n")}if(arguments.length===3){jsl.validate(b,"i+","idx")}/*!*/d=+b||0;h=jsl.Array.prototype.index;if(k=="*"){for(var c=this.length-1;c>=d;c--){if(this[c]===f){this.splice(c,1)}}}else{g=+k||1;g=h.call(this,f,g,d);if(g!==-1){this.splice(g,1)}}return this}catch(j){jsl.throwError(j,this,arguments)}};jsl.Array.prototype.removeAt=function(a,c){try{/*!*/if(!jsl.isArray(this)){throw jsl.TypeError("BadMethodCall:Array")}if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(a,"i+","idx");if(arguments.length===2){jsl.validate(c,"i+","n")}/*!*/this.splice(a,arguments.length===2?+c:1);return this}catch(b){jsl.throwError(b,this,arguments)}};jsl.Array.prototype.getIterator=function(b){try{var a;/*!*/if(!jsl.isArray(this)){throw jsl.TypeError("BadMethodCall:Array")}if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(b,"f","filter")}/*!*/a={__name:"jsl.ArrayIterator",__ix:0,__data:this};a.hasNext=function(){try{/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/var g,i,f;g=this.__ix,i=this.__data,f=i.length;while(g<f){if(b?b.call(i,g+"",i[g]):true){break}g++}return(this.__ix=g)<f}catch(h){jsl.throwError(h,this,arguments)}};a.next=function(){try{/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/var d=this.hasNext();/*!*/if(!d){throw jsl.EndOfIterationError()}/*!*/return this.__data[this.__ix++]}catch(f){jsl.throwError(f,this,arguments)}};return a}catch(c){jsl.throwError(c,this,arguments)}};(function(){var a;jsl.Array.__native=jsl.Object.__native.copy().merge(jsl.Array.prototype);a=jsl.Array.prototype;for(var b in a){if(a.hasOwnProperty(b)){if(b.charAt(0)!=="_"&&jsl.isFunction(a[b])&&!a[b].__name){jsl.Array[b]=function(d){try{/*!*/if(!arguments.length){throw jsl.ParamError()}if(d===null){throw jsl.ParamError("NullValue:obj")}/*!*/return arguments.callee.__f.apply(d,Array.prototype.slice.call(arguments,1))}catch(c){jsl.throwError(c,this,arguments)}};jsl.Array[b].__name=b;jsl.Array[b].__f=a[b];a[b].__name=b}}}})();jsl.Boolean=function(a){try{var c,g;/*!*/if(arguments.length>1){throw jsl.ParamError()}if(arguments.length&&a==null){throw jsl.ParamError("NullValue:b")}/*!*/if(arguments.length){if(a instanceof Boolean){if(a.__augmented){return a}else{g=a}}else{g=new Boolean(a)}}else{g=new Boolean}c=jsl.Boolean.prototype;for(var f in c){if(c.hasOwnProperty(f)){g[f]=c[f]}}g.__native=arguments.callee.__native;return g}catch(d){jsl.throwError(d,this,arguments)}};jsl.Boolean.__name="jsl.Boolean";jsl.Boolean.prototype=jsl.Object();jsl.Boolean.prototype.isTrue=function(){try{/*!*/if(!jsl.isBoolean(this)){throw jsl.TypeError("BadMethodCall:Boolean")}if(arguments.length){throw jsl.ParamError()}/*!*/return !!this.valueOf()}catch(a){jsl.throwError(a,this,arguments)}};jsl.Boolean.prototype.isFalse=function(){try{/*!*/if(!jsl.isBoolean(this)){throw jsl.TypeError("BadMethodCall:Boolean")}if(arguments.length){throw jsl.ParamError()}/*!*/return !+this.valueOf()}catch(a){jsl.throwError(a,this,arguments)}};(function(){var a;jsl.Boolean.__native=jsl.Object.__native.copy().merge(jsl.Boolean.prototype);a=jsl.Boolean.prototype;for(var b in a){if(a.hasOwnProperty(b)){if(b.charAt(0)!=="_"&&jsl.isFunction(a[b])&&!a[b].__name){jsl.Boolean[b]=function(d){try{/*!*/if(!arguments.length){throw jsl.ParamError()}jsl.validate(d,"b","obj");/*!*/return arguments.callee.__f.apply(d,Array.prototype.slice.call(arguments,1))}catch(c){jsl.throwError(c,this,arguments)}};jsl.Boolean[b].__name=b;jsl.Boolean[b].__f=a[b];a[b].__name=b}}}})();jsl.Date=function(a){try{var b,f;/*!*/if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(a,"d","date")}/*!*/if(arguments.length){if(a.__augmented){return a}else{f=a}}else{f=new Date}b=jsl.Date.prototype;for(var d in b){if(b.hasOwnProperty(d)){f[d]=b[d]}}f.__native=arguments.callee.__native;return f}catch(c){jsl.throwError(c,this,arguments)}};jsl.Date.prototype=jsl.Object();jsl.Date.__name="jsl.Date";jsl.Date.__f="date";jsl.Date.__fs={date:null,date_l:null,time:null,time_l:null,month_day:null,month_year:null,iso8601:"yyyy-mm-dd",iso8601_l:"yyyy-mm-dd hh:mmn:ssz",iso8601_time:"HH:mmn",iso8601_time_l:"HH:mmn:ss",iso8601_yd:"yyyy-ddy",iso8601_ym:"yyyy-mm",iso8601_yw:"yyyy-Wwwy",iso8601_ywd:"yyyy-Wwwy-dw"};jsl.Date.MILLISECOND=1;jsl.Date.SECOND=jsl.Date.MILLISECOND*1000;jsl.Date.MINUTE=jsl.Date.SECOND*60;jsl.Date.HOUR=jsl.Date.MINUTE*60;jsl.Date.DAY=jsl.Date.HOUR*24;jsl.Date.WEEK=jsl.Date.DAY*7;jsl.Date.YEAR=jsl.Date.DAY*365;jsl.Date.MONTH=jsl.Date.DAY*30;jsl.defineError("jsl.DateError");jsl.Date.fromLString=function(I,N){try{var M,x,A,B,G,u,C,j,T,w;var F,L,O,a,U,g,c,P,q,r,t,o,p,J,i,R,v,E,K,Q,b,k;/*!*/if(!arguments.length||arguments.length>3){throw jsl.ParamError()}jsl.validate(I,"s+","s");if(arguments.length===2){jsl.validate(N,"t[f,s+]","fid")}if(arguments.length>2){jsl.validate(N,"s+","locale")}if(arguments.length>2){jsl.validate(arguments[2],"s+","fid")}/*!*/jsl.require("locale");M=jsl.Locale.get();if(!N){x=jsl.Object.clone(this.__fs);jsl.Object.walk(x,function(f,d){if(!d){this[f]=M.d_formats[f]}})}else{if(jsl.isFunction(N)){try{A=N(I+"")}catch(S){throw jsl.ScriptError("BadScript:fid",S)}/*!*/if(!jsl.isDate(A)){throw jsl.ParamError("BadReturnType:fid:Date")}/*!*/x={}}else{if(this.__fs.hasOwnProperty(N)){B=this.__fs[N];if(!B){B=M.d_formats[N]}x={fm:B}}else{if(arguments.length===3||jsl.Locale.isDefined(N)){/*!*/if(!jsl.Locale.isDefined(N)){throw jsl.ParamError("NotDefined:locale(fid)")}/*!*/M=jsl.Locale.get(N);if(!arguments[2]){x=jsl.Object.clone(this.__fs);jsl.Object.walk(x,function(f,d){if(!d){this[f]=M.d_formats[f]}})}else{if(M.d_formats[arguments[2]]){x={fm:M.d_formats[arguments[2]]}}else{x={fm:arguments[2]}}}}else{x={fm:N}}}}}G="(\\\\\\\\)*(DAY|Day|dyy|day|DY|Dy|dy|MONTH|Month|month|MT|Mt|mt|MR|mr|hh|h|HH|H|mmn|mn|sf|ss|s|mms|ms|dw|ddw|ddy|dd|d|wm|wwm|wy|wwy|mm|m|yyyy|yy|y|za|zs|z:|z|$)";G=RegExp(G,"g");u=RegExp((G+"").slice(1,-2));R=function(h,f,d){return f&&f.length%2?f.slice(0,-1)+d:h};for(var D in x){if(x.hasOwnProperty(D)){B=x[D];if(jsl.isFunction(B)){try{A=B(I+"")}catch(S){continue}/*!*/if(!jsl.isDate(A)){throw jsl.ParamError("BadReturnType:locale["+M.id+"\\\\:"+D+"]:Date")}/*!*/break}G.lastIndex=0;C=0;j=I+"";g=U=c=v=a=O=L=F=p=P=q=r=t=o=E=k=null;parsing:while((w=G.exec(B))){if(w[1]){if(w[1].length%2){w.index+=w[0].length,w[2]=null}else{w.index+=w[1].length}}if(w.index>C){T=j.match("^"+B.slice(C,w.index).replace(u,R).replace(/[\\^\\$\\.\\*\\+\\?\\=\\!\\:\\|\\\\\\/\\(\\)\\[\\]\\{\\}]/g,"\\\\$&"));if(!T){break}j=j.slice(T[0].length);if(!w[2]){C=G.lastIndex;continue}}T=null;switch(w[2]){case"DAY":case"day":case"Day":T=M.d_days.join("|").toLowerCase();i=j.match(RegExp("^"+T,"i"));if(!i){break parsing}J=jsl.Array.index(T.split("|"),i[0].toLowerCase());if(g!=null&&g!==J){throw jsl.DateError("date.InconsistentDate:s(dw)")}g=J;T=i;break;case"DY":case"dy":case"Dy":T=M.d_days_short.join("|").toLowerCase();i=j.match(RegExp("^"+T,"i"));if(!i){break parsing}J=jsl.Array.index(T.split("|"),i[0].toLowerCase());if(g!=null&&g!==J){throw jsl.DateError("date.InconsistentDate:s(dw)")}g=J;T=i;break;case"dw":T=j.match(/^[1234567]/);case"ddw":if(!T){T=j.match(/^0[1234567]/)}if(!T){break parsing}J=+T[0]-1;J=(J+M.d_first_wday)%7;if(g!=null&&g!==J){throw jsl.DateError("date.InconsistentDate:s(dw)")}g=J;break;case"d":T=j.match(/^\\d{1,2}/);case"dd":if(!T){T=j.match(/^\\d{2}/)}if(!T){break parsing}J=+T[0];try{jsl.validate(J,"i[1,31]")}catch(S){break parsing}if(U!=null&&U!==J){throw jsl.DateError("date.InconsistentDate:s(d)")}U=J;break;case"dyy":T=j.match(/^\\d{1,3}/);case"ddy":if(!T){T=j.match(/^\\d{3}/)}if(!T){break parsing}J=+T[0];try{jsl.validate(J,"i[1,366]")}catch(S){break parsing}if(c!=null&&c!==J){throw jsl.DateError("date.InconsistentDate:s(dy)")}c=J;break;case"sf":T=j.match(RegExp(M.d_days_ordinals.join("|"),"i"));if(!T){break parsing}if(v!=null&&v!==T[0]){throw jsl.DateError("date.InconsistentDate:s(sf)")}v=T[0];break;case"wm":T=j.match(/^[12345]/);case"wwm":if(!T){T=j.match(/^0[12345]/)}if(!T){break parsing}J=+T[0];if(a!=null&&a!==J){throw jsl.DateError("date.InconsistentDate:s(wm)")}a=J;break;case"wy":T=j.match(/^\\d{1,2}/);case"wwy":if(!T){T=j.match(/^\\d{2}/)}if(!T){break parsing}J=+T[0];try{jsl.validate(J,"i[1,53]")}catch(S){break parsing}if(O!=null&&O!==J){throw jsl.DateError("date.InconsistentDate:s(wy)")}O=J;break;case"MONTH":case"month":case"Month":T=M.d_months.join("|").toLowerCase();i=j.match(RegExp("^"+T,"i"));if(!i){break parsing}J=jsl.Array.index(T.split("|"),i[0].toLowerCase());if(L!=null&&L!==J){throw jsl.DateError("date.InconsistentDate:s(m)")}L=J;T=i;break;case"MT":case"mt":case"Mt":T=M.d_months_short.join("|").toLowerCase();i=j.match(RegExp("^"+T,"i"));if(!i){break parsing}J=jsl.Array.index(T.split("|"),i[0].toLowerCase());if(L!=null&&L!==J){throw jsl.DateError("date.InconsistentDate:s(m)")}L=J;T=i;break;case"m":T=j.match(/^\\d{1,2}/);case"mm":if(!T){T=j.match(/^\\d{2}/)}if(!T){break parsing}J=+T[0]-1;try{jsl.validate(J,"i[0,11]")}catch(S){break parsing}if(L!=null&&L!==J){throw jsl.DateError("date.InconsistentDate:s(m)")}L=J;break;case"yyyy":T=j.match(/^\\d{4}/);case"yy":if(!T){T=j.match(/^\\d{2}/)}case"y":if(!T){T=j.match(/^\\d{1,2}/)}if(!T){break parsing}J=T[0];if(J.length===1){J=((new Date).getFullYear()+"").slice(0,-2)+"0"+J}else{if(J.length===2){J=((new Date).getFullYear()+"").slice(0,-2)+J}}J=+J;if(F!=null&&F!==J){throw jsl.DateError("date.InconsistentDate:s(y)")}F=J;break;case"MR":case"mr":T=j.match(RegExp("^"+M.d_am+"|"+M.d_pm,"i"));if(!T){break parsing}J=T[0].toLowerCase()===M.d_am.toLowerCase()?1:2;if(p!=null&&p!==J){throw jsl.DateError("date.InconsistentDate:s(mr)")}p=J;break;case"h":T=j.match(/^\\d{1,2}/);case"hh":if(!T){T=j.match(/^\\d{2}/)}if(!T){break parsing}J=+T[0];try{jsl.validate(J,"i[1,12]")}catch(S){break parsing}if(P!=null&&P!==J){throw jsl.DateError("date.InconsistentDate:s(h)")}P=J;break;case"H":T=j.match(/^\\d{1,2}/);case"HH":if(!T){T=j.match(/^\\d{2}/)}if(!T){break parsing}J=+T[0];try{jsl.validate(J,"i[0,23]")}catch(S){break parsing}if(q!=null&&q!==J){throw jsl.DateError("date.InconsistentDate:s(h)")}q=J;break;case"mn":T=j.match(/^\\d{1,2}/);case"mmn":if(!T){T=j.match(/^\\d{2}/)}if(!T){break parsing}J=+T[0];try{jsl.validate(J,"i[0,59]")}catch(S){break parsing}if(r!=null&&r!==J){throw jsl.DateError("date.InconsistentDate:s(mn)")}r=J;break;case"s":T=j.match(/^\\d{1,2}/);case"ss":if(!T){T=j.match(/^\\d{2}/)}if(!T){break parsing}J=+T[0];try{jsl.validate(J,"i[0,59]")}catch(S){break parsing}if(t!=null&&t!==J){throw jsl.DateError("date.InconsistentDate:s(sn)")}t=J;break;case"ms":T=j.match(/^\\d{1,3}/);case"mms":if(!T){T=j.match(/^\\d{3}/)}if(!T){break parsing}J=+T[0];try{jsl.validate(J,"i[0,999]")}catch(S){break parsing}if(o!=null&&o!==J){throw jsl.DateError("date.InconsistentDate:s(ms)")}o=J;break;case"z":T=j.match(/^(\\+|\\-)\\d{4}/);if(!T){break parsing}if(E!=null&&E!==T[0]){throw jsl.DateError("date.InconsistentDate:s(z)")}E=T[0];break;case"zs":T=j.match(/^(\\+|\\-)\\d{2}/);if(!T){break parsing}if(E!=null&&E!==T[0]+"00"){throw jsl.DateError("date.InconsistentDate:s(z)")}E=T[0]+"00";break;case"z:":T=j.match(/^(\\+|\\-)\\d{2}:\\d{2}/);if(!T){break parsing}if(E!=null&&E!==T[0].replace(":","")){throw jsl.DateError("date.InconsistentDate:s(z)")}E=T[0];break;case"za":T=j.match(/^\\w+/);if(!T){break parsing}if(k!=null&&k!==T[0]){throw jsl.DateError("date.InconsistentDate:s(za)")}k=T[0];break;default:break parsing}j=j.slice(T[0].length);C=G.lastIndex}if(!j){i=new Date;if(q!=null){P=q}else{if(P!=null&&p===1){P=P===12?0:P}else{if(P!=null&&p===2){P=P===12?P:P+12}else{P=null}}}if(g!=null&&O!=null){J=(new Date(F||i.getFullYear(),0,1)).getDay()-M.d_first_wday;O=J<=3?O-1:O;b=new Date(F||i.getFullYear(),0,((O-1)*jsl.Date.WEEK)/jsl.Date.DAY+g+7-J);K=b.getDate();Q=b.getMonth();if(U!=null&&U!==K){throw jsl.DateError("date.InconsistentDate:s(d)")}if(L!=null&&L!==Q){throw jsl.DateError("date.InconsistentDate:s(m)")}U=K;L=Q}if(c!=null){T=new Date(F||i.getFullYear(),0,c);if(U!=null&&U!==T.getDate()){throw jsl.DateError("date.InconsistentDate:s(d)")}if(L!=null&&L!==T.getMonth()){throw jsl.DateError("date.InconsistentDate:s(d)")}U=T.getDate();L=T.getMonth()}if(g!=null&&a!=null){K=(a-1)*7+g+1+7-(new Date(F||i.getFullYear(),L!=null?L:i.getMonth())).getDay();if(U!=null&&U!==K){throw jsl.DateError("date.InconsistentDate:s(d)")}U=K}A=new Date(F!=null?F:i.getFullYear(),L!=null?L:i.getMonth(),U!=null?U:i.getDate(),P!=null?P:i.getHours(),r!=null?r:i.getMinutes(),t!=null?t:i.getSeconds(),o!=null?o:i.getMilliseconds());if(U!=null&&U!==A.getDate()){throw jsl.DateError("date.InconsistentDate:s(d)")}if(L!=null&&L!==A.getMonth()){throw jsl.DateError("date.InconsistentDate:s(d)")}if(c===366&&!jsl.Date.isLeapYear(A)){throw jsl.DateError("date.InconsistentDate:s(dy)")}if(g!=null&&g!==A.getDay()){throw jsl.DateError("date.InconsistentDate:s(dw)")}break}}}if(!A){throw jsl.DateError("NotRecognized:s")}return A}catch(S){jsl.throwError(S,this,arguments)}};jsl.Date.setFormat=function(c,a){try{if(arguments.length!==2){throw jsl.ParamError()}jsl.validate(c,"s+","fid");jsl.validate(a,"t[f,s+]","pattern");this.__fs[c]=jsl.isFunction(a)?a:a+"";return this}catch(b){jsl.throwError(b,this,arguments)}};jsl.Date.getFormat=function(b){try{if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(b,"s+","fid");if(!this.__fs[b]){throw jsl.ParamError("NotDefined",[b])}return this.__fs[b]}catch(a){jsl.throwError(a,this,arguments)}};jsl.Date.isDate=function(c,f){try{var a;try{a=jsl.Date.fromLString.apply(this,arguments)}catch(d){if(d instanceof jsl.ParamError){throw d.clearStackTrace()}else{if(!(d instanceof jsl.DateError)){throw d}}}return !!a}catch(d){jsl.throwError(d,this,arguments)}};jsl.Date.prototype.setLocale=function(b){try{if(!jsl.isDate(this)){throw jsl.TypeError("BadMethodCall:Date")}if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(b,"s+","id")}if(this.__l!=b){jsl.require("locale");if(arguments.length&&!jsl.Locale.isDefined(b)){throw jsl.ParamError("NotDefined:id")}this.__l=b?jsl.Locale.get(b).id:jsl.Locale.getCurrent()}return this}catch(a){jsl.throwError(a,this,arguments)}};jsl.Date.prototype.getLocale=function(){try{if(!jsl.isDate(this)){throw jsl.TypeError("BadMethodCall:Date")}if(arguments.length){throw jsl.ParamError()}if(!this.__l){jsl.require("locale");this.__l=jsl.Locale.getCurrent()}return this.__l}catch(a){jsl.throwError(a,this,arguments)}};jsl.Date.prototype.setFormat=function(b){try{if(!jsl.isDate(this)){throw jsl.TypeError("BadMethodCall:Date")}if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(b,"t[f,s+]","fid")}if(b!=this.__f){if(b==null){this.__f=null}else{this.__f=jsl.isFunction(b)?b:b+""}}return this}catch(a){jsl.throwError(a,this,arguments)}};jsl.Date.prototype.getFormat=function(){try{if(!jsl.isDate(this)){throw jsl.TypeError("BadMethodCall:Date")}if(arguments.length){throw jsl.ParamError()}return this.__f||null}catch(a){jsl.throwError(a,this,arguments)}};jsl.Date.prototype.toLString=function(h){try{var c,i,b,a,g;if(!jsl.isDate(this)){throw jsl.TypeError("BadMethodCall:Date")}if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(h,"t[f,s+]","fid")}a=jsl.Date.getLocale(this);a=jsl.Locale.get(a);if(!h&&this.__f){if(jsl.isFunction(this.__f)){c=this.__f}else{if(jsl.Date.__fs.hasOwnProperty(this.__f)){c=jsl.Date.__fs[this.__f]||a.d_formats[this.__f]}else{c=this.__f}}}else{if(!h&&!this.__f){c=a.d_formats.date}else{if(jsl.isFunction(h)){try{i=h(new Date(+this))}catch(f){throw jsl.ScriptError("BadScript:fid:",f)}if(!jsl.isString(i)){throw jsl.ParamError("BadReturnValue:fid:string")}i+=""}else{if(jsl.Date.__fs.hasOwnProperty(h)){c=jsl.Date.__fs[h];if(!c){c=a.d_formats[h]}}else{if(jsl.Locale.isDefined(h)){c=jsl.Locale.get(h).d_formats.date}else{c=h}}}}}if(i==null){if(jsl.isFunction(c)){try{i=c(+this)}catch(f){throw jsl.ScriptError("BadScript:formatter",f)}if(!jsl.isString(i)){throw jsl.ParamError("BadReturnType:formatter:string")}i+=""}else{b="(\\\\\\\\)*(DAY|Day|day|dyy|DY|Dy|dy|MONTH|Month|month|MT|Mt|mt|MR|mr|hh|h|HH|H|mmn|mn|sf|ss|s|mms|ms|dw|ddw|ddy|dd|d|wm|wwm|wy|wwy|mm|m|yyyy|yy|y|za|zs|z:|z)";b=RegExp(b,"g");g=this;i=c.replace(b,function(d,l,j){var k;if(l&&l.length%2){return d}switch(j){case"DAY":k=a.d_days[g.getDay()].toUpperCase();break;case"day":k=a.d_days[g.getDay()].toLowerCase();break;case"Day":k=a.d_days[g.getDay()];k=k.charAt(0).toUpperCase()+k.slice(1).toLowerCase();break;case"DY":k=a.d_days_short[g.getDay()].toUpperCase();break;case"dy":k=a.d_days_short[g.getDay()].toLowerCase();break;case"Dy":k=a.d_days_short[g.getDay()];k=k.charAt(0).toUpperCase()+k.slice(1).toLowerCase();break;case"dw":k=jsl.Date.getDayOfWeek(this);break;case"ddw":k="0"+jsl.Date.getDayOfWeek(this);break;case"d":k=g.getDate();break;case"dd":k=jsl.String.padLeft(g.getDate()+"",2,"0");break;case"dyy":k=jsl.Date.getDayOfYear(this);break;case"ddy":k=jsl.String.padLeft(jsl.Date.getDayOfYear(this)+"",3,"0");break;case"sf":k=a.d_days_ordinals[this.getDate()]||a.d_days_ordinals[0];break;case"wm":k=jsl.Date.getWeekOfMonth(this);break;case"wwm":k=jsl.String.padLeft(jsl.Date.getWeekOfMonth(this)+"",2,"0");break;case"wy":k=jsl.Date.getWeekOfYear(this);break;case"wwy":k=jsl.String.padLeft(jsl.Date.getWeekOfYear(this)+"",2,"0");break;case"MONTH":k=a.d_months[g.getMonth()].toUpperCase();break;case"month":k=a.d_months[g.getMonth()].toLowerCase();break;case"Month":k=a.d_months[g.getMonth()];k=k.charAt(0).toUpperCase()+k.slice(1).toLowerCase();break;case"MT":k=a.d_months_short[g.getMonth()].toUpperCase();break;case"mt":k=a.d_months_short[g.getMonth()].toLowerCase();break;case"Mt":k=a.d_months_short[g.getMonth()];k=k.charAt(0).toUpperCase()+k.slice(1).toLowerCase();break;case"m":k=g.getMonth()+1;break;case"mm":k=jsl.String.padLeft(g.getMonth()+1+"",2,"0");break;case"y":k=+(g.getFullYear()+"").slice(2)+"";break;case"yy":k=(g.getFullYear()+"").slice(2);break;case"yyyy":k=g.getFullYear()+"";break;case"MR":k=a[g.getHours()>=12?"pm":"am"].toUpperCase();break;case"mr":k=a[g.getHours()>=12?"pm":"am"];break;case"h":k=g.getHours()%12||12;break;case"hh":k=jsl.String.padLeft((g.getHours()%12||12)+"",2,"0");break;case"H":k=g.getHours();break;case"HH":k=jsl.String.padLeft(g.getHours()+"",2,"0");break;case"mn":k=g.getMinutes();break;case"mmn":k=jsl.String.padLeft(g.getMinutes()+"",2,"0");break;case"s":k=g.getSeconds();break;case"ss":k=jsl.String.padLeft(g.getSeconds()+"",2,"0");break;case"ms":k=g.getMilliseconds();break;case"mms":k=jsl.String.padLeft(g.getMilliseconds()+"",3,"0");break;case"z":k=jsl.Date.getTimeZone(g).offsetS.replace(":","");break;case"zs":k=jsl.Date.getTimeZone(g).offsetS.slice(0,3);break;case"z:":k=jsl.Date.getTimeZone(g).offsetS;break;case"za":k=jsl.Date.getTimeZone(g).abbreviation;break}return(l||"")+k})}}return i}catch(f){jsl.throwError(f,this,arguments)}};jsl.Date.prototype.useDst=function(){try{var d,b,a;if(!jsl.isDate(this)){throw jsl.TypeError("BadMethodCall:Date")}if(arguments.length){throw jsl.ParamError()}d=this.getFullYear();b=new Date(d,0,1);a=new Date(d,5,1);return b.getTimezoneOffset()!==a.getTimezoneOffset()}catch(c){jsl.throwError(c,this,arguments)}};jsl.Date.prototype.isInDst=function(){try{var d,c,a,l,g,i,h,f,k;if(!jsl.isDate(this)){throw jsl.TypeError("BadMethodCall:Date")}if(arguments.length){throw jsl.ParamError()}d=this.getFullYear();c=new Date(d,0,1);a=new Date(d,5,1);l=this;i=c.getTimezoneOffset();h=a.getTimezoneOffset();f=l.getTimezoneOffset();g=i-h;if(g>0){k=f===h}else{if(g<0){k=f===i}else{k=false}}return k}catch(j){jsl.throwError(j,this,arguments)}};jsl.Date.prototype.getDstStart=function(){try{var f,c,k,j,i,a,b;if(!jsl.isDate(this)){throw jsl.TypeError("BadMethodCall:Date")}if(arguments.length){throw jsl.ParamError()}if(!jsl.Date.useDst(this)){throw jsl.MisuseError("date.DstNotUsed")}k=this.getFullYear();f=new Date(k,0,1);c=new Date(k,5,1);i=f.getTimezoneOffset()-c.getTimezoneOffset();b=jsl.Date.HOUR;if(i<0){j=f;f=c;c=j;c.setDate(31,11)}while(c-f>b){if(c.getTimezoneOffset()===f.getTimezoneOffset()){c=f;f=a}else{a=new Date(+f);f.setMilliseconds(Math.round((c-f)/2))}}return c}catch(g){jsl.throwError(g,this,arguments)}};jsl.Date.prototype.getDstEnd=function(){try{var f,c,k,j,i,a,b;/*!*/if(!jsl.isDate(this)){throw jsl.TypeError("BadMethodCall:Date")}if(arguments.length){throw jsl.ParamError()}if(!jsl.Date.useDst(this)){throw jsl.MisuseError("date.DstNotUsed")}/*!*/k=this.getFullYear();f=new Date(k,5,1);c=new Date(k,11,31);i=c.getTimezoneOffset()-f.getTimezoneOffset();b=jsl.Date.HOUR;if(i<0){j=f;f=c;c=j;c.setFullYear(k+1)}while(c-f>b){if(c.getTimezoneOffset()===f.getTimezoneOffset()){c=f;f=a}else{a=new Date(+f);f.setMilliseconds(Math.round((c-f)/2))}}f.setHours(f.getHours()-1);return f}catch(g){jsl.throwError(g,this,arguments)}};jsl.Date.prototype.getTimeZone=function(i){try{var j,k,c,l,b,f,d,a;if(!jsl.isDate(this)){throw jsl.TypeError("BadMethodCall:Date")}if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(i,"b","dst")}jsl.require("locale");j=jsl.Locale.get().d_tzs;k=jsl.Date.isInDst(this);c=i==null?k:i;l=Math.round(-this.getTimezoneOffset());l=k?l-60:l;b=(j[l]||"?:?").split(":");l=c?l+60:l;if(i&&!b[1]){throw jsl.ParamError("BadValue:dst")}f=~~(l/60);d=Math.abs(l%60);a=jsl.String;return{abbreviation:c?b[1]:b[0],offsetS:(f>0?"+":"-")+a.padLeft(f+"",2,"0")+":"+a.padLeft(d+"",2,"0"),offsetN:l,offsetH:f,offsetM:d}}catch(g){jsl.throwError(g,this,arguments)}};jsl.Date.prototype.move=function(j,l){try{var c,m,o,k,g,a,f,b;/*!*/if(!jsl.isDate(this)){throw jsl.TypeError("BadMethodCall:Date")}if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(j,"t[i,s+]","units");if(arguments.length===2){jsl.validate(l,"b","clone")}/*!*/c=0;m=jsl.isString(j)?j:j+"d";o=/((?:\\+|\\-)?\\d+)(mn|ms|[ymwdhs])/gi;f=jsl.Date;a={y:f.YEAR,m:f.MONTH,w:f.WEEK,d:f.DAY,h:f.HOUR,mn:f.MINUTE,s:f.SECOND,ms:f.MILLISECOND};o.lastIndex=0;do{g=o.lastIndex;k=o.exec(m);/*!*/if(k==null||k.index!==g){throw jsl.ParamError("BadSyntax:units")}/*!*/c+=k[1]*a[k[2]]}while(g+k[0].length<j.length);b=l&&l.valueOf()?new Date(this):this;b.setMilliseconds(this.getMilliseconds()+c);return b}catch(h){jsl.throwError(h,this,arguments)}};jsl.Date.prototype.toFirstDayOfWeek=function(f){try{var b,a,d;/*!*/if(!jsl.isDate(this)){throw jsl.TypeError("BadMethodCall:Date")}if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(f,"b","clone")}/*!*/a=jsl.Date.getLocale(this);b=jsl.Locale.get(a).d_first_wday;d=f&&f.valueOf()?new Date(this):this;d.setMilliseconds(this.getMilliseconds()-(this.getDay()-b)*jsl.Date.DAY);return d}catch(c){jsl.throwError(c,this,arguments)}};jsl.Date.prototype.toLastDayOfWeek=function(f){try{var b,a,d;/*!*/if(!jsl.isDate(this)){throw jsl.TypeError("BadMethodCall:Date")}if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(f,"b","clone")}/*!*/a=jsl.Date.getLocale(this);b=jsl.Locale.get(a).d_first_wday;d=f&&f.valueOf()?new Date(this):this;d.setMilliseconds(this.getMilliseconds()+(6-this.getDay()+b)*jsl.Date.DAY);return d}catch(c){jsl.throwError(c,this,arguments)}};jsl.Date.prototype.toFirstDayOfMonth=function(c){try{var b;/*!*/if(!jsl.isDate(this)){throw jsl.TypeError("BadMethodCall:Date")}if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(c,"b","clone")}/*!*/b=c&&c.valueOf()?new Date(this):this;b.setDate(1);return b}catch(a){jsl.throwError(a,this,arguments)}};jsl.Date.prototype.toLastDayOfMonth=function(c){try{var b;/*!*/if(!jsl.isDate(this)){throw jsl.TypeError("BadMethodCall:Date")}if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(c,"b","clone")}/*!*/b=c&&c.valueOf()?new Date(this):this;b.setDate(jsl.Date.getDaysOfMonth(this));return b}catch(a){jsl.throwError(a,this,arguments)}};jsl.Date.prototype.toFirstDayOfYear=function(c){try{var b;/*!*/if(!jsl.isDate(this)){throw jsl.TypeError("BadMethodCall:Date")}if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(c,"b","clone")}/*!*/b=c&&c.valueOf()?new Date(this):this;b.setMonth(0,1);return b}catch(a){jsl.throwError(a,this,arguments)}};jsl.Date.prototype.toLastDayOfYear=function(c){try{var b;/*!*/if(!jsl.isDate(this)){throw jsl.TypeError("BadMethodCall:Date")}if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(c,"b","clone")}/*!*/b=c&&c.valueOf()?new Date(this):this;b.setMonth(11,31);return b}catch(a){jsl.throwError(a,this,arguments)}};jsl.Date.prototype.isInLeapYear=function(){try{var g,c,a,b;/*!*/if(!jsl.isDate(this)){throw jsl.TypeError("BadMethodCall:Date")}if(arguments.length){throw jsl.ParamError()}/*!*/g=this.getFullYear()+"";c=+g.slice(0,2);a=+g.slice(2);if(a==="00"){b=!(c/4)}else{b=!(a%4)}return b}catch(d){jsl.throwError(d,this,arguments)}};jsl.Date.prototype.between=function(c,a){try{if(!jsl.isDate(this)){throw jsl.TypeError("BadMethodCall:Date")}if(arguments.length!==2){throw jsl.ParamError()}jsl.validate(c,"d","date1");jsl.validate(a,"d","date2");return c<=this&&this<=a}catch(b){jsl.throwError(b,this,arguments)}};jsl.Date.prototype.distance=function(b,c){try{var a,i,h,g;if(!jsl.isDate(this)){throw jsl.TypeError("BadMethodCall:Date")}if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(b,"d","date");if(arguments.length===2){jsl.validate(c,"s+","unit")}a=c?c.toLowerCase():"d";g=jsl.Date;h=Math.abs(this-b);if(a==="y"){i=h/g.YEAR}else{if(a==="m"){i=h/g.MONTH}else{if(a==="w"){i=h/g.WEEK}else{if(a==="d"){i=h/g.DAY}else{if(a==="h"){i=h/g.HOUR}else{if(a==="mn"){i=h/g.MINUTE}else{if(a==="s"){i=h/g.SECOND}else{if(a==="ms"){i=h}/*!*/else{throw jsl.ParamError("BadValue:unit")}/*!*/}}}}}}}return i}catch(f){jsl.throwError(f,this,arguments)}};jsl.Date.prototype.getDaysOfMonth=function(){try{var b,a;/*!*/if(!jsl.isDate(this)){throw jsl.TypeError("BadMethodCall:Date")}if(arguments.length){throw jsl.ParamError()}/*!*/b=[31,28,31,30,31,30,31,31,30,31,30,31];a=this.getMonth();return a==1&&jsl.Date.isInLeapYear(this)?29:b[a]}catch(c){jsl.throwError(c,this,arguments)}};jsl.Date.prototype.getDaysOfYear=function(){try{/*!*/if(!jsl.isDate(this)){throw jsl.TypeError("BadMethodCall:Date")}if(arguments.length){throw jsl.ParamError()}/*!*/return jsl.Date.isInLeapYear(this)?366:365}catch(a){jsl.throwError(a,this,arguments)}};jsl.Date.prototype.getDayOfWeek=function(){try{var a,f,b;/*!*/if(!jsl.isDate(this)){throw jsl.TypeError("BadMethodCall:Date")}if(arguments.length){throw jsl.ParamError()}/*!*/a=jsl.Date.getLocale(this);a=jsl.Locale.get(a);b=a.d_first_wday;f=this.getDay();return f>=b?f-b+1:8-b+f}catch(c){jsl.throwError(c,this,arguments)}};jsl.Date.prototype.getDayOfYear=function(){try{/*!*/if(!jsl.isDate(this)){throw jsl.TypeError("BadMethodCall:Date")}if(arguments.length){throw jsl.ParamError()}/*!*/return Math.floor((this-new Date(this.getFullYear(),0,1)+jsl.Date.DAY)/jsl.Date.DAY)}catch(a){jsl.throwError(a,this,arguments)}};jsl.Date.prototype.getWeekOfMonth=function(){try{if(!jsl.isDate(this)){throw jsl.TypeError("BadMethodCall:Date")}if(arguments.length){throw jsl.ParamError()}return Math.ceil((this.getDate()*jsl.Date.DAY)/jsl.Date.WEEK)}catch(a){jsl.throwError(a,this,arguments)}};jsl.Date.prototype.getWeekOfYear=function(){try{var c,b;/*!*/if(!jsl.isDate(this)){throw jsl.TypeError("BadMethodCall:Date")}if(arguments.length){throw jsl.ParamError()}/*!*/c=(new Date(this.getFullYear(),0,1)).getDay();b=new Date(this.getFullYear(),0,7-c);return Math.ceil((this-b)/jsl.Date.WEEK)+(c<=3?1:0)}catch(a){jsl.throwError(a,this,arguments)}};(function(){var a;jsl.Date.__native=jsl.Object.__native.copy().merge(jsl.Date.prototype);a=jsl.Date.prototype;for(var b in a){if(a.hasOwnProperty(b)){if(b.charAt(0)!=="_"&&jsl.isFunction(a[b])&&!a[b].__name&&b!=="setFormat"&&b!=="getFormat"){jsl.Date[b]=function(d){try{if(!arguments.length){throw jsl.ParamError()}if(d===null){throw jsl.ParamError("NullValue:obj")}return arguments.callee.__f.apply(d,Array.prototype.slice.call(arguments,1))}catch(c){jsl.throwError(c,this,arguments)}};jsl.Date[b].__name=b;jsl.Date[b].__f=a[b];a[b].__name=b}}}})();jsl.Function=function(b){try{var a,g;/*!*/if(arguments.length>1){throw jsl.ParamError()}/*!*/if(arguments.length){/*!*/jsl.validate(b,"f");/*!*/if(b.__augmented){return b}else{g=b}}else{g=new Function}a=jsl.Function.prototype;for(var d in a){if(a.hasOwnProperty(d)){g[d]=a[d]}}g.__native=arguments.callee.__native;return g}catch(c){jsl.throwError(c,this,arguments)}};jsl.Function.__name="jsl.Function";jsl.Function.prototype=jsl.Object();jsl.Function.prototype.augment=function(){try{var c,b,f,h;/*!*/if(!jsl.isFunction(this)){throw jsl.TypeError("BadMethodCall:Function")}if(!arguments.length){throw jsl.ParamError()}/*!*/c=arguments;b=c.length;for(var d=0;d<b;d++){/*!*/jsl.validate(c[d],"f","f["+d+"]");/*!*/f=c[d].prototype;for(h in f){if(f.hasOwnProperty(h)&&jsl.isFunction(f[h])){this.prototype[h]=f[h]}}}return this}catch(g){jsl.throwError(g,this,arguments)}};jsl.Function.prototype.getParameters=function(){try{var a,c;/*!*/if(!jsl.isFunction(this)){throw jsl.TypeError("BadMethodCall:Function")}if(arguments.length){throw jsl.ParamError()}/*!*/c=this.__params;if(!c){a=Function.prototype.toString.call(this);a=a.replace(/\\/\\*(?:[\\s\\S])*?\\*\\//g,"");a=a.replace(/\\/\\/.*\\n/g,"");a=a.replace(/[\\n\\s]+/g,"");a=a.match(/[\\s\\S]*?function[^(]*\\(([^\\)]*)\\)/)[1];c=a.length?a.split(","):[];if(this.__augmented){this.__params=c}}return c.slice()}catch(b){jsl.throwError(b,this,arguments)}};jsl.Function.prototype.getSignature=function(){try{/*!*/if(!jsl.isFunction(this)){throw jsl.TypeError("BadMethodCall:Function")}if(arguments.length){throw jsl.ParamError()}/*!*/return jsl.Function.getName(this)+"("+jsl.Function.getParameters(this).join(",")+")"}catch(a){jsl.throwError(a,this,arguments)}};jsl.Function.prototype.getBody=function(){try{var c,f,d,b,a;/*!*/if(!jsl.isFunction(this)){throw jsl.TypeError("BadMethodCall:Function")}if(arguments.length){throw jsl.ParamError()}/*!*/a=this.__body;if(a==null){f=/("(?:\\\\.|[^"\\\\])*")|(\'(?:\\\\.|[^\'\\\\])*\')|(\\/\\*(?:[\\s\\S])*?\\*\\/)|(\\/\\/[^\\n]*)|(\\/(?:\\\\.|[^\\/\\\\])*\\/)/g;c=Function.prototype.toString.call(this);c=c.replace(f,function(k,j,i,h,m,l){return h||m?"":k});d=c.indexOf("{");b=c.lastIndexOf("}");a=d!==-1&&b!==-1?c.slice(d+1,b):"";if(this.__augmented){this.__body=a}}return a}catch(g){jsl.throwError(g,this,arguments)}};jsl.Function.prototype.getName=function(){try{var a,b;/*!*/if(!jsl.isFunction(this)){throw jsl.TypeError("BadMethodCall:Function")}if(arguments.length){throw jsl.ParamError()}/*!*/b=this.__name;if(!b){a=Function.prototype.toString.call(this);a=a.replace(/\\/\\*(?:[\\s\\S])*?\\*\\//g,"");a=a.replace(/\\/\\/.*\\n/g,"");a=a.replace(/[\\n\\s]+/g,"");b=a.match(/[\\s\\S]*?function([^(]*)/)[1]||"anonymous";if(this.__augmented){this.__name=b}}return b}catch(c){jsl.throwError(c,this,arguments)}};jsl.Function.prototype.isSubTypeOf=function(a){try{/*!*/if(!jsl.isFunction(this)){throw jsl.TypeError("BadMethodCall:Function")}if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(a,"f","f");/*!*/return a.prototype.isPrototypeOf(this.prototype)}catch(b){jsl.throwError(b,this,arguments)}};jsl.Function.prototype.isSuperTypeOf=function(a){try{/*!*/if(!jsl.isFunction(this)){throw jsl.TypeError("BadMethodCall:Function")}if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(a,"f","f");/*!*/return this.prototype.isPrototypeOf(a.prototype)}catch(b){jsl.throwError(b,this,arguments)}};jsl.Function.prototype.isNative=function(){try{var a,b;/*!*/if(!jsl.isFunction(this)){throw jsl.TypeError("BadMethodCall:Function")}if(arguments.length){throw jsl.ParamError()}/*!*/a=jsl.Function.getBody(this);b=/"(\\\\.|[^\\\\"])*"|\'(\\\\.|[^\\\\\'])*\'|\\/(\\\\.|[^\\\\\\/])*\\//g;return a.replace(b,"").search(/\\[native code[^\\]]*\\]/i)!==-1}catch(c){jsl.throwError(c,this,arguments)}};(function(){var a;jsl.Function.__native=jsl.Object.__native.copy().merge(jsl.Function.prototype);a=jsl.Function.__native;a.getName=jsl.Function.prototype.getName;a.__params=null;a.__body=undefined;a=jsl.Function.prototype;for(var b in a){if(a.hasOwnProperty(b)){if(b.charAt(0)!=="_"&&jsl.isFunction(a[b])&&!a[b].__name){jsl.Function[b]=function(d){try{/*!*/if(!arguments.length){throw jsl.ParamError()}if(d===null){throw jsl.ParamError("NullValue:obj")}/*!*/return arguments.callee.__f.apply(d,Array.prototype.slice.call(arguments,1))}catch(c){jsl.throwError(c,this,arguments)}};jsl.Function[b].__name=b;jsl.Function[b].__f=a[b];a[b].__name=b}}}})();jsl.Number=function(f){try{var a,d;/*!*/if(arguments.length>1){throw jsl.ParamError()}/*!*/if(arguments.length){if(f instanceof Number){if(f.__augmented){return f}else{d=f}}else{/*!*/if(isNaN(f)){throw jsl.ParamError("NaNValue:n")}/*!*/d=new Number(f)}}else{d=new Number}a=jsl.Number.prototype;for(var c in a){if(a.hasOwnProperty(c)){d[c]=a[c]}}d.__native=arguments.callee.__native;return d}catch(b){jsl.throwError(b,this,arguments)}};jsl.Number.__name="jsl.Number";jsl.Number.prototype=jsl.Object();jsl.Number.fromLString=function(d,a){try{var g,b,c;/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(d,"s+","s");if(arguments.length===2){jsl.validate(a,"s+","locale")}/*!*/jsl.require("locale");/*!*/if(a&&!jsl.Locale.isDefined(a)){throw jsl.ParamError("NotDefined:locale")}/*!*/b=jsl.Locale.get(a||jsl.Locale.getCurrent());if(b.n_format){try{g=b.n_format.call({},d)}catch(f){throw jsl.ScriptError("BadScript:locale["+b.id+"\\\\:d_format]",f)}/*!*/if(!jsl.isNumber(g)){throw jsl.ParamError("BadReturnType:locale["+b.id+"\\\\:d_format]:number")}if(isNaN(g)){throw jsl.ParamError("NotRecognized:s")}/*!*/}else{c="^\\\\-?\\\\d{1,3}(\\\\"+b.n_sep_zero+"\\\\d{3})*(\\\\"+b.n_sep_dec+"\\\\d+)?$";/*!*/if(!d.match(c)){throw jsl.ParamError("NotRecognized:s")}/*!*/g=+d.replace(RegExp("\\\\"+b.n_sep_zero,"g"),"").replace(b.n_sep_dec,".")}return g}catch(f){jsl.throwError(f,this,arguments)}};jsl.Number.random=function(b,c){try{var a,f;/*!*/if(arguments.length>2){throw jsl.ParamError()}if(arguments.length){jsl.validate(b,"n","max")}if(arguments.length===2){jsl.validate(c,"n","min")}/*!*/a=b!=null?b:1;f=c||0;/*!*/if(f>a){throw jsl.ParamError("BadInterval:min > max")}/*!*/return f+Math.random()*(a-f)}catch(d){jsl.throwError(d,this,arguments)}};jsl.Number.degToRad=function(b){try{/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(b,"n","d");/*!*/return b*(2*Math.PI)/360}catch(a){jsl.throwError(a,this,arguments)}};jsl.Number.radToDeg=function(a){try{if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(a,"n","r");return a*360/(2*Math.PI)}catch(b){jsl.throwError(b,this,arguments)}};jsl.Number.prototype.round=function(b){try{/*!*/if(!jsl.isNumber(this)){throw jsl.TypeError("BadMethodCall:Number")}if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(b,"i+","d")}/*!*/return +this.toFixed(b||0)}catch(a){jsl.throwError(a,this,arguments)}};jsl.Number.prototype.ceil=function(b){try{var c;/*!*/if(!jsl.isNumber(this)){throw jsl.TypeError("BadMethodCall:Number")}if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(b,"i+","d")}/*!*/if(b){c=Math.pow(10,b);c=Math.ceil(this*c)/c}else{c=Math.ceil(this)}return c}catch(a){jsl.throwError(a,this,arguments)}};jsl.Number.prototype.floor=function(b){try{var c;if(!jsl.isNumber(this)){throw jsl.TypeError("BadMethodCall:Number")}if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(b,"i+","d")}if(b){c=Math.pow(10,b);c=Math.floor(this*c)/c}else{c=Math.floor(this)}return c}catch(a){jsl.throwError(a,this,arguments)}};jsl.Number.prototype.limit=function(a,b){try{var d;/*!*/if(!jsl.isNumber(this)){throw jsl.TypeError("BadMethodCall:Number")}if(!arguments.length||arguments.length>2){throw jsl.ParamError()}if(arguments.length){jsl.validate(a,"N","max")}if(arguments.length===2){jsl.validate(b,"N","min")}if(b!=null&&b>a){throw jsl.ParamError("BadInterval:min > max")}/*!*/if(this>a){d=a}else{if(b!=null&&this<b){d=b}else{d=this}}return +d}catch(c){jsl.throwError(c,this,arguments)}};jsl.Number.prototype.toInteger=function(){try{/*!*/if(!jsl.isNumber(this)){throw jsl.TypeError("BadMethodCall:Number")}if(arguments.length){throw jsl.ParamError()}/*!*/return ~~this}catch(a){jsl.throwError(a,this,arguments)}};jsl.Number.prototype.isInteger=function(){try{/*!*/if(!jsl.isNumber(this)){throw jsl.TypeError("BadMethodCall:Number")}if(arguments.length){throw jsl.ParamError()}/*!*/return !(this-~~this)}catch(a){jsl.throwError(a,this,arguments)}};jsl.Number.prototype.toLString=function(a){try{var d,c,b;/*!*/if(!jsl.isNumber(this)){throw jsl.TypeError("BadMethodCall:Number")}if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(a,"s+","locale")}/*!*/jsl.require("locale");/*!*/if(a&&!jsl.Locale.isDefined(a)){throw jsl.ParamError("NotDefined:locale")}/*!*/b=jsl.Locale.get(a||jsl.Locale.getCurrent());if(b.n_format){try{d=b.n_format.call({},+this)}catch(f){throw jsl.ScriptError("BadScript:locale["+b.id+"\\\\:d_format]",f)}d+="";/*!*/if(!jsl.isString(d)){throw jsl.ParamError("BadReturnType:	locale["+b.id+"\\\\:d_format]:string")}if(!d){throw jsl.ParamError("BadReturnValue:	locale["+b.id+"\\\\:d_format]:string")}/*!*/}else{d=this+"";c=d.indexOf(".");d=c!==-1?d.slice(0,c):d;d=d.split("").reverse().join("");d=d.replace(/\\d{3}/g,"$&"+b.n_sep_zero);d=d.split("").reverse().join("");d=c!==-1?d+b.n_sep_dec+(this+"").slice(c+1):d}return d}catch(f){jsl.throwError(f,this,arguments)}};(function(){var a;jsl.Number.__native=jsl.Object.__native.copy().merge(jsl.Number.prototype);a=jsl.Number.prototype;for(var b in a){if(a.hasOwnProperty(b)){if(b.charAt(0)!=="_"&&jsl.isFunction(a[b])&&!a[b].__name){jsl.Number[b]=function(d){try{/*!*/if(!arguments.length){throw jsl.ParamError()}jsl.validate(d,"N","obj");/*!*/return arguments.callee.__f.apply(d,Array.prototype.slice.call(arguments,1))}catch(c){jsl.throwError(c,this,arguments)}};jsl.Number[b].__name=b;jsl.Number[b].__f=a[b];a[b].__name=b}}}})();jsl.String=function(a){try{var b,f;/*!*/if(arguments.length>1){throw jsl.ParamError()}/*!*/if(arguments.length){if(a instanceof String){if(a.__augmented){return a}else{f=a}}else{f=new String(a)}}else{f=new String}b=jsl.String.prototype;for(var d in b){if(b.hasOwnProperty(d)){f[d]=b[d]}}f.__native=arguments.callee.__native;return f}catch(c){jsl.throwError(c,this,arguments)}};jsl.String.__name="jsl.String";jsl.String.prototype=jsl.Object();jsl.String.replicate=function(f,c){try{var a,b;/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(f,"i+","n");if(arguments.length===2){jsl.validate(c,"s")}/*!*/a=new Array(f+1);b=arguments.length===2?c+"":" ";return a.join(b)}catch(d){jsl.throwError(d,this,arguments)}};jsl.String.prototype.after=function(b,f,a){try{var d;/*!*/if(!jsl.isString(this)){throw jsl.TypeError("BadMethodCall:String")}if(!arguments.length||arguments.length>3){throw jsl.ParamError()}jsl.validate(b,"t[re,s+]","sel");if(arguments.length>=2){jsl.validate(f,"i!0","n")}if(arguments.length===3){jsl.validate(a,"i+","idx")}/*!*/d=jsl.String.prototype.regexp.apply(this,arguments);return d?this.slice(d.index+d[0].length):""}catch(c){jsl.throwError(c,this,arguments)}};jsl.String.prototype.before=function(c,f,a){try{var b;/*!*/if(!jsl.isString(this)){throw jsl.TypeError("BadMethodCall:String")}if(!arguments.length||arguments.length>3){throw jsl.ParamError()}jsl.validate(c,"t[re,s+]","sel");if(arguments.length>=2){jsl.validate(f,"i!0","n")}if(arguments.length===3){jsl.validate(a,"i+","idx")}/*!*/b=jsl.String.prototype.index.apply(this,arguments);return b!==-1?this.slice(0,b):this.slice()}catch(d){jsl.throwError(d,this,arguments)}};jsl.String.prototype.last=function(){try{/*!*/if(!jsl.isString(this)){throw jsl.TypeError("BadMethodCall:String")}if(arguments.length){throw jsl.ParamError()}/*!*/return this.length?this.charAt(this.length-1):""}catch(a){jsl.throwError(a,this,arguments)}};jsl.String.prototype.left=function(b){try{/*!*/if(!jsl.isString(this)){throw jsl.TypeError("BadMethodCall:String")}if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(b,"i","n");/*!*/return this.slice(0,b)}catch(a){jsl.throwError(a,this,arguments)}};jsl.String.prototype.right=function(b){try{/*!*/if(!jsl.isString(this)){throw jsl.TypeError("BadMethodCall:String")}if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(b,"i","n");/*!*/return b!=0?this.slice(-b):[]}catch(a){jsl.throwError(a,this,arguments)}};jsl.String.prototype.contains=function(b,a){try{/*!*/if(!jsl.isString(this)){throw jsl.TypeError("BadMethodCall:String")}if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(b,"t[re,s+]","sel");if(arguments.length===2){jsl.validate(a,"i+","idx")}/*!*/return jsl.String.prototype.index.call(this,b,1,a||0)!==-1}catch(c){jsl.throwError(c,this,arguments)}};jsl.String.prototype.index=function(b,c,l){try{var h,g,f,o,m,k,a;/*!*/if(!jsl.isString(this)){throw jsl.TypeError("BadMethodCall:String")}if(!arguments.length||arguments.length>3){throw jsl.ParamError()}jsl.validate(b,"t[re,s+]","sel");if(arguments.length>=2&&c!="*"){jsl.validate(c,"i!0","n")}if(arguments.length===3){jsl.validate(l,"i+","idx")}/*!*/h=+c||1;g=+l||0;o=this+"";k=[];if(b instanceof RegExp){a=+b.ignoreCase+ +b.multiline+ +b.global;m=RegExp((b+"").slice(1,-a-1),"g"+(b.ignoreCase?"i":"")+(b.multiline?"m":""))}else{m=RegExp(b.replace(/[\\^\\$\\.\\*\\+\\?\\=\\!\\:\\|\\\\\\/\\(\\)\\[\\]\\{\\}]/g,"\\\\$&"),"g")}m.lastIndex=g;do{f=m.exec(o);if(f){if(h<0||c=="*"){k.push(f.index)}else{if(!--h){break}}}}while(f);if(h<0&&k[k.length+h]!=null){f=k[k.length+h]}else{if(f){f=f.index}}return c=="*"?(k.length?k:null):(f!=null?f:-1)}catch(j){jsl.throwError(j,this,arguments)}};jsl.String.prototype.regexp=function(b,c,l){try{var h,g,f,o,m,k,a;/*!*/if(!jsl.isString(this)){throw jsl.TypeError("BadMethodCall:String")}if(!arguments.length||arguments.length>3){throw jsl.ParamError()}jsl.validate(b,"t[re,s+]","sel");if(arguments.length>=2&&c!="*"){jsl.validate(c,"i!0","n")}if(arguments.length===3){jsl.validate(l,"i+","idx")}/*!*/h=+c||1;g=+l||0;o=this+"";k=[];if(b instanceof RegExp){a=+b.ignoreCase+ +b.multiline+ +b.global;m=RegExp((b+"").slice(1,-a-1),"g"+(b.ignoreCase?"i":"")+(b.multiline?"m":""))}else{m=RegExp(b.replace(/[\\^\\$\\.\\*\\+\\?\\=\\!\\:\\|\\\\\\/\\(\\)\\[\\]\\{\\}]/g,"\\\\$&"),"g")}m.lastIndex=g;do{f=m.exec(o);if(f){if(h<0||c=="*"){k.push(f)}else{if(!--h){break}}}}while(f);if(h<0&&k[k.length+h]!=null){f=k[k.length+h]}return c=="*"?(k.length?k:null):f}catch(j){jsl.throwError(j,this,arguments)}};jsl.String.prototype.endsWith=function(){try{var f,d,h;/*!*/if(!jsl.isString(this)){throw jsl.TypeError("BadMethodCall:String")}if(!arguments.length){throw jsl.ParamError()}/*!*/d=jsl.String.prototype.regexp;for(var c=0,b=arguments.length;c<b;c++){f=arguments[c];/*!*/jsl.validate(f,"t[re,s+]","sel["+c+"]");/*!*/h=d.call(this,f,-1);if(h&&h.index+h[0].length===this.length){break}}return c<b}catch(g){jsl.throwError(g,this,arguments)}};jsl.String.prototype.startsWith=function(){try{var d;/*!*/if(!jsl.isString(this)){throw jsl.TypeError("BadMethodCall:String")}if(!arguments.length){throw jsl.ParamError()}/*!*/for(var c=0,b=arguments.length;c<b;c++){d=arguments[c];/*!*/jsl.validate(d,"t[re,s+]","sel["+d+"]");/*!*/if(d instanceof RegExp?!this.search(d):!this.indexOf(d)){break}}return c<b}catch(f){jsl.throwError(f,this,arguments)}};jsl.String.prototype.isUpper=function(){try{/*!*/if(!jsl.isString(this)){throw jsl.TypeError("BadMethodCall:String")}if(arguments.length){throw jsl.ParamError()}/*!*/return this==this.toUpperCase()}catch(a){jsl.throwError(a,this,arguments)}};jsl.String.prototype.isLower=function(){try{/*!*/if(!jsl.isString(this)){throw jsl.TypeError("BadMethodCall:String")}if(arguments.length){throw jsl.ParamError()}/*!*/return this==this.toLowerCase()}catch(a){jsl.throwError(a,this,arguments)}};jsl.String.prototype.count=function(c,a){try{var b;/*!*/if(!jsl.isString(this)){throw jsl.TypeError("BadMethodCall:String")}if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(c,"t[re,s+]","sel");if(arguments.length===2){jsl.validate(a,"i+","idx")}/*!*/b=jsl.String.prototype.index.call(this,c,"*",a||0);return b?b.length:0}catch(d){jsl.throwError(d,this,arguments)}};jsl.String.prototype.compile=function(){try{var b,a,c;/*!*/if(!jsl.isString(this)){throw jsl.TypeError("BadMethodCall:String")}if(!arguments.length){throw jsl.ParamError()}/*!*/b=0;a=arguments;c=function(f,g){if(g==="\\\\"){return"$"}else{if(b<a.length){return(g||"")+a[b++]}else{return f}}};return this.replace(/(^|[\\s\\S]?)\\$/g,c)}catch(d){jsl.throwError(d,this,arguments)}};jsl.String.prototype.inject=function(c,a){try{var b;/*!*/if(!jsl.isString(this)){throw jsl.TypeError("BadMethodCall:String")}if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(c,"s");if(arguments.length===2){jsl.validate(a,"i+","idx")}/*!*/b=arguments.length===2?+a:this.length;return this.slice(0,b)+c+this.slice(b)}catch(d){jsl.throwError(d,this,arguments)}};jsl.String.prototype.modify=function(g,f,j,b){try{var i,d;/*!*/if(!jsl.isString(this)){throw jsl.TypeError("BadMethodCall:String")}if(arguments.length<2||arguments.length>4){throw jsl.ParamError()}jsl.validate(g,"t[re,s+]","sel");jsl.validate(f,"s","s");if(arguments.length>=3&&j!="*"){jsl.validate(j,"i!0","n")}if(arguments.length===4){jsl.validate(b,"i+","idx")}/*!*/i=jsl.String.prototype.regexp.call(this,g,j||1,b||0);d=this.split("");if(i){i=j=="*"?i:[i];for(var c=i.length-1;c>=0;c--){d.splice(i[c].index,i[c][0].length,f)}}return d.join("")}catch(h){jsl.throwError(h,this,arguments)}};jsl.String.prototype.padLeft=function(j,i){try{var d,g,f;/*!*/if(!jsl.isString(this)){throw jsl.TypeError("BadMethodCall:String")}if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(j,"i+","n");if(arguments.length===2){jsl.validate(i,"s+","c")}if(arguments.length===2&&i.length!==1){throw jsl.ParamError("BadLength")}/*!*/d=this.split("");g=i||" ";f=+j;for(var b=this.length;b<f;b++){d.unshift(g)}return d.join("")}catch(h){jsl.throwError(h,this,arguments)}};jsl.String.prototype.padRight=function(j,i){try{var d,g,f;/*!*/if(!jsl.isString(this)){throw jsl.TypeError("BadMethodCall:String")}if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(j,"i+","n");if(arguments.length===2){jsl.validate(i,"s+","c")}if(arguments.length===2&&i.length!==1){throw jsl.ParamError("BadLength")}/*!*/d=this.split("");g=i||" ";f=+j;for(var b=this.length;b<f;b++){d.push(g)}return d.join("")}catch(h){jsl.throwError(h,this,arguments)}};jsl.String.prototype.reverse=function(){try{/*!*/if(!jsl.isString(this)){throw jsl.TypeError("BadMethodCall:String")}if(arguments.length){throw jsl.ParamError()}/*!*/return this.split("").reverse().join("")}catch(a){jsl.throwError(a,this,arguments)}};jsl.String.prototype.trim=function(){try{/*!*/if(!jsl.isString(this)){throw jsl.TypeError("BadMethodCall:String")}if(arguments.length){throw jsl.ParamError()}/*!*/return this.replace(/^\\s+|\\s+$/g,"")}catch(a){jsl.throwError(a,this,arguments)}};jsl.String.prototype.trimLeft=function(){try{/*!*/if(!jsl.isString(this)){throw jsl.TypeError("BadMethodCall:String")}if(arguments.length){throw jsl.ParamError()}/*!*/return this.replace(/^\\s+/,"")}catch(a){jsl.throwError(a,this,arguments)}};jsl.String.prototype.trimRight=function(){try{/*!*/if(!jsl.isString(this)){throw jsl.TypeError("BadMethodCall:String")}if(arguments.length){throw jsl.ParamError()}/*!*/return this.replace(/\\s+$/,"")}catch(a){jsl.throwError(a,this,arguments)}};jsl.String.prototype.remove=function(f,i,b){try{var h,d;/*!*/if(!jsl.isString(this)){throw jsl.TypeError("BadMethodCall:String")}if(!arguments.length||arguments.length>3){throw jsl.ParamError()}jsl.validate(f,"t[re,s+]","sel");if(arguments.length>=2&&i!="*"){jsl.validate(i,"i!0","n")}if(arguments.length===3){jsl.validate(b,"i+","idx")}/*!*/h=jsl.String.prototype.regexp.apply(this,arguments);d=this.split("");if(h){h=i=="*"?h:[h];for(var c=h.length-1;c>=0;c--){d.splice(h[c].index,h[c][0].length)}}return d.join("")}catch(g){jsl.throwError(g,this,arguments)}};jsl.String.prototype.removeAt=function(a,c){try{/*!*/if(!jsl.isString(this)){throw jsl.TypeError("BadMethodCall:String")}if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(a,"i+","idx");if(arguments.length===2){jsl.validate(c,"i+","n")}/*!*/return this.slice(0,a)+this.slice(a+(c||1))}catch(b){jsl.throwError(b,this,arguments)}};jsl.String.prototype.lower=function(){try{/*!*/if(!jsl.isString(this)){throw jsl.TypeError("BadMethodCall:String")}if(arguments.length){throw jsl.ParamError()}/*!*/return this.toLowerCase()}catch(a){jsl.throwError(a,this,arguments)}};jsl.String.prototype.upper=function(){try{/*!*/if(!jsl.isString(this)){throw jsl.TypeError("BadMethodCall:String")}if(arguments.length){throw jsl.ParamError()}/*!*/return this.toUpperCase()}catch(a){jsl.throwError(a,this,arguments)}};jsl.String.prototype.getIterator=function(b){try{var a,d;/*!*/if(!jsl.isString(this)){throw jsl.TypeError("BadMethodCall:String")}if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(b,"f","filter")}/*!*/a={__name:"jsl.StringIterator",__ix:0,__data:this.split("")};d=this;a.hasNext=function(){try{/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/var g,i,f;g=this.__ix,i=this.__data;f=i.length;while(g<f){if(b?b.call(d,g+"",i[g]):true){break}g++}return(this.__ix=g)<f}catch(h){jsl.throwError(h,this,arguments)}};a.next=function(){try{/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/var f=this.hasNext();/*!*/if(!f){throw jsl.EndOfIterationError()}/*!*/return this.__data[this.__ix++]}catch(g){jsl.throwError(g,this,arguments)}};return a}catch(c){jsl.throwError(c,this,arguments)}};(function(){var a;jsl.String.__native=jsl.Object.__native.copy().merge(jsl.String.prototype);a=jsl.String.prototype;for(var b in a){if(a.hasOwnProperty(b)){if(b.charAt(0)!=="_"&&jsl.isFunction(a[b])&&!a[b].__name){jsl.String[b]=function(d){try{/*!*/if(!arguments.length){throw jsl.ParamError()}if(d===null){throw jsl.ParamError("NullValue:obj")}/*!*/return arguments.callee.__f.apply(d,Array.prototype.slice.call(arguments,1))}catch(c){jsl.throwError(c,this,arguments)}};jsl.String[b].__name=b;jsl.String[b].__f=a[b];a[b].__name=b}}}})();jsl.Class("jsl.Node",{__name:null,__lname:"",__pfx:"",__value:null,__type:null,__parent:undefined,__childs:null,__atts:null,__nss:null,__cix:null,__id:0,__drv:true,__drv_getAttributes:function(){return this.__atts={}},__drv_getNss:function(){return this.__nss={}},__drv_getChildren:function(){return this.__childs=[]},__drv_getParent:function(){return null},__drv_getChild:null,__drv_select:null,__drv_attach:null,__drv_detach:null,st___qvs:{},st___qfs:{},st___qts:{},st_setQVar:function(c,b){var a;/*!*/if(arguments.length!==2){throw jsl.ParamError()}jsl.validate(c,"sr/^([a-zA-Z_$][a-zA-Z_$\\\\d]*\\\\.)?[a-zA-Z_$][a-zA-Z_$\\\\d]*$","id");jsl.validate(b,"f","action");/*!*/this.__qvs[c]=b;return this},st_setQFunction:function(b,a){/*!*/if(arguments.length!==2){throw jsl.ParamError()}jsl.validate(b,"sr/^[a-zA-Z_$][a-zA-Z_$\\\\d]*$","id");jsl.validate(a,"f","action");/*!*/this.__qfs[b]=a;return this},st_setQType:function(b,a){/*!*/if(arguments.length!==2){throw jsl.ParamError()}jsl.validate(b,"s+","id");if((/[:\\/{\\[]/).test(b)){throw jsl.ParamError("BadCharacter",["id",b.match(/[:\\/{\\[]/)[0]])}if(b=="default"&&a!=null){jsl.validate(a,"s+","value")}if(b=="default"&&a!=null&&!this.__qts[a]){throw jsl.ParamError("NotDefined:"+a)}/*!*/if(b=="default"&&a!=null){this.__qts[b]=this.__qts[a]}else{if(b==="default"){delete this.__qts[b]}else{this.__qts[b]=a}}return this},Node:function(a){/*!*/if(arguments.length>1){throw jsl.ParamError()}/*!*/this.__id=this.__proto.__id++;if(arguments.length){/*!*/jsl.validate(a,"s+","name");/*!*/this.setName(a);this.__type=a+""}},toString:function(){return this.getName()},getDepth:function(){var b,a;/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/b=0;a=this;while((a=a.__parent||a.getParent())){b++}return b},getValue:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return this.__value},setValue:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/this.__value=a;return this},getType:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return this.__type},setType:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/this.__type=a;return this},setName:function(b){var a;/*!*/if(arguments.length!==1){throw jsl.ParamError()}if(b!=null){jsl.validate(b,"s+","name")}if(b&&(/^[@.:]/).test(b)){throw jsl.ParamError("BadFirstCharacter",["name",b.charAt(0)])}if(b&&(/[\\/{\\[]/).test(b)){throw jsl.ParamError("BadCharacter",["name",b.match(/[\\/{\\[]/)[0]])}/*!*/if(b){a=b.indexOf(":");this.__name=b+"";this.__lname=a>=0?b.slice(a+1):b;this.__pfx=a>=0?b.slice(0,a):null}else{this.__name=null;this.__lname=null;this.__pfx=null}return this},getName:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return this.__name||""},getLocalName:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return this.__lname},getPrefix:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return this.__pfx},getAttribute:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(a,"s+","id");/*!*/if(!this.__atts){this.__drv_getAttributes()}return this.__atts[a]},setAttribute:function(b,a){/*!*/if(arguments.length!==2){throw jsl.ParamError()}jsl.validate(b,"s+","id");/*!*/if(!this.__atts){this.__drv_getAttributes()}this.__atts[b]=a;return this},removeAttribute:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(a,"s+","id");/*!*/if(!this.__atts){this.__drv_getAttributes()}delete this.__atts[a];return this},hasAttribute:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(a,"s+","id");/*!*/if(!this.__atts){this.__drv_getAttributes()}return this.__atts.hasOwnProperty(a)},setAttributes:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(a,"o","attributes");/*!*/if(!this.__atts){this.__drv_getAttributes()}for(var b in a){if(a.hasOwnProperty(b)){this.__atts[b]=a[b]}}return this},getAttributes:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/if(!this.__atts){this.__drv_getAttributes()}return jsl.Object.clone(this.__atts)},removeAttributes:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/this.__atts={};return this},hasAttributes:function(){var c,b,a;/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/if(!this.__atts){this.__drv_getAttributes()}c=this.__atts;for(b in c){if(c.hasOwnProperty(b)){a=true;break}}return !!a},getNs:function(b){var d,c,a;/*!*/if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(b,"s+","prefix")}/*!*/if(b){if(!this.__nss){this.__drv_getNss()}a=this.__nss[b]}else{d=this.__pfx;c=this;while((c=c.__parent===null?null:c.getParent())){a=d?c.getNs(d):c.getDefaultNs();if(a){break}}}return a||null},setNs:function(b,a){/*!*/if(arguments.length!==2){throw jsl.ParamError()}jsl.validate(b,"s+","prefix");if(b&&(/^@/).test(b)){throw jsl.ParamError("BadFirstCharacter",["prefix",b.charAt(0)])}if((/[:\\/{\\[]/).test(b)){throw jsl.ParamError("BadCharacter",["prefix",b.match(/[:\\/{\\[]/)[0]])}if(a!=null){jsl.validate(a,"s+","uri")}/*!*/if(!this.__nss){this.__drv_getNss()}if(a){this.__nss[b]=a+""}else{delete this.__nss[b]}return this},getDefaultNs:function(a){var b,c;/*!*/if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(a,"b","inherited")}/*!*/if(a){c=this;while((c=c.__parent===null?null:c.getParent())&&!b){b=c.getDefaultNs()}}else{if(!this.__nss){this.__drv_getNss()}b=this.__nss[""]}return b||null},setDefaultNs:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}if(a!=null){jsl.validate(a,"s+","uri")}/*!*/if(!this.__nss){this.__drv_getNss()}if(a){this.__nss[""]=a+""}else{delete this.__nss[""]}return this},walk:function(g,m){var a,f,h,k,b,c,j,d;/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(g,"f","action");if(arguments.length===2){jsl.validate(m,"b","includeSelf")}/*!*/a=[];f=this;this.getChildIndex();while(f){c=f===this;if(!c||+m){try{h=g(f)}catch(l){throw jsl.ScriptError("BadScript:action",l)}}if(h&&h!==-1){break}b=c?null:(f.__parent||f.getParent());if(!h){k=f.__childs||f.__drv_getChildren()}else{k=""}d=f.__cix+1;if(k.length){f=k[0].__drv?k[0]:f.__drv_getChild(0);f.__cix=0;j=b&&b.__childs[d];if(j){j=j.__drv?j:b.__drv_getChild(d);j.__cix=d;a.unshift(j)}}else{f=b&&b.__childs[d];if(f){f=f.__drv?f:b.__drv_getChild(d),f.__cix=d}else{f=a.shift()}}}return h},walkUp:function(f,c){var d,a;/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(f,"f","action");if(arguments.length===2){jsl.validate(c,"b","includeSelf")}/*!*/d=+c?this:(this.__parent||this.getParent());try{while(d&&!a){a=f(d);d=d.__parent||d.getParent()}}catch(g){throw jsl.ScriptError("BadScript:action",g)}return a},attach:function(d,a){var f,b,g;/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}if(d==null){throw jsl.ParamError("NullValue:	parent")}if(!jsl.Node.isClassOf(d)){throw jsl.ParamError("BadType:		parent:jsl.Node")}if(this===d){throw jsl.ParamError("BadValue:		parent=this")}if(arguments.length===2){jsl.validate(a,"i+","idx")}if((this.__parent||this.getParent())!==d){f=d;while((f=f.__parent||f.getParent())){if(f===this){throw jsl.ParamError("CircularReference:parent")}}}/*!*/if((this.__parent||this.getParent())!==d||this.getChildIndex()!==(a||0)){if(this.__parent){this.detach()}this.__parent=d;b=d.__childs||d.__drv_getChildren();this.__drv_attach&&this.__drv_attach(d,a);if(a==null){this.__cix=b.length;b.push(this)}else{this.__cix=a>b.length?b.length:a;b.splice(a,0,this)}if(b.upd==null||this.__cix+1<b.upd){b.upd=this.__cix+1}if((g=b[b.upd])&&g.__drv){g.__cix+=2}if((g=b[b.upd+1])&&g.__drv){g.__cix+=2}}return this},detach:function(){var b,a;/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/b=this.__parent||this.getParent();if(b){a=b.__childs||b.__drv_getChildren();a.splice(this.getChildIndex(),1);this.__drv_detach&&this.__drv_detach();if(a.upd==null||this.__cix<a.upd){a.upd=this.__cix}this.__parent=null}return this},insertBefore:function(b){var c,a;/*!*/if(arguments.length!==1){throw jsl.ParamError()}if(b==null){throw jsl.ParamError("NullValue:	node")}if(!jsl.Node.isClassOf(b)){throw jsl.ParamError("BadType:		node:jsl.Node")}if(this===b){throw jsl.ParamError("BadValue:		node=this")}/*!*/c=b.__parent||b.getParent();/*!*/if(!c){throw jsl.ParamError("NullValue:node(parent)")}/*!*/if((this.__parent||this.getParent())===c&&this.getChildIndex()<b.getChildIndex()){a=b.__cix-1}else{a=b.__cix}this.attach(c,a);return this},insertAfter:function(b){var c,a;/*!*/if(arguments.length!==1){throw jsl.ParamError()}if(b==null){throw jsl.ParamError("NullValue:	node")}if(!jsl.Node.isClassOf(b)){throw jsl.ParamError("BadType:		node:jsl.Node")}if(this===b){throw jsl.ParamError("BadValue:		node=this")}/*!*/c=b.__parent||b.getParent();/*!*/if(!c){throw jsl.ParamError("NullValue:node(parent)")}/*!*/if((this.__parent||this.getParent())===c&&this.getChildIndex()<b.getChildIndex()){a=b.__cix}else{a=b.__cix+1}this.attach(c,a);return this},appendChild:function(b,a){/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}if(b==null){throw jsl.ParamError("NullValue:	node")}if(!jsl.Node.isClassOf(b)){throw jsl.ParamError("BadType:		node:jsl.Node")}/*!*/if(arguments.length===2){jsl.validate(a,"i+","ix")}if(arguments.length===2){b.attach(this,a)}else{b.attach(this)}return this},appendChildren:function(){var f,d;/*!*/if(!arguments.length){throw jsl.ParamError()}/*!*/d=Array.prototype.concat.apply([],arguments);for(var c=0,b=d.length;c<b;c++){f=d[c];/*!*/if(f==null){throw jsl.ParamError("NullValue:	node["+c+"]")}if(!jsl.Node.isClassOf(f)){throw jsl.ParamError("BadType:		node["+c+"]:jsl.Node")}/*!*/f.attach(this)}return this},removeChildren:function(){var a;/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/a=this.__childs;if(this.__drv_select||a){a=a||this.__drv_getChildren();while(a[0]){if(a[0].__drv){a[0].detach()}else{this.__drv_getChild(0).detach()}}}else{this.__childs=[]}return this},replace:function(a){var b;/*!*/if(arguments.length!==1){throw jsl.ParamError()}if(a==null){throw jsl.ParamError("NullValue:	node")}if(!jsl.Node.isClassOf(a)){throw jsl.ParamError("BadType:		node:jsl.Node")}if(this===a){throw jsl.ParamError("BadValue:		node:node=this")}/*!*/b=a.__parent||a.getParent();/*!*/if(!b){throw jsl.ParamError("NullValue:node(parent)")}/*!*/this.attach(b,a.getChildIndex());a.detach();return this},sort:function(k,n){var h,j,b,g,m,d;/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(k,"f","rule");if(arguments.length===2){jsl.validate(n,"b","deep")}/*!*/b=this;h=this.__childs||this.__drv_getChildren();g=function(c,a){return k(c,a)};for(m=0,d=h.length;m<d;m++){if(!h[m].__drv){b.__drv_getChild(m)}}try{h.sort(g)}catch(i){throw jsl.ParamError("BadScript:rule",i)}for(m=0,d=h.length;m<d;m++){j=h[m];j.__cix=m;if(j.__drv_attach){j.__drv_detach();j.__drv_attach(b,j.__cix)}if(n==null||+n){j.sort(k,true)}}h.upd=Infinity;return this},getRoot:function(){var a;/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/a=this;while(a.__parent||a.getParent()){a=a.__parent}return a},getLeafs:function(){var a;/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/a=[];this.walk(function(b){if(!(b.__childs||b.__drv_getChildren()).length){a.push(b)}});return a},getParent:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/if(this.__parent===undefined){if(this.__drv_getParent){this.__parent=this.__drv_getParent()}else{this.__parent=null}}return this.__parent},getChildren:function(){var d;/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/d=this.__childs||this.__drv_getChildren();if(!d.__c){for(var c=0,b=d.length;c<b;c++){if(!d[c].__drv){this.__drv_getChild(c)}}}d.__c=true;return d.slice()},getNextSiblings:function(){var g,f,h,d;/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/h=this.__parent||this.getParent();if(h){g=h.__childs||h.__drv_getChildren();d=this.getChildIndex()+1;if(!g.__c){for(var c=d,b=g.length;c<b;c++){if(!g[c].__drv){g[c]=h.__drv_getChild(c)}}}f=g.slice(d)}else{f=[]}return f},getPreviousSiblings:function(){var f,d,g,c;/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/g=this.__parent||this.getParent();if(g){f=g.__childs||g.__drv_getChildren();c=this.getChildIndex();if(!f.__c){for(var b=0;b<c;b++){if(!f[b].__drv){f[b]=g.__drv_getChild(b)}}}d=f.slice(0,c)}else{d=[]}return d},getAncestors:function(){var a,b;/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/a=[];b=this;while((b=b.__parent||b.getParent())){a.push(b)}return a},getDescendants:function(){var a;/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/a=[];this.walk(function(b){a.push(b)});return a},getChild:function(a){var b;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(a,"i+","idx");/*!*/b=(this.__childs||this.__drv_getChildren())[a];b=b&&(b.__drv?b:this.__drv_getChild(a));return b||null},getFirstChild:function(){var a;/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/a=(this.__childs||this.__drv_getChildren())[0];if(a&&!a.__drv){a=this.__drv_getChild(0)}return a||null},getLastChild:function(){var a,b;/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/a=this.__childs||this.__drv_getChildren();b=a.length?a[a.length-1]:null;if(b&&!b.__drv){b=this.__drv_getChild(a.length-1)}return b},getPreviousSibling:function(){var d,f,b,a;/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/d=this.__parent||this.getParent();if(d){b=d.__childs||d.__drv_getChildren();a=this.getChildIndex()-1;f=b[a];if(f&&!f.__drv){f=d.__drv_getChild(a)}}return f||null},getNextSibling:function(){var d,f,b,a;/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/d=this.__parent||this.getParent();if(d){b=d.__childs||d.__drv_getChildren();a=this.getChildIndex()+1;f=b[a];if(f&&!f.__drv){f=d.__drv_getChild(a)}}return f||null},hasParent:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return !!(this.__parent||this.getParent())},hasChildren:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return !!(this.__childs||this.__drv_getChildren()).length},hasSiblings:function(){var a;/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/a=this.__parent||this.getParent();return !!(a&&(a.__childs||a.__drv_getChildren()).length>1)},isChildOf:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}if(a==null){throw jsl.ParamError("NullValue:	node")}if(!jsl.Node.isClassOf(a)){throw jsl.ParamError("BadType:		node:jsl.Node")}/*!*/return(this.__parent||this.getParent())===a},isSiblingOf:function(d,c){var g,f,a;/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}if(d==null){throw jsl.ParamError("NullValue:	node")}if(!jsl.Node.isClassOf(d)){throw jsl.ParamError("BadType:		node:jsl.Node")}if(arguments.length===2){jsl.validate(c,"s+(left,right)","side")}/*!*/if(this!==d){g=this.__parent||this.getParent();f=d.__parent||d.getParent();if(!c){a=g===f}else{if(c=="left"){a=this.getChildIndex()<d.getChildIndex()}else{a=this.getChildIndex()>d.getChildIndex()}}}return !!a},isDescendantOf:function(c){var a;/*!*/if(arguments.length!==1){throw jsl.ParamError()}if(c==null){throw jsl.ParamError("NullValue:	node")}if(!jsl.Node.isClassOf(c)){throw jsl.ParamError("BadType:		node:jsl.Node")}/*!*/if(c!==this){a=this.walkUp(function(b){return b===c})}else{a=false}return a},isFirstChild:function(){var b,a,d;/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/b=this.__parent||this.getParent();a=b&&(b.__childs||b.__drv_getChildren());if(a&&a.length){if(a[0].__drv){d=a[0]}else{d=b.__drv_getChild(0)}}return d?d===this:false},isLastChild:function(){var b,a,d;/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/b=this.__parent||this.getParent();a=b&&(b.__childs||b.__drv_getChildren());if(a&&a.length){if(a[a.length-1].__drv){d=a[a.length-1]}else{d=b.__drv_getChild(0)}}return d?d===this:false},getChildrenCount:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return(this.__childs||this.__drv_getChildren()).length},getChildIndex:function(){var d,g,f;/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/g=this.__parent||this.getParent();if(g){if(this.__drv_getChildIndex){d=this.__cix=this.__drv_getChildIndex()}else{f=g.__childs||g.__drv_getChildren();if(this.__cix>=f.upd){for(var c=f.upd||0,b=f.length;c<b;c++){f[c].__cix=c}f.upd=Infinity;d=this.__cix}else{d=this.__cix}}}return d},select:function(k,o){var D,i,u,b,p,r,j,w,c,B,t,C,s,g,z,m,d,h,x,q,y,n;/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}jsl.validate(k,"s+","qpath");if(arguments.length===2){jsl.validate(o,"o","names");for(p in o){if(o.hasOwnProperty(p)){jsl.validate(o[p],"s+","names."+p);if((/^[@.]/).test(p)){throw jsl.ParamError("BadFirstCharacter",["names."+p,o[p].charAt(0)])}if((/[:\\/{\\[]/).test(p)){throw jsl.ParamError("BadCharacter",["names."+p,o[p].match(/[:\\/{\\[]/)[0]])}}}}/*!*/r=/[^{\\/]+|\\{[^}]*\\}?|(\\/)/g;c=[];w=[""];D=o||{};while((m=r.exec(k))){if(m[1]){w.push("")}else{w[w.length-1]+=m[0]}}r="(^[^.{\\\\[]+::)|([^{\\\\[]+)|(?:\\\\{([^}]+)\\\\})|(\\\\[\\\\s*(?:\\\\-|\\\\+)?\\\\s*\\\\d+\\\\s*\\\\])|(\\\\{)|(\\\\[)|([\\\\s\\\\S]+)";j="\\"(?:\\\\\\\\.|[^\\"\\\\\\\\])*\\"|\'(?:\\\\\\\\.|[^\'\\\\\\\\])*\'|\\\\/(?:\\\\\\\\.|[^\\\\/\\\\\\\\])*\\\\/|\\\\/\\\\*[\\\\s\\\\S]*?\\\\*\\\\/|\\\\/\\\\/[^\\\\n\\\\r]*|(@\\\\*)|(@[^\\\\s()\\\\[\\\\]\\\\+\\\\-~!\\\\*\\\\/%<>=&|\\\\^\\\\?,;]+)|(\\\\$name|\\\\$value|\\\\$type|\\\\$node)|(\\\\$[a-zA-Z_$][a-zA-Z_$\\\\d]*)|(\\\\$)";u={};i={};b={};y=jsl.Object.merge;n=this;C=[];while((n=n.__proto)){if(jsl.Node.isClassOf(n)){C.unshift(n.getClass())}}for(B=0,t=C.length;B<t;B++){u=y(u,C[B].__qvs);i=y(i,C[B].__qfs);b=y(b,C[B].__qts)}r=RegExp(r,"g");j=RegExp(j,"g");y=function(F,E,f,a,H,G){var l;if(E){l="$node.getAttributes()"}else{if(f){l=f.slice(1).replace(/"/g,\'\\\\"\');l=\'$node.getAttribute("\'+l+\'")\'}else{if(a){if(a!=="$node"){l="$node.__"+a.slice(1)}else{l=a}}else{if(H){/*!*/l=H.slice(1);if(!u[l]){throw jsl.ParamError("NotDefined:exp(var="+H+")")}/*!*/l=H+"($node)"}else{if(G){throw jsl.ParamError("node.qp.BadExpVarName",[G])}else{l=F}}}}}return l};for(B=0,t=w.length;B<t;B++){g=w.slice(0,B).join("/").length;g=g?g+1:0;/*!*/if(!w[B]){throw jsl.ParamError("node.qp.UnexpectedToken:"+g)}/*!*/C={};C.step=w[B];C.ns=D;s=0;c.push(C);while((m=r.exec(C.step))){z=g+m.index;if(m[1]){d=m[1].toLowerCase();switch(d){case"anc::":case"ancestors::":d="ancestor";break;case"par::":case"parent::":d="parent";break;case"chd::":case"children::":d="child";break;case"des::":case"descendants::":d="descendant";break;case"sib+::":case"siblings+::":d="following-sibling";break;case"sib-::":case"siblings-::":d="preceding-sibling";break;default:throw jsl.ParamError("node.qp.AxisNotDefined",[d,z])}C.axis=d+"::";s=1}else{if(m[2]){/*!*/if(s>2){throw jsl.ParamError("node.qp.UnexpectedToken:"+z)}/*!*/h=m[2];if(h.charAt(0)==="@"){C.ttype=true;h=h.slice(1)}C.tnode=h;h=h.split(":");C.lname=h.length>1?h.slice(1).join(":"):C.tnode;C.prefix=h.length>1?h[0]:null;z=s?z+1:z;s=2;if(C.ttype){if(C.tnode!=="node"){/*!*/if(!b.hasOwnProperty(C.tnode)){throw jsl.ParamError("node.qp.QtNotDefined",["@"+C.tnode])}/*!*/C.tnode=b[C.tnode]}}/*!*/else{if(C.prefix&&C.prefix!="#"&&(!D||!D[C.prefix])){throw jsl.ParamError("node.qp.NsNotDefined",[C.prefix,z])}}/*!*/}else{if(m[3]){/*!*/if(s>2){throw jsl.ParamError("node.qp.UnexpectedToken:"+z)}/*!*/s=3;C.exp=m[3];C.nexp=m[3].replace(j,y)}else{if(m[4]){/*!*/if(!s||s>3){throw jsl.ParamError("node.qp.UnexpectedToken:"+z)}/*!*/C.sel=m[4].replace(/\\s+/g,"");C.ix=parseInt(C.sel.slice(1,-1));s=4;/*!*/if(!C.ix){throw jsl.ParamError("node.qp.ZeroIndex:"+z)}/*!*/}/*!*/else{if(m[5]){throw jsl.ParamError("node.qp.BadExp:"+z)}else{if(m[6]){throw jsl.ParamError("node.qp.BadSelector:"+z)}else{throw jsl.ParamError("node.qp.UnexpectedToken:"+z)}}}/*!*/}}}}}x="__vs = arguments[1].vs, __fs = arguments[1].fs";for(p in u){if(u.hasOwnProperty(p)){x+=", $"+p+\' = __vs["\'+p+\'"]\'}}for(p in i){if(i.hasOwnProperty(p)){x+=", "+p+\' = __fs["\'+p+\'"]\'}}x+=";";if(this.__drv_select){c.ns=D;c.env=x;c.vs=u;c.fs=i;c.ts=b;q=this.__drv_select(c)}else{q=[this];for(B=0,t=c.length;B<t&&q.length;B++){C=c[B];C.vs=u;C.fs=i;C.ts=b;switch(C.axis){case"child::":y=jsl.Node.__qp_findC;break;case"parent::":y=jsl.Node.__qp_findP;break;case"ancestor::":y=jsl.Node.__qp_findA;break;case"descendant::":y=jsl.Node.__qp_findD;break;case"following-sibling::":y=jsl.Node.__qp_findS2;break;case"preceding-sibling::":y=jsl.Node.__qp_findS1;break;case undefined:if(!C.tnode){y=jsl.Node.__qp_exp}else{y=jsl.Node.__qp_findC}}y="jsl.__tmp.f = "+y;y=y.replace(/,\\s*\\$1,\\s*\\$2/,"").replace(/\\$1\\s*=\\s*1;?/,x);y=y.replace(/\\$2/g,C.exp?"("+C.nexp+")":"true");try{y=(jsl.__ni_script_execute(y),jsl.__tmp.f)}catch(A){throw jsl.ParamError("node.qp.BadExp",[C.step],A)}try{q=y(q,C)}catch(A){throw jsl.ParamError("node.qp.BadRtExp",[C.step],A)}}}return q}});jsl.Node.__qp_exp=function(b,i,d){var c,f,a,h,g,$node,$1,$2;$1=1;c=[];a=0;if(!i.sel){for(h=0,g=b.length;h<g;h++){$node=b[h];if(!d){c[a++]=$2}else{if($2){c[a++]=$node}}}}else{if(i.ix>0){f=i.ix;if(!d){$node=b[f-1];if($node){c[a++]=$2}}else{for(h=0,g=b.length;h<g;h++){$node=b[h];if($2&&!--f){c[a++]=$node;break}}}}else{f=-i.ix;if(!d){$node=b[b.length-f];if($node){c[a++]=$2}}else{for(h=b.length-1;h>=0;h--){$node=b[h];if($2&&!--f){c[a++]=$node;break}}}}}return c};jsl.Node.__qp_findA=function(m,c){var h,b,k,j,n,d,i,a,f,l,o,g,$node,$1,$2;$1=1;h=[];b={};a=0;d=c.ix;g=!c.prefix;k=c.prefix?c.ns[c.prefix]:null;o=c.tnode&&!c.ttype?"__lname":"__type";if(c.tnode==="node"){l=null}else{if(c.ttype){l=c.tnode}else{if(c.tnode){l=c.lname}else{if(c.ts.hasOwnProperty("default")){l=c.ts["default"]}}}}if(d<0){for(j=0,n=m.length;j<n;j++){$node=m[j];i=[];f=0;while(($node=$node.__parent===null?null:$node.getParent())){if((l?$node[o]===l:true)&&(g||$node.getNs()===k)&&$2){i[f++]=$node}}$node=i[i.length+d];if($node&&!b[$node.__id]){h[a++]=$node;b[$node.__id]=true}}}else{for(j=0,n=m.length;j<n;j++){$node=m[j];while(($node=$node.__parent===null?null:$node.getParent())){if((l?$node[o]===l:true)&&(g||$node.getNs()===k)&&$2){if(d==null||!--d){if(!b[$node.__id]){h[a++]=$node;b[$node.__id]=true}if(d===0){break}}}}}}h.reverse();return h};jsl.Node.__qp_findP=function(j,c){var f,b,a,g,k,h,i,l,d,$node,$1,$2;$1=1;f=[];b=0;if(!c.sel||c.ix===1||c.ix===-1){a={};d=!c.prefix;h=c.prefix?c.ns[c.prefix]:null;l=c.tnode&&!c.ttype?"__lname":"__type";if(c.tnode==="node"){i=null}else{if(c.ttype){i=c.tnode}else{if(c.tnode){i=c.lname}else{if(c.ts.hasOwnProperty("default")){i=c.ts["default"]}}}}for(g=0,k=j.length;g<k;g++){$node=j[g];$node=$node.__parent===null?null:$node.getParent();if($node&&!a[$node.__id]&&(d||$node.getNs()===h)&&(i?$node[l]===i:true)&&$2){f[b++]=$node;a[$node.__id]=true}}}return f};jsl.Node.__qp_findS1=function(l,h){var j,n,d,p,f,o,s,k,i,m,u,a,r,g,t,c,b,q,$node,$1,$2;$1=1;j=[];p={};n=0;f=arguments[2];u=h.ix;q=!h.prefix;o=h.prefix?h.ns[h.prefix]:null;c=h.tnode&&!h.ttype?"__lname":"__type";if(h.tnode==="node"){t=null}else{if(h.ttype){t=h.tnode}else{if(h.tnode){t=h.lname}else{if(h.ts.hasOwnProperty("default")){t=h.ts["default"]}}}}if(u<0){for(s=0,k=l.length;s<k;s++){$node=l[s];i=$node.__parent===null?null:$node.getParent();a=i?(i.__childs||i.__drv_getChildren()):null;if(a){m=[];d=0;b=$node.getDefaultNs(true);for(r=0,g=$node.getChildIndex();r<g;r++){$node=a[r].__drv?a[r]:i.__drv_getChild(r);if((t?$node[c]===t:true)&&(q||o===($node.__pfx?$node.getNs():b))&&$2){m[d++]=$node}}$node=m[m.length+u];if($node&&!p[$node.__id]){j[n++]=$node;p[$node.__id]=true}}}}else{for(s=0,k=l.length;s<k;s++){$node=l[s];i=$node.__parent===null?null:$node.getParent();a=i?(i.__childs||i.__drv_getChildren()):null;if(a){b=$node.getDefaultNs(true);for(r=0,g=$node.getChildIndex();r<g;r++){$node=a[r].__drv?a[r]:i.__drv_getChild(r);if((t?$node[c]===t:true)&&(q||o===($node.__pfx?$node.getNs():b))&&$2){if(u==null||!--u){if(!p[$node.__id]){j[n++]=$node;p[$node.__id]=true}if(u===0){break}}}}}}}return j};jsl.Node.__qp_findS2=function(l,h){var j,n,d,p,f,o,s,k,i,m,u,a,r,g,t,c,b,q,$node,$1,$2;$1=1;j=[];p={};n=0;f=arguments[2];u=h.ix;q=!h.prefix;o=h.prefix?h.ns[h.prefix]:null;c=h.tnode&&!h.ttype?"__lname":"__type";if(h.tnode==="node"){t=null}else{if(h.ttype){t=h.tnode}else{if(h.tnode){t=h.lname}else{if(h.ts.hasOwnProperty("default")){t=h.ts["default"]}}}}if(u<0){for(s=0,k=l.length;s<k;s++){$node=l[s];i=$node.__parent===null?null:$node.getParent();a=i?(i.__childs||i.__drv_getChildren()):null;if(a){m=[];d=0;b=$node.getDefaultNs(true);for(r=$node.getChildIndex()+1,g=a.length;r<g;r++){$node=a[r].__drv?a[r]:i.__drv_getChild(r);if((t?$node[c]===t:true)&&(q||o===($node.__pfx?$node.getNs():b))&&$2){m[d++]=$node}}$node=m[m.length+u];if($node&&!p[$node.__id]){j[n++]=$node;p[$node.__id]=true}}}}else{for(s=0,k=l.length;s<k;s++){$node=l[s];i=$node.__parent===null?null:$node.getParent();a=i?(i.__childs||i.__drv_getChildren()):null;if(a){b=$node.getDefaultNs(true);for(r=$node.getChildIndex()+1,g=a.length;r<g;r++){$node=a[r].__drv?a[r]:i.__drv_getChild(r);if((t?$node[c]===t:true)&&(q||o===($node.__pfx?$node.getNs():b))&&$2){if(u==null||!--u){if(!p[$node.__id]){j[n++]=$node;p[$node.__id]=true}if(u===0){break}}}}}}}return j};jsl.Node.__qp_findC=function(k,g){var i,m,d,o,n,r,j,t,h,l,a,q,f,s,c,b,p,$node,$1,$2;$1=1;i=[];o={};m=0;t=g.ix;p=!g.prefix;n=g.prefix?g.ns[g.prefix]:null;c=g.tnode&&!g.ttype?"__lname":"__type";if(g.tnode==="node"){s=null}else{if(g.ttype){s=g.tnode}else{if(g.tnode){s=g.lname}else{if(g.ts.hasOwnProperty("default")){s=g.ts["default"]}}}}if(t<0){for(r=0,j=k.length;r<j;r++){h=k[r];a=h.__childs||h.__drv_getChildren();if(a){l=[];d=0;b=h.getDefaultNs(true);for(q=0,f=a.length;q<f;q++){$node=a[q];$node=$node.__drv?$node:h.__drv_getChild(q);if((s?$node[c]===s:true)&&(p||n===($node.__pfx?$node.getNs():b))&&$2){l[d++]=$node}}$node=l[l.length+t];if($node&&!o[$node.__id]){i[m++]=$node;o[$node.__id]=true}}}}else{for(r=0,j=k.length;r<j;r++){h=k[r];a=h.__childs||h.__drv_getChildren();if(a){b=h.getDefaultNs(true);for(q=0,f=a.length;q<f;q++){$node=a[q];$node=$node.__drv?$node:h.__drv_getChild(q);if((s?$node[c]===s:true)&&(p||n===($node.__pfx?$node.getNs():b))&&$2){if(t==null||!--t){if(!o[$node.__id]){i[m++]=$node;o[$node.__id]=true}if(t===0){break}}}}}}}return i};jsl.Node.__qp_findD=function(j,d){var g,l,c,n,m,r,i,k,u,h,t,b,f,v,s,q,o,a,p,$node,$1,$2;$1=1;g=[];n={};l=0;p=!d.prefix;m=d.prefix?d.ns[d.prefix]:null;b=d.tnode&&!d.ttype?"__lname":"__type";h=d.ix;if(d.tnode==="node"){t=null}else{if(d.ttype){t=d.tnode}else{if(d.tnode){t=d.lname}else{if(d.ts.hasOwnProperty("default")){t=d.ts["default"]}}}}for(r=0,i=j.length;r<i;r++){$node=j[r];q=[];k=[];c=0;o=true;$node.getChildIndex();while($node){f=o?(o=false,null):($node.__parent===null?null:$node.getParent());v=$node.__childs||$node.__drv_getChildren();u=$node.__cix+1;if(v.length){$node=v[0].__drv?v[0]:$node.__drv_getChild(0);$node.__cix=0;s=f&&f.__childs[u];if(s){s=s.__drv?s:f.__drv_getChild(u);s.__cix=u;q.unshift(s)}}else{$node=f&&f.__childs[u];if($node){$node=$node.__drv?$node:f.__drv_getChild(u),$node.__cix=u}else{$node=q.shift()}}if($node){if(h<0){if((t?$node[b]===t:true)&&(p||$node.getNs()===m)&&$2){k[c++]=$node}}else{if((t?$node[b]===t:true)&&(p||$node.getNs()===m)&&$2){if(h==null||!--h){if(!n[$node.__id]){g[l++]=$node;n[$node.__id]=true}if(h===0){break}}}}}}if(h<0){$node=k[k.length+h];if($node&&!n[$node.__id]){g[l++]=$node;n[$node.__id]=true}}}return g};jsl.setMessage("e.date.DstNotUsed","DST not used in the year of the date");jsl.setMessage("e.date.IncompleteDate","<$> incomplete date");jsl.setMessage("e.date.InconsistentDate","<$> inconsistent date");jsl.setMessage("e.node.qp.AxisNotDefined",\'<qpath> Axis "$" not defined at index $\');jsl.setMessage("e.node.qp.NsNotDefined",\'<qpath> Namespace not defined for the prefix "$" at index $\');jsl.setMessage("e.node.qp.UnexpectedToken","<qpath> Unexpected token at index $");jsl.setMessage("e.node.qp.ZeroIndex","<qpath> found bad selector at index $, expected i > 0");jsl.setMessage("e.node.qp.BadSelector","<qpath> syntax error on selector starting at index $");jsl.setMessage("e.node.qp.BadExpVarName",\'<qpath> invalid variable name: "$"\');jsl.setMessage("e.node.qp.QtNotDefined",\'<qpath> Type "$" not defined\');jsl.setMessage("e.node.qp.BadExp",\'<qpath> syntax error on expression: "$"\');jsl.setMessage("e.node.qp.BadRtExp",\'<qpath> runtime error on expression: "$"\')};'