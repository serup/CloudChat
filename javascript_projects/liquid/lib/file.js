	
	/*
		Copyright (c) 2010-2013 Liquid Working Group. All Rights Reserved.
		Available on MIT license (see: http://www.jsliquid.com/license.html)
	*/
	
	jsl.__ploads.file='try{jsl}catch(e){throw Error("liquid(error) >> [File] library not loaded - cause: jsl core not found")}if(!jsl||jsl.__magic!=="J345NN48H756PQ56"){throw Error("liquid(error) >> [File] library not loaded - cause: jsl core not found (bad magic number)")}if(!jsl.__ready){throw Error("liquid(error) >> [File] library not loaded - cause: previous jsl core error")}if(jsl.__libs.file){jsl.console.warn("[File] library already loaded")}if(!jsl.__libs.file){jsl.__libs.push("file");jsl.__libs.file=true;jsl.Class("jsl.File",{st___ix:0,st___tid:0,__ix:0,__f:null,__nf:null,File:function(b){var a;/*!*/if(arguments.length>1){throw jsl.ParamError()}/*!*/if(arguments.length){this.__f=jsl.File.__path(b)}else{a=jsl.Dir.getTmpDir();/*!*/if(!a.exists()){throw jsl.ParamError("dir.TmpNotFound",[a])}/*!*/this.__f=a+"/f"+jsl.File.__tid++}},st_create:function(c,a){var b;/*!*/if(arguments.length>2){throw jsl.ParamError()}/*!*/if(arguments.length){b=new this(this.__path(c))}else{b=new this}this.__create(b+"",arguments.length===2?a:false);return b},st_remove:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/this.__remove(a);return new this(a)},st_rename:function(c,b,a){/*!*/if(arguments.length<2||arguments.length>3){throw jsl.ParamError()}/*!*/return new this(this.__rename.apply(this,arguments))},st_read:function(a,b){/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}/*!*/if(arguments.length===1){return this.__read(a,0)}else{return this.__read(a,0,b)}},st_write:function(b,a,c){/*!*/if(arguments.length<2||arguments.length>3){throw jsl.ParamError()}/*!*/if(arguments.length===2){this.__write(b,a,0)}else{this.__write(b,a,0,c)}return new this(b)},st_append:function(b,a,c){/*!*/if(arguments.length<2||arguments.length>3){throw jsl.ParamError()}/*!*/this.__append.apply(this,arguments);return new this(b)},st_compare:function(b,a){/*!*/if(arguments.length!==2){throw jsl.ParamError()}/*!*/return this.__compare(b,this.__path(a,"path2"))},st_truncate:function(b,a){/*!*/if(arguments.length!==2){throw jsl.ParamError()}/*!*/this.__truncate(b,a);return new this(b)},st_copy:function(c,b,a){/*!*/if(arguments.length<2||arguments.length>3){throw jsl.ParamError()}/*!*/if(arguments.length===2){this.__copy(c,this.__path(b,"path2"))}else{this.__copy(c,this.__path(b,"path2"),a)}return new this(b)},st_move:function(c,b,a){/*!*/if(arguments.length<2||arguments.length>3){throw jsl.ParamError()}/*!*/if(arguments.length===2){this.__move(c,this.__path(b,"path2"))}else{this.__move(c,this.__path(b,"path2"),a)}return new this(b)},st_add:function(b,a){/*!*/if(arguments.length!==2){throw jsl.ParamError()}/*!*/this.__add(b,this.__path(a,"path2"));return new this(b)},st_size:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/return this.__size(a)},st_exists:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/return !!this.__exists(a)},st_isDir:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/return this.__exists(a)===2},st_isFile:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/return this.__exists(a)===1},st_isEmpty:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/return !this.__size(a)},st_getName:function(a){/*!*/if(arguments.length>1){throw jsl.ParamError()}/*!*/return arguments.length?this.__getName(a):jsl.Object.getName(this)},st_getPath:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/return this.__getPath(a)},st_getNativePath:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/return this.__getNativePath(a)},st_getParent:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/return this.__getParent(a)},create:function(a){/*!*/if(arguments.length>1){throw jsl.ParamError()}/*!*/if(arguments.length){jsl.File.__create(this.__f,a)}else{jsl.File.__create(this.__f)}this.__ix=0;return this},remove:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/jsl.File.__remove(this.__f);return this},rename:function(b,a){/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}/*!*/if(arguments.length===1){return new jsl.File(jsl.File.__rename(this.__f,b))}else{return new jsl.File(jsl.File.__rename(this.__f,b,a))}},read:function(b){var a;/*!*/if(arguments.length>1){throw jsl.ParamError()}/*!*/if(!arguments.length){a=jsl.File.__read(this.__f,this.__ix)}else{a=jsl.File.__read(this.__f,this.__ix,b)}if(arguments.length){this.__ix+=b}else{if(a){this.__ix+=a.getSize()}}return a},write:function(b,c){var a;/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}/*!*/if(arguments.length===1){jsl.File.__write(this.__f,b,this.__ix)}else{jsl.File.__write(this.__f,b,this.__ix,c)}if(jsl.isNumber(b)){a=4}else{if(b instanceof jsl.Data.Blob){a=b.getSize()}else{a=b.length}}if(arguments.length===2&&c<a){a=c}this.__ix+=a;return this},append:function(a,b){/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}/*!*/if(arguments.length===1){jsl.File.__append(this.__f,a)}else{jsl.File.__append(this.__f,a,b)}return this},compare:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/return jsl.File.__compare(this.__f,a)},truncate:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/jsl.File.__truncate(this.__f,a);return this},copy:function(b,a){/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}/*!*/if(arguments.length===1){jsl.File.__copy(this.__f,b)}else{jsl.File.__copy(this.__f,b,a)}return new jsl.File(b)},move:function(b,a){/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}/*!*/if(arguments.length===1){return jsl.File.__move(this.__f,b)}else{return jsl.File.__move(this.__f,b,a)}return new jsl.File(b)},add:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/jsl.File.__add(this.__f,a);return this},size:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return jsl.File.__size(this.__f)},exists:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return !!jsl.File.__exists(this.__f)},isDir:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return jsl.File.__exists(this.__f)===2},isFile:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return jsl.File.__exists(this.__f)===1},isEmpty:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return !jsl.File.__size(this.__f)},getName:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return jsl.File.__getName(this.__f)},getPath:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return jsl.File.__getPath(this.__f)},getNativePath:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return jsl.File.__getNativePath(this.__f)},getParent:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return jsl.File.__getParent(this.__f)},rseek:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(a,"i","n");if(jsl.File.__exists(this.__f)!==1){throw jsl.ParamError("file.NotFound")}if(this.__ix+a<0){throw jsl.ParamError("file.BadSeek")}/*!*/this.__ix+=a;return this},seek:function(a){var b;/*!*/if(arguments.length>1){throw jsl.ParamError()}if(arguments.length){jsl.validate(a,"i","ix")}if(jsl.File.__exists(this.__f)!==1){throw jsl.ParamError("file.NotFound")}/*!*/b=a>=0?a:jsl.File.__size(this.__f)+(a||0);/*!*/if(b<0){throw jsl.ParamError("file.BadSeek")}/*!*/this.__ix=b;return this},getIndex:function(){/*!*/if(arguments.length){throw jsl.ParamError()}if(jsl.File.__exists(this.__f)!==1){throw jsl.ParamError("file.NotFound")}/*!*/return this.__ix},toString:function(){return this.__f}});jsl.File.__create=function(g,a){var c,b,d;c=this.__path(g);b=this.__exists(c);/*!*/if(b===2){throw jsl.ParamError("file.OpError",[c])}if(b&&!+a){throw jsl.ParamError("file.CreationError",[c])}d=this.__getParent(c);if(this.__exists(d)!==2){throw jsl.ParamError("dir.PathNotFound",[d])}if(arguments.length===2){jsl.validate(a,"b","overwrite")}/*!*/if(b){this.__remove(c)}this.__ni_create(this.__getNativePath(c))};jsl.File.__remove=function(c){var b,a;b=this.__path(c);a=this.__exists(b);/*!*/if(a===2){throw jsl.ParamError("file.OpError",[b])}/*!*/if(a){this.__ni_remove(this.__getNativePath(b))}};jsl.File.__rename=function(h,c,b){var g,j,d,a;g=this.__path(h);/*!*/d=this.__exists(g);if(!d){throw jsl.ParamError("file.NotFound",[g])}if(d===2){throw jsl.ParamError("file.OpError",[g])}jsl.validate(c,\'sr/^[^\\\\\\\\\\\\/:*?"<>|%]+$\',"name");/*!*/a=c.replace(/^\\s+|\\s+$/g,"");/*!*/if(a.match(/^\\.{1,2}$/)){throw jsl.ParamError("BadValue:name")}if(arguments.length===3){jsl.validate(b,"b","overwrite")}/*!*/j=this.__getParent(g)+"/"+a;if(this.__getName(g)!==a){d=this.__exists(j);/*!*/if(d===1&&!+b){throw jsl.ParamError("file.RenameError",[g])}if(d===2){throw jsl.ParamError("file.RenameError2",[g])}/*!*/if(d===1){this.__remove(j)}this.__ni_rename(this.__getNativePath(g),this.__getNativePath(j))}return j};jsl.File.__read=function(j,b,k){var g,c,h,a,d;g=this.__path(j);/*!*/c=this.__exists(g);if(!c){throw jsl.ParamError("file.NotFound",[g])}if(c===2){throw jsl.ParamError("file.OpError",[g])}if(arguments.length===3){jsl.validate(k,"i+","n")}/*!*/jsl.Data||jsl.require("data");if(k!=0){h=this.__size(g);a=h-b;if(a>0){if(k&&k<a){a=k}d=new jsl.Data.Blob;d.__bs=this.__ni_read(this.__getNativePath(g),b,a)}}return d||null};jsl.File.__write=function(j,g,a,k){var d,c,b;d=this.__path(j);/*!*/c=this.__exists(d);if(!c){throw jsl.ParamError("file.NotFound",[d])}if(c===2){throw jsl.ParamError("file.OpError",[d])}jsl.validate(g,"t[i,s,al,Blob]","data");if(arguments.length===4){jsl.validate(k,"i+","n")}if(jsl.isNumber(g)&&k>4){throw jsl.ParamError("BadValue:n")}/*!*/jsl.Data||jsl.require("data");if(k!=0){try{if(jsl.isNumber(g)){b=[(g&255),(g&65280)>>>8,(g&16711680)>>>16,g>>>24]}else{b=jsl.Data.Blob.toArray(g)}}catch(h){throw h instanceof jsl.ParamError?jsl.ParamError("BadValue:data"):h}if(b.length){if(k){b=b.slice(0,k)}this.__ni_write(this.__getNativePath(d),a,b)}}};jsl.File.__append=function(d,b,f){var a;if(arguments.length===2){a=[d,b,this.__size(d)]}else{a=[d,b,this.__size(d),f]}try{this.__write.apply(this,a)}catch(c){throw c instanceof jsl.ParamError?c.clearStackTrace():c}};jsl.File.__compare=function(k,j){var f,c,d,a,g,i,h;f=this.__path(k);c=this.__path(j);d=this.__exists(f);a=this.__exists(c);/*!*/if(d===2){throw jsl.ParamError("file.OpError",[f])}if(a===2){throw jsl.ParamError("file.OpError",[c])}/*!*/i=this.getNativePath(f);h=this.getNativePath(c);if(!d||!a){g=false}else{if(i===h){g=true}else{g=this.__read(f,0)+""===this.__read(c,0)+""}}return g};jsl.File.__truncate=function(g,b){var c,a,d;c=this.__path(g);d=this.__size(c);/*!*/a=this.__exists(c);if(!a){throw jsl.ParamError("file.NotFound",[c])}if(a===2){throw jsl.ParamError("file.OpError",[c])}jsl.validate(b,"i+","size");if(b>d){throw jsl.ParamError("BadValue:size")}/*!*/if(b<d){this.__ni_truncate(this.__getNativePath(c),b)}};jsl.File.__copy=function(g,f,b){var a,h,d,c;a=this.__path(g);h=this.__path(f);d=this.__exists(a);c=this.__exists(h);/*!*/if(!d){throw jsl.ParamError("file.NotFound",[a])}if(d===2){throw jsl.ParamError("file.OpError",[a])}if(c===1&&!+b){throw jsl.ParamError("file.CopyError",[a])}if(c===2){throw jsl.ParamError("file.CopyError2",[a])}if(arguments.length===3){jsl.validate(b,"b","overwrite")}/*!*/if(c){this.__remove(h)}this.__ni_copy(this.__getNativePath(a),this.__getNativePath(h))};jsl.File.__move=function(g,f,b){var a,h,d,c;a=this.__path(g);h=this.__path(f);d=this.__exists(a);c=this.__exists(h);/*!*/if(!d){throw jsl.ParamError("file.NotFound",[a])}if(d===2){throw jsl.ParamError("file.OpError",[a])}if(c===1&&!+b){throw jsl.ParamError("file.MoveError",[h])}if(c===2){throw jsl.ParamError("file.MoveError2",[h])}if(arguments.length===3){jsl.validate(b,"b","overwrite")}/*!*/if(c){this.__remove(h)}this.__ni_move(this.__getNativePath(a),this.__getNativePath(h))};jsl.File.__add=function(f,d){var a,g,c,b;a=this.__path(f);g=this.__path(d);c=this.__exists(a);b=this.__exists(g);/*!*/if(!c){throw jsl.ParamError("file.NotFound",[a])}if(c===2){throw jsl.ParamError("file.OpError",[a])}if(b===2){throw jsl.ParamError("file.AddError",[g])}/*!*/if(b){this.__ni_add(this.__getNativePath(a),this.__getNativePath(g))}};jsl.File.__size=function(c){var b,a;b=this.__path(c);/*!*/a=this.__exists(b);if(!a){throw jsl.ParamError("file.NotFound",[b])}if(a===2){throw jsl.ParamError("file.OpError",[b])}/*!*/return this.__ni_size(this.__getNativePath(b))};jsl.File.__exists=function(a){return this.__ni_exists(this.__getNativePath(a))};jsl.File.__isEmpty=function(a){return !this.__size(a)};jsl.File.__getName=function(c){var b,a;b=this.__path(c);a=b.split("/");return(a[a.length-1]||a[a.length-2]||"/").replace(/:+$/,"")};jsl.File.__getPath=function(a){return this.__path(a)};jsl.File.__getNativePath=function(c){var b,a;b=this.__path(c);if(b.indexOf("::")!==-1){a=b.split("::");a=jsl.Dir.getRoot(a[0])+(a[1]||"")}else{return a=b}return a};jsl.File.__getParent=function(b){var a;a=this.__path(b);a=a.split("/").slice(0,-1).join("/");return a||""};jsl.Class("jsl.Dir",{Dir:function(b){var a;/*!*/if(arguments.length>1){throw jsl.ParamError()}/*!*/if(arguments.length){this.__d=jsl.Dir.__path(b)}else{a=jsl.Dir.getTmpDir();/*!*/if(!a.exists()){throw jsl.ParamError("dir.TmpNotFound",[a])}/*!*/this.__d=a+"/d"+jsl.Dir.__tid++}},st___re1:\'sr/^[^\\\\\\\\\\\\/:*?"<>|%]+$\',st___cwd:null,st___tmp:null,st___init:false,st___rs:{},st___tid:0,st_create:function(c,b){var a;/*!*/if(arguments.length>2){throw jsl.ParamError()}/*!*/if(arguments.length){a=new this(this.__path(c))}else{a=new this}this.__create(a+"",arguments.length===2?b:false);return a},st_remove:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/this.__remove(a);return new this(a)},st_clear:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/this.__clear(a);return new this(a)},st_read:function(b,a){/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}/*!*/return this.__read.apply(this,arguments)},st_walk:function(c,b,a){/*!*/if(arguments.length<2||arguments.length>3){throw jsl.ParamError()}/*!*/return this.__walk.apply(this,arguments)},st_rename:function(c,b,a){/*!*/if(arguments.length<2||arguments.length>3){throw jsl.ParamError()}/*!*/return new this(this.__rename.apply(this,arguments))},st_move:function(c,b,a){/*!*/if(arguments.length<2||arguments.length>3){throw jsl.ParamError()}/*!*/if(arguments.length===2){this.__move(c,this.__path(b,"path2"))}else{this.__move(c,this.__path(b,"path2"),a)}return new this(b)},st_copy:function(c,b,a){/*!*/if(arguments.length<2||arguments.length>3){throw jsl.ParamError()}/*!*/if(arguments.length===2){this.__copy(c,this.__path(b,"path2"))}else{this.__copy(c,this.__path(b,"path2"),a)}return new this(b)},st_merge:function(b,a){/*!*/if(arguments.length!==2){throw jsl.ParamError()}/*!*/this.__merge(b,this.__path(a,"path2"));return new this(a)},st_search:function(c,a,b){/*!*/if(arguments.length<2||arguments.length>3){throw jsl.ParamError()}/*!*/return this.__search.apply(this,arguments)},st_contains:function(b,a){/*!*/if(arguments.length!==2){throw jsl.ParamError()}/*!*/return this.__contains(b,a)},st_exists:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/return !!this.__exists(a)},st_isFile:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/return this.__exists(a)===1},st_isDir:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/return this.__exists(a)===2},st_isEmpty:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/return this.__isEmpty(a)},st_getName:function(a){/*!*/if(arguments.length>1){throw jsl.ParamError()}/*!*/return arguments.length?this.__getName(a):jsl.Object.getName(this)},st_getPath:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/return this.__getPath(a)},st_getNativePath:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/return this.__getNativePath(a)},st_getParent:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/return this.__getParent(a)},st_getTmpDir:function(){var a;/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/if(!this.__tmp){a=this.getWorkingDir()+"/tmp";this.__tmp=a;/*!*/if(this.__ni_exists(a)===1){throw jsl.ConfigError("dir.TmpCreateError",[a])}/*!*/}if(!this.__init){this.remove(this.__tmp);this.create(this.__tmp);this.__init=true}return new this(this.__tmp)},st_setTmpDir:function(c){var f,a,b;/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/f=this.__path(c);/*!*/a=this.__exists(f);if(a===1){throw jsl.ParamError("dir.OpError",[f])}b=this.__getParent(f);if(b&&!this.__exists(b)){throw jsl.ParamError("dir.NotFound",[b])}/*!*/this.__tmp=f;return new this(f)},st_getWorkingDir:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/if(!this.__cwd){this.__cwd=this.__ni_cwd().replace(/\\\\/g,"/")}return new this(this.__cwd)},st_setWorkingDir:function(b){var c,a;/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/c=this.__path(b);/*!*/a=this.__exists(c);if(!a){throw jsl.ParamError("dir.NotFound",[c])}if(a===1){throw jsl.ParamError("dir.OpError",[c])}/*!*/this.__cwd=c;return new this(c)},st_setRoot:function(a,d){var c,b;/*!*/if(arguments.length!==2){throw jsl.ParamError()}jsl.validate(a,this.__re1,"name");/*!*/c=this.__getPath(d);b=this.__getNativePath(d);this.__rs[a.toLowerCase()]=b;return new this(c)},st_getRoot:function(b){var a;/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(b,this.__re1,"name");/*!*/a=b.toLowerCase();return this.__rs[a]?new this(this.__rs[a]):null},create:function(a){/*!*/if(arguments.length>1){throw jsl.ParamError()}/*!*/if(arguments.length){jsl.Dir.__create(this.__d,a)}else{jsl.Dir.__create(this.__d)}return this},remove:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/jsl.Dir.__remove(this.__d);return this},clear:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/jsl.Dir.__clear(this.__d);return this},read:function(a){/*!*/if(arguments.length>1){throw jsl.ParamError()}/*!*/if(arguments.length){return jsl.Dir.__read(this.__d,a)}else{return jsl.Dir.__read(this.__d)}},walk:function(b,a){/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}/*!*/if(arguments.length===1){return jsl.Dir.__walk(this.__d,b)}else{return jsl.Dir.__walk(this.__d,b,a)}},rename:function(b,a){var c;/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}/*!*/if(arguments.length===1){c=jsl.Dir.__rename(this.__d,b)}else{c=jsl.Dir.__rename(this.__d,b,a)}return new jsl.Dir(c)},move:function(b,a){/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}/*!*/if(arguments.length===1){jsl.Dir.__move(this.__d,b)}else{jsl.Dir.__move(this.__d,b,a)}return new jsl.Dir(b)},copy:function(b,a){/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}/*!*/if(arguments.length===1){jsl.Dir.__copy(this.__d,b)}else{jsl.Dir.__copy(this.__d,b,a)}return new jsl.Dir(b)},merge:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/jsl.Dir.__merge(this.__d,a);return new jsl.Dir(a)},search:function(a,b){/*!*/if(!arguments.length||arguments.length>2){throw jsl.ParamError()}/*!*/if(arguments.length===1){return jsl.Dir.__search(this.__d,a)}else{return jsl.Dir.__search(this.__d,a,b)}},contains:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/return jsl.Dir.__contains(this.__d,a)},exists:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return !!jsl.Dir.__exists(this.__d)},isFile:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return jsl.Dir.__exists(this.__d)===1},isDir:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return jsl.Dir.__exists(this.__d)===2},isEmpty:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return jsl.Dir.__isEmpty(this.__d)},getName:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return jsl.Dir.__getName(this.__d)},getPath:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return jsl.Dir.__getPath(this.__d)},getNativePath:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return jsl.Dir.__getNativePath(this.__d)},getParent:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return jsl.Dir.__getParent(this.__d)},toString:function(){return this.__d}});jsl.Dir.__create=function(f,a){var g,b,c;g=this.__path(f);b=this.__exists(g);/*!*/if(b===1){throw jsl.ParamError("dir.OpError",[g])}if(arguments.length===2){jsl.validate(a,"b","overwrite")}if(b===2&&!+a){throw jsl.ParamError("dir.CreationError",[g])}c=this.__getParent(g);if(c&&!this.__exists(c)){throw jsl.ParamError("dir.PathNotFound",[c])}/*!*/if(b){this.__remove(g)}this.__ni_create(this.__getNativePath(g))};jsl.Dir.__remove=function(b){var c,a;c=this.__path(b);a=this.__exists(c);/*!*/if(a===1){throw jsl.ParamError("dir.OpError",[c])}if(!this.__getParent(c)){throw jsl.ParamError("OperationDenied",[c])}/*!*/if(a){this.__ni_remove(this.__getNativePath(c))}};jsl.Dir.__clear=function(h){var j,g,f;j=this.__path(h);g=this.__exists(j);/*!*/if(!g){throw jsl.ParamError("dir.NotFound",[j])}if(g===1){throw jsl.ParamError("dir.OpError",[j])}/*!*/f=this.__read(j);for(var c=0,b=f.length;c<b;c++){f[c].remove()}};jsl.Dir.__read=function(w,g){var t,n,k,s,p,o,j,u,c,q,m;t=this.__path(w);n=this.__exists(t);/*!*/if(!n){throw jsl.ParamError("dir.NotFound",[t])}if(n===1){throw jsl.ParamError("dir.OpError",[t])}if(arguments.length===2){if(jsl.isString(g)){jsl.validate(g,"s(dir,file)","filter")}else{if(!jsl.isRegExp(g)){jsl.validate(g,"f","filter")}}}/*!*/k=jsl.Dir;s=jsl.File;if(g=="file"){p=1}else{if(g=="dir"){p=2}else{if(g instanceof RegExp){p=3}else{if(g){p=4}}}}o=this.__ni_read(this.__getNativePath(t));j=[];u=0;t+="/";for(var v=0,h=o.length;v<h;v++){c=t+o[v];q=this.isDir(c)?k:s;if(!p){j[v]=new q(c)}else{if(p===1){if(q===s){j[u++]=new q(c)}}else{if(p===2){if(q===k){j[u++]=new q(c)}}else{if(p===3){if(o[v].search(g)!==-1){j[u++]=new q(c)}}else{m=new q(c);try{if(g(m)){j[u++]=m}}catch(r){throw jsl.ParamError("BadScript:filter",r)}}}}}}return j};jsl.Dir.__walk=function(q,g,p){var m,h,j,n,c;try{m=this.__path(q);/*!*/h=this.__exists(m);if(!h){throw jsl.ParamError("dir.NotFound",[m])}if(h===1){throw jsl.ParamError("dir.OpError",[m])}jsl.validate(g,"f","action");if(arguments.length===3){jsl.validate(p,"b","includeSelf")}/*!*/if(+p&&!arguments.callee.__i){n=g(new jsl.Dir(m));h=this.__ni_exists(m)}arguments.callee.__i++;if(!n&&(!+p||h===2)){j=this.__read(m);for(var o=0,f=j.length;o<f&&!n;o++){c=j[o].getNativePath();try{n=g(j[o])}catch(k){throw jsl.ScriptError("BadScript:action",k)}if(!n&&this.__ni_exists(c)===2){n=this.__walk(c,g)}}}arguments.callee.__i--;return !!n}catch(k){arguments.callee.__i=0;throw k}};jsl.Dir.__rename=function(h,c,b){var k,f,a,g,j;k=this.__path(h);j=this.__getNativePath(k);f=this.__exists(k);/*!*/if(!f){throw jsl.ParamError("dir.NotFound",[k])}if(f===1){throw jsl.ParamError("dir.OpError",[k])}if(!this.__getParent(j)){throw jsl.ParamError("OperationDenied",[k])}jsl.validate(c,this.__re1,"name");if(arguments.length===3){jsl.validate(b,"b","overwrite")}/*!*/a=c.replace(/^\\s+|\\s+$/g,"");g=this.__getParent(k)+"/"+a;if(this.__getName(j)!==a){f=this.__exists(g);/*!*/if(f===1){throw jsl.ParamError("dir.OpError",[k])}if(f===2&&!+b){throw jsl.ParamError("dir.RenameError",[k])}/*!*/if(f){this.__remove(g)}this.__ni_rename(j,this.__getNativePath(g))}return g};jsl.Dir.__move=function(l,j,g){var h,a,f,b,c,k;h=this.__path(l);a=this.__path(j);c=this.__getNativePath(h);k=this.__getNativePath(a);if(c!==k){f=this.__exists(h);/*!*/if(!f){throw jsl.ParamError("dir.NotFound",[h])}if(f===1){throw jsl.ParamError("dir.OpError",[h])}f=this.__exists(a);if(f===1){throw jsl.ParamError("dir.MoveError",[h])}if(f===2&&!+g){throw jsl.ParamError("dir.MoveError2",[h])}b=this.__getParent(k);if(!this.__exists(b)){throw jsl.ParamError("dir.PathNotFound",[a])}if(arguments.length===3){jsl.validate(g,"b","overwrite")}while(b){if(c===b){throw jsl.ParamError("OperationDenied:move")}b=jsl.Dir.getParent(b)}/*!*/if(f){this.__remove(a)}this.__ni_move(c,k)}};jsl.Dir.__copy=function(l,j,g){var h,a,f,b,c,k;h=this.__path(l);a=this.__path(j);c=this.__getNativePath(h);k=this.__getNativePath(a);if(c!==k){f=this.__exists(h);/*!*/if(!f){throw jsl.ParamError("dir.NotFound",[h])}if(f===1){throw jsl.ParamError("dir.OpError",[h])}f=this.__exists(a);if(f===1){throw jsl.ParamError("dir.CopyError",[h])}if(f===2&&!+g){throw jsl.ParamError("dir.CopyError2",[h])}b=this.__getParent(k);if(!this.__exists(b)){throw jsl.ParamError("dir.PathNotFound",[a])}if(arguments.length===3){jsl.validate(g,"b","overwrite")}while(b){if(c===b){throw jsl.ParamError("OperationDenied:move")}b=jsl.Dir.getParent(b)}/*!*/if(f){this.__remove(a)}this.__ni_copy(c,k)}};jsl.Dir.__merge=function(u,q){var n,b,k,m,j,t,s,r,h,g,c;n=this.__path(u);b=this.__path(q);j=this.getNativePath(n);t=this.getNativePath(b);/*!*/k=this.__exists(n);if(!k){throw jsl.ParamError("dir.NotFound",[n])}if(k===1){throw jsl.ParamError("dir.OpError",[n])}k=this.__exists(b);if(!k){throw jsl.ParamError("dir.NotFound",[b])}if(k===1){throw jsl.ParamError("dir.OpError",[b])}/*!*/if(j!==t){/*!*/c=jsl.Dir.getParent(t);while(c){if(j===c){throw jsl.ParamError("OperationDenied:move")}c=jsl.Dir.getParent(c)}/*!*/m=this.__ni_read(j);j=j+"/";t=t+"/";for(var o=0,f=m.length;o<f;o++){s=j+m[o];r=t+m[o];h=this.__ni_exists(s);g=this.__ni_exists(r);if(h===2){if(g===2){this.__merge(s,r)}else{if(g===1){jsl.File.__remove(r)}this.__copy(s,r)}}else{if(g===2){this.__ni_remove(r)}jsl.File.__copy(s,r,true)}}}};jsl.Dir.__search=function(n,A,t){var w,u,h,j,r,p,y,v,z,s,x,k,m,q,f;w=this.__path(n);r=A instanceof RegExp;/*!*/u=this.__ni_exists(w);if(!u){throw jsl.ParamError("dir.NotFound",[w])}if(u===1){throw jsl.ParamError("dir.OpError",[w])}if(!r){jsl.validate(A,"s+","name")}if(arguments.length===3){jsl.validate(t,"b","global")}/*!*/j=this.__getNativePath(w);h=this.__ni_read(j);v=+t;j=j+"/";if(v){k=[];x=0;for(z=0,s=h.length;z<s;z++){p=j+h[z];u=this.__ni_exists(p);if(r){y=A.test(p)}else{y=p.indexOf(A)!==-1}if(y){k[x++]=u===1?new jsl.File(p):new jsl.Dir(p)}if(u===2){m=this.__search(p,A,true);if(m){k=k.concat(m)}}}f=k.length?k:null}else{for(z=0,s=h.length;z<s&&!q;z++){p=j+h[z];u=this.__ni_exists(p);if(r){y=A.test(p)}else{y=p.indexOf(A)!==-1}if(y){q=u===1?new jsl.File(p):new jsl.Dir(p)}else{if(u===2){q=this.__search(p,A)}}}f=q||null}return f};jsl.Dir.__contains=function(o,c){var j,g,h,n,k;j=this.__path(o);n=c instanceof RegExp;/*!*/g=this.__exists(j);if(!g){throw jsl.ParamError("dir.NotFound",[j])}if(g===1){throw jsl.ParamError("dir.OpError",[j])}if(!n){jsl.validate(c,"sr/^[^\\\\\\\\\\\\/]+$","name")}/*!*/h=this.__read(o);for(var m=0,f=h.length;m<f&&!k;m++){if(n){k=h[m].getName().search(c)!==-1}else{k=h[m].getName().indexOf(c)!==-1}}return !!k};jsl.Dir.__exists=function(a){return this.__ni_exists(this.__getNativePath(a))};jsl.Dir.__isEmpty=function(b){var c,a;c=this.__path(b);/*!*/a=this.__exists(c);if(!a){throw jsl.ParamError("dir.notFound",[c])}if(a===1){throw jsl.ParamError("dir.OpError",[c])}/*!*/return this.__ni_empty(this.__getNativePath(c))};jsl.Dir.__getName=jsl.File.__getName;jsl.Dir.__getPath=jsl.File.__getPath;jsl.Dir.__getNativePath=jsl.File.__getNativePath;jsl.Dir.__getParent=jsl.File.__getParent;jsl.File.__path=jsl.Dir.__path=function(j,d){var i,h,g;if(j instanceof jsl.File||j instanceof jsl.Dir){i=j+""}else{/*!*/jsl.validate(j,"s+",d||"path");/*!*/i=j.replace(/\\s*(\\\\|\\/)\\s*/g,"/").replace(/^\\s+|\\s+$/g,"");h=i.match(/^([^:]+)::/);if(h){g=jsl.Dir.getRoot(h[1]);/*!*/if(!g){throw jsl.ParamError("dir.RootNotDefined",[h[1]])}jsl.validate(i,\'sr/^[^:]+::(/[^\\\\\\\\\\\\/:*?"<>|%]+)*/?$\',[j])/*!*/}else{/*!*/if(!jsl.File.__ni_path_valid(i)){throw jsl.ParamError("BadValue",[j])}/*!*/if(jsl.File.__ni_path_relative(i)){i=(jsl.Dir.__cwd||jsl.Dir.getWorkingDir())+"/"+i.replace(/^\\//,"")}}if(i.indexOf(".")!==-1){i=i.split("/");for(var c=0,b=i.length;c<b;c++){if(i[c]==="."){i.splice(c--,1)}else{if(i[c]===".."){if(c>1){i.splice(--c,2),c--}else{i.splice(c--,1)}}}}i=i.join("/")}i=i.replace(/\\/$/,"")}return i};if(jsl.getInfo("system.os")==="Win"){jsl.File.__ni_path_valid=function(a){return !!a.match(/^([^:]+:|[^\\\\\\/:*?"<>|%]+)?(\\/[^\\\\\\/:*?"<>|%]+)*\\/?$/)};jsl.File.__ni_path_relative=function(a){return !a.match(/^[a-zA-Z]:/)}}else{jsl.File.__ni_path_valid=function(a){return !!a.match(/^[^\\\\\\/:*?"<>|%]?(\\/[^\\\\\\/:*?"<>|%]+)*\\/?$/)};jsl.File.__ni_path_relative=function(a){return a.indexOf("/")}}if(jsl.__sid==="V8cgi"){jsl.File.__ni_fs=require("fs");jsl.File.__ni_File=jsl.File.__ni_fs.File;jsl.File.__ni_Directory=jsl.File.__ni_fs.Directory;jsl.File.__ni_create=function(b){try{(new this.__ni_File(b)).open("wb").close()}catch(a){jsl.throwError(jsl.NativeError(a),this,arguments)}};jsl.File.__ni_remove=function(b){try{(new this.__ni_File(b)).remove();/*!*/if(this.__ni_exists(b)){throw jsl.NativeError("OperationFailed")}/*!*/}catch(a){jsl.throwError(jsl.NativeError(a),this,arguments)}};jsl.File.__ni_rename=function(c,b){try{(new this.__ni_File(c)).move(b);/*!*/if(this.__ni_exists(c)){throw jsl.NativeError("OperationFailed")}/*!*/}catch(a){jsl.throwError(jsl.NativeError(a),this,arguments)}};jsl.File.__ni_exists=function(f){try{var d,b,a;d=f+(f.match(/^[a-zA-Z]:$/)?"/":"");a=this.__ni_fs;if((new a.File(d)).isFile()){b=1}else{if((new a.Directory(d)).isDirectory()){b=2}else{b=0}}return b}catch(c){jsl.throwError(jsl.NativeError(c),this,arguments)}};jsl.File.__ni_size=function(b){try{return(new this.__ni_File(b)).stat().size}catch(a){jsl.throwError(jsl.NativeError(a),this,arguments)}};jsl.File.__ni_read=function(g,a,h){try{var c,b;c=new this.__ni_File(g);c.open("rb");b=c.read(a+h);c.close();return Array.prototype.slice.call(b,a,a+h)}catch(d){jsl.throwError(jsl.NativeError(d),this,arguments)}};jsl.File.__ni_write=function(h,a,d){try{var c,b,j,i;c=new this.__ni_File(h);c.open("r+b");i=require("binary").Buffer;j=Array.prototype.slice;b=c.read();if(a<=b.length){b=j.call(b,0,a).concat(d).concat(j(b,a+d.length))}else{b=j.call(b,0,a).concat(j.call(new i(a-b.length))).concat(d)}c.rewind();c.write(new i(b));c.close()}catch(g){jsl.throwError(jsl.NativeError(g),this,arguments)}};jsl.File.__ni_truncate=function(d,g){try{var b,a;b=new this.__ni_File(d);b.open("rb");a=b.read();b.close();b.open("wb");b.write(a.slice(0,g));b.close()}catch(c){jsl.throwError(jsl.NativeError(c),this,arguments)}};jsl.File.__ni_move=jsl.File.__ni_rename;jsl.File.__ni_copy=function(c,b){try{(new this.__ni_File(c)).copy(b)}catch(a){jsl.throwError(jsl.NativeError(a),this,arguments)}};jsl.File.__ni_add=function(h,g){try{var b,i,a;a=this.__ni_fs;b=new a.File(g);b.open("rb");i=b.read();b.close();b=new a.File(h);b.open("ab");b.write(i);b.close()}catch(c){jsl.throwError(jsl.NativeError(c),this,arguments)}};jsl.Dir.__ni_fs=jsl.File.__ni_fs;jsl.Dir.__ni_File=jsl.File.__ni_File;jsl.Dir.__ni_Directory=jsl.File.__ni_Directory;jsl.Dir.__ni_cwd=function(){try{return system.getcwd().replace(/\\\\/g,"/")}catch(a){jsl.throwError(jsl.NativeError(a),this,arguments)}};jsl.Dir.__ni_create=function(b){try{(new this.__ni_Directory(b)).create()}catch(a){jsl.throwError(jsl.NativeError(a),this,arguments)}};jsl.Dir.__ni_remove=function(m){try{var j,f,k,c,b,g,i;g=this.__ni_fs;i=g.File;j=new g.Directory(m);f=j.listFiles();b=m+"/";for(k=0,c=f.length;k<c;k++){(new i(b+f[k])).remove()}f=j.listDirectories();for(k=0,c=f.length;k<c;k++){this.__ni_remove(b+f[k])}j.remove()}catch(h){jsl.throwError(jsl.NativeError(h).clearStackTrace(),this,arguments)}};jsl.Dir.__ni_read=function(c){try{var f,a;f=new this.__ni_Directory(c);a=f.listFiles().concat(f.listDirectories());a.sort();return a}catch(b){jsl.throwError(jsl.NativeError(b),this,arguments)}};jsl.Dir.__ni_empty=function(b){try{var c=new this.__ni_Directory(b);return !(c.listFiles().length+c.listDirectories().length)}catch(a){jsl.throwError(jsl.NativeError(a),this,arguments)}};jsl.Dir.__ni_copy=function(h,g){var f,d,c,b,i;this.__ni_create(g);i=this.__ni_Directory;c=(new i(h)).listFiles();for(f=0,d=c.length;f<d;f++){jsl.File.__ni_copy(h+"/"+c[f],g+"/"+c[f])}c=(new i(h)).listDirectories();for(f=0,d=c.length;f<d;f++){jsl.Dir.__ni_copy(h+"/"+c[f],g+"/"+c[f])}};jsl.Dir.__ni_exists=jsl.File.__ni_exists;jsl.Dir.__ni_rename=jsl.File.__ni_rename;jsl.Dir.__ni_move=jsl.File.__ni_move}else{if(jsl.__sid==="Rhino"){jsl.File.__ni_create=function(c){try{var a=new java.io.RandomAccessFile(c,"rw");a.close()}catch(b){jsl.throwError(jsl.NativeError(b),this,arguments)}};jsl.File.__ni_remove=function(g){try{var a,c;c=new java.io.File(g);if(c.exists()){a=c["delete"]();/*!*/if(!a){throw jsl.NativeError("OperationFailed")}/*!*/}}catch(d){jsl.throwError(jsl.NativeError(d),this,arguments)}};jsl.File.__ni_exists=function(d){try{var b,a;b=new java.io.File(d);a=0;if(b.isFile()){a=1}else{if(b.isDirectory()&&b.list()){a=2}else{a=0}}return a}catch(c){jsl.throwError(jsl.NativeError(c),this,arguments)}};jsl.File.__ni_size=function(b){try{return(new java.io.File(b)).length()}catch(a){jsl.throwError(jsl.NativeError(a),this,arguments)}};jsl.File.__ni_truncate=function(d,a){try{var b;b=new java.io.RandomAccessFile(d,"rw");b.setLength(a);b.close()}catch(c){jsl.throwError(jsl.NativeError(c),this,arguments)}};jsl.File.__ni_move=function(f,d){try{var a=(new java.io.File(f)).renameTo(new java.io.File(d));/*!*/if(!a){throw jsl.NativeError("OperationFailed")}/*!*/}catch(c){jsl.throwError(jsl.NativeError(c),this,arguments)}};jsl.File.__ni_copy=function(h,g){try{var c,d,b,a;c=new java.io.FileInputStream(h);d=new java.io.FileOutputStream(g);b=java.lang.reflect.Array.newInstance(java.lang.Byte.TYPE,100000);while((a=c.read(b))>0){d.write(b,0,a)}c.close();d.close()}catch(f){jsl.throwError(jsl.NativeError(f),this,arguments)}};jsl.File.__ni_read=function(h,a,j){try{var d,b,c,i;b=java.lang.reflect.Array.newInstance(java.lang.Byte.TYPE,j);d=new java.io.RandomAccessFile(h,"r");d.seek(a);d.read(b);d.close();c=new java.lang.String(b,"iso-8859-1");c=c.replaceAll("(?s).","\\x00$0");b=c.getBytes("iso-8859-1");i=java.nio.ByteBuffer.wrap(b);b=java.lang.reflect.Array.newInstance(java.lang.Short.TYPE,j);i.asShortBuffer().get(b);return Array.prototype.slice.call(b)}catch(g){jsl.throwError(jsl.NativeError(g),this,arguments)}};jsl.File.__ni_write=function(n,b,g){try{var j,o,h,d;o=[];h=0;d=String.fromCharCode;for(var m=0,c=g.length;m<c;m=h*100000){o[h]=d.apply(d,g.slice(h++*100000,h*100000))}j=new java.io.RandomAccessFile(n,"rw");j.seek(b);j.writeBytes(o.join(""));j.close()}catch(k){jsl.throwError(jsl.NativeError(k),this,arguments)}};jsl.File.__ni_add=function(g,d){try{var b,a,h;b=new java.io.RandomAccessFile(d,"r");a=java.lang.reflect.Array.newInstance(java.lang.Byte.TYPE,b.length());b.read(a);b.close();b=new java.io.RandomAccessFile(g,"rw");b.seek(b.length());b.write(a);b.close()}catch(c){jsl.throwError(jsl.NativeError(c),this,arguments)}};jsl.File.__ni_rename=jsl.File.__ni_move;jsl.Dir.__ni_cwd=function(){try{return(java.lang.System.getProperty("user.dir")+"").replace(/\\\\/g,"/")}catch(a){jsl.throwError(jsl.NativeError(a),this,arguments)}};jsl.Dir.__ni_create=function(f){try{var g,a;g=new java.io.File(f);a=g.mkdir();/*!*/if(!a){throw jsl.NativeError("OperationFiled")}/*!*/}catch(c){jsl.throwError(jsl.NativeError(c),this,arguments)}};jsl.Dir.__ni_remove=function(k){try{var m,h,g,f,j,c;m=new java.io.File(k);h=m.listFiles();j=k+"/";for(g=0,f=h.length;g<f;g++){if(h[g].isFile()){h[g]["delete"]()}else{arguments.callee(h[g].getPath())}}c=m["delete"]();/*!*/if(!c){throw jsl.NativeError("OperationFailed",[k])}/*!*/}catch(i){jsl.throwError(jsl.NativeError(i).clearStackTrace(),this,arguments)}};jsl.Dir.__ni_empty=function(b){try{var c=new java.io.File(b);return !c.list().length}catch(a){jsl.throwError(jsl.NativeError(a),this,arguments)}};jsl.Dir.__ni_read=function(c){try{var f,a;f=new java.io.File(c);a=f.list().slice();a.sort();return a}catch(b){jsl.throwError(jsl.NativeError(b),this,arguments)}};jsl.Dir.__ni_copy=function(h,g){var d,i,f;this.__ni_create(g);d=(new java.io.File(h)).list();f=this.__ni_exists;for(var c=0,b=d.length;c<b;c++){i=h+"/"+d[c];if(f(i)===1){jsl.File.__ni_copy(i,g+"/"+d[c])}else{this.__ni_copy(i,g+"/"+d[c])}}};jsl.Dir.__ni_rename=jsl.File.__ni_move;jsl.Dir.__ni_exists=jsl.File.__ni_exists;jsl.Dir.__ni_move=jsl.File.__ni_move}else{if(jsl.__sid==="AdobeAIR"){(function(){var c,d;c=jsl.File.__ni_map={};d=String.fromCharCode;for(var b=0;b<256;b++){c[d(b)]=b}})();jsl.File.__ni_create=function(b){try{var c;parentSandboxBridge.f_create(b);c=parentSandboxBridge.error();if(c){throw c}}catch(a){jsl.throwError(jsl.NativeError(a),this,arguments)}};jsl.File.__ni_remove=function(b){try{var c;parentSandboxBridge.f_remove(b);c=parentSandboxBridge.error();if(c){throw c}}catch(a){jsl.throwError(jsl.NativeError(a),this,arguments)}};jsl.File.__ni_rename=function(c,b){try{var d;parentSandboxBridge.f_rename(c,b);d=parentSandboxBridge.error();if(d){throw d}}catch(a){jsl.throwError(jsl.NativeError(a),this,arguments)}};jsl.File.__ni_exists=function(c){try{var a,d;a=parentSandboxBridge.f_exists(c);d=parentSandboxBridge.error();if(d){throw d}return a}catch(b){jsl.throwError(jsl.NativeError(b),this,arguments)}};jsl.File.__ni_size=function(c){try{var a,d;a=parentSandboxBridge.f_size(c);d=parentSandboxBridge.error();if(d){throw d}return a}catch(b){jsl.throwError(jsl.NativeError(b),this,arguments)}};jsl.File.__ni_read=function(k,d,c){try{var m,h,f,j,b,i;j=parentSandboxBridge.f_read(k,d,c);i=parentSandboxBridge.error();if(i){throw i}j=j.split("");b=this.__ni_map;f=j.length;h=0;while(h<f){j[h]=b[j[h++]]}return j}catch(g){jsl.throwError(jsl.NativeError(g),this,arguments)}};jsl.File.__ni_write=function(n,c,g){try{var f,b,h,m;f=String.fromCharCode;b=[];h=0;for(var k=0,d=g.length;k<d;k=h*65536){b[h]=f.apply(f,g.slice(h++*65536,h*65536))}parentSandboxBridge.f_write(n,c,b.join(""));m=parentSandboxBridge.error();if(m){throw m}}catch(j){jsl.throwError(jsl.NativeError(j),this,arguments)}};jsl.File.__ni_truncate=function(b,d){try{var c;parentSandboxBridge.f_truncate(b,d);c=parentSandboxBridge.error();if(c){throw c}}catch(a){jsl.throwError(jsl.NativeError(a),this,arguments)}};jsl.File.__ni_move=function(c,b){try{var d;parentSandboxBridge.f_move(c,b);d=parentSandboxBridge.error();if(d){throw d}}catch(a){jsl.throwError(jsl.NativeError(a),this,arguments)}};jsl.File.__ni_copy=function(c,b){try{var d;parentSandboxBridge.f_copy(c,b);d=parentSandboxBridge.error();if(d){throw d}}catch(a){jsl.throwError(jsl.NativeError(a),this,arguments)}};jsl.File.__ni_add=function(c,b){try{var d;parentSandboxBridge.f_add(c,b);d=parentSandboxBridge.error();if(d){throw d}}catch(a){jsl.throwError(jsl.NativeError(a),this,arguments)}};jsl.Dir.__ni_cwd=function(){try{var a,c;a=parentSandboxBridge.d_cwd();c=parentSandboxBridge.error();if(c){throw c}return a}catch(b){jsl.throwError(jsl.NativeError(b),this,arguments)}};jsl.Dir.__ni_create=function(b){try{var c;parentSandboxBridge.d_create(b);c=parentSandboxBridge.error();if(c){throw c}}catch(a){jsl.throwError(jsl.NativeError(a),this,arguments)}};jsl.Dir.__ni_remove=function(b){try{var c;parentSandboxBridge.d_remove(b);c=parentSandboxBridge.error();if(c){throw c}}catch(a){jsl.throwError(jsl.NativeError(a),this,arguments)}};jsl.Dir.__ni_read=function(c){try{var a,d;a=parentSandboxBridge.d_read(c);d=parentSandboxBridge.error();if(d){throw d}return a}catch(b){jsl.throwError(jsl.NativeError(b),this,arguments)}};jsl.Dir.__ni_rename=function(c,b){try{var d;parentSandboxBridge.d_rename(c,b);d=parentSandboxBridge.error();if(d){throw d}}catch(a){jsl.throwError(jsl.NativeError(a),this,arguments)}};jsl.Dir.__ni_empty=function(c){try{var a,d;a=parentSandboxBridge.d_empty(c);d=parentSandboxBridge.error();if(d){throw d}return a}catch(b){jsl.throwError(jsl.NativeError(b),this,arguments)}};jsl.Dir.__ni_exists=function(c){try{var a,d;a=parentSandboxBridge.d_exists(c);d=parentSandboxBridge.error();if(d){throw d}return a}catch(b){jsl.throwError(jsl.NativeError(b),this,arguments)}};jsl.Dir.__ni_move=function(c,b){try{var d;parentSandboxBridge.d_move(c,b);d=parentSandboxBridge.error();if(d){throw d}}catch(a){jsl.throwError(jsl.NativeError(a),this,arguments)}};jsl.Dir.__ni_copy=function(c,b){try{var d;parentSandboxBridge.d_copy(c,b);d=parentSandboxBridge.error();if(d){throw d}}catch(a){jsl.throwError(jsl.NativeError(a),this,arguments)}}}else{throw jsl.NativeError("LibraryNotSupported:File")}}}jsl.require("data");jsl.Class("jsl.TextFile",{inherits:jsl.File,initializer:function(){var a=jsl.File;for(var b in a){if(b.slice(0,2)=="__"){this[b]=a[b]}}},st___ens:["ascii","iso-8859-1","utf8","utf16","utf16-be","utf16-le","utf16-be*","utf16-le*"],st___chs:{ascii:"1","iso-8859-1":"1",utf8:"3d",utf16:"2","utf16-be":"2","utf16-le":"2","utf16-be*":"2","utf16-le*":"2"},st___mks:{ascii:0,"iso-8859-1":0,utf8:0,utf16:2,"utf16-be":0,"utf16-le":0,"utf16-be*":2,"utf16-le*":2},st___mds:{utf16:["\\u00fe\\u00ff","\\u00ff\\u00fe"],"utf16-be*":["\\u00fe\\u00ff"],"utf16-le*":["\\u00ff\\u00fe"],"\\u00fe\\u00ff":"utf16-be*","\\u00ff\\u00fe":"utf16-le*"},st___en:"utf8",st___tix:0,st___ix:0,__en:"utf8",__tix:0,__ix:0,TextFile:function(c,a){var b;/*!*/if(arguments.length>2){throw jsl.ParamError()}/*!*/if(arguments.length){b=jsl.TextFile.__path(c)}/*!*/if(arguments.length===2){jsl.validate(a,"s+","encoding")}if(arguments.length===2){jsl.validate(a.toLowerCase(),"s("+jsl.TextFile.__ens.join(",")+")","encoding")}/*!*/this.__en=a?a.toLowerCase():jsl.TextFile.__en;if(arguments.length){this.File(b)}else{this.File()}},st_readLine:function(b,c,a){/*!*/if(!arguments.length||arguments.length>3){throw jsl.ParamError()}/*!*/if(arguments.length===1){return this.__readLine(b,0,this.__en,1)}else{if(arguments.length===2&&jsl.isString(c)){return this.__readLine(b,0,c,1)}else{if(arguments.length===2){return this.__readLine(b,0,this.__en,c)}else{return this.__readLine(b,0,a,c)}}}},st_skipLine:function(b,c,a){/*!*/if(!arguments.length||arguments.length>3){throw jsl.ParamError()}/*!*/if(arguments.length===1){this.__readLine(b,0,this.__en,1)}else{if(arguments.length===2&&jsl.isString(c)){this.__readLine(b,0,c,1)}else{if(arguments.length===2){this.__readLine(b,0,this.__en,c)}else{this.__readLine(b,0,a,c)}}}return new this(b)},st_writeLine:function(c,b,a){/*!*/if(arguments.length<2||arguments.length>3){throw jsl.ParamError()}/*!*/if(arguments.length===2){this.__writeLine(c,b,0,this.__en)}else{this.__writeLine(c,b,0,a)}return new this(c)},st_appendLine:function(c,b,a){/*!*/if(arguments.length<2||arguments.length>3){throw jsl.ParamError()}/*!*/if(arguments.length===2){this.__appendLine(c,b,this.__en)}else{this.__appendLine(c,b,a)}return new this(c)},st_getEncoding:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return this.__en},st_setEncoding:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(a,"s+","encoding");jsl.validate(a.toLowerCase(),"s("+this.__ens.join(",")+")","encoding");/*!*/this.__en=a.toLowerCase();return this},st_read:function(b,c,a){/*!*/if(!arguments.length||arguments.length>3){throw jsl.ParamError()}/*!*/if(arguments.length===1){return this.__read(b,0,this.__en)}else{if(arguments.length===2&&jsl.isString(c)){return this.__read(b,0,this.__en,this.__size(b))}else{if(arguments.length===2){return this.__read(b,0,this.__en,c)}else{return this.__read(b,0,a,c)}}}},st_write:function(c,b,a){/*!*/if(arguments.length<2||arguments.length>3){throw jsl.ParamError()}/*!*/if(arguments.length===2){this.__write(c,b,0,this.__en)}else{this.__write(c,b,0,a)}return new this(c)},st_append:function(c,b,a){/*!*/if(arguments.length<2||arguments.length>3){throw jsl.ParamError()}/*!*/if(arguments.length===2){this.__append(c,b,this.__en)}else{this.__append(c,b,a)}return new this(c)},readLine:function(b){var a;/*!*/if(arguments.length>1){throw jsl.ParamError()}/*!*/if(arguments.length){a=jsl.TextFile.__readLine(this.__f,this.__ix,this.__en,b)}else{a=jsl.TextFile.__readLine(this.__f,this.__ix,this.__en,1)}this.__ix+=jsl.TextFile.__ix;this.__tix+=jsl.TextFile.__tix;return a},skipLine:function(a){/*!*/if(arguments.length>1){throw jsl.ParamError()}/*!*/if(arguments.length){jsl.TextFile.__readLine(this.__f,this.__ix,this.__en,a)}else{jsl.TextFile.__readLine(this.__f,this.__ix,this.__en,1)}this.__ix+=jsl.TextFile.__ix;this.__tix+=jsl.TextFile.__tix;return this},writeLine:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/jsl.TextFile.__writeLine(this.__f,a,this.__ix,this.__en);this.__ix+=jsl.TextFile.__ix;this.__tix+=a.length;return this},appendLine:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/jsl.TextFile.__appendLine(this.__f,a,this.__en);this.__ix+=jsl.TextFile.__ix;this.__tix+=a.length;return this},getEncoding:function(){/*!*/if(arguments.length){throw jsl.ParamError()}/*!*/return this.__en},setEncoding:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}jsl.validate(a,"s+","encoding");jsl.validate(a.toLowerCase(),"s("+jsl.TextFile.__ens.join(",")+")","encoding");/*!*/this.__en=a.toLowerCase();return this},read:function(b){var a;/*!*/if(arguments.length>1){throw jsl.ParamError()}/*!*/if(arguments.length){a=jsl.TextFile.__read(this.__f,this.__ix,this.__en,b)}else{a=jsl.TextFile.__read(this.__f,this.__ix,this.__en)}this.__ix+=jsl.TextFile.__ix;this.__tix+=a.length;return a},write:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/jsl.TextFile.__write(this.__f,a,this.__ix,this.__en);this.__ix+=jsl.TextFile.__ix;this.__tix+=a.length;return this},append:function(a){/*!*/if(arguments.length!==1){throw jsl.ParamError()}/*!*/jsl.TextFile.__append(this.__f,a,this.__en);return this}});jsl.TextFile.__write=function(l,m,c,a){var h,d,j,g,k,b;h=this.__path(l);/*!*/d=this.__exists(h);if(!d){throw jsl.ParamError("file.NotFound",[h])}if(d===2){throw jsl.ParamError("file.opError",[h])}jsl.validate(m,"s","s");jsl.validate(a,"s+","encoding");jsl.validate(a.toLowerCase(),"s("+this.__ens.join(",")+")","encoding");this.__checkBom(h,a);/*!*/if(m){b=this.__size(h);g=this.__mks[a];if(g){if(b){k=jsl.File.__read(h,0,g)+""}else{k=this.__mds[a][0];jsl.File.__write(h,k,0)}}j=jsl.Data.encode(m,g?this.__mds[k]:a);if(g){j.__bs.splice(0,g)}d=g&&c<g?g-c:0;jsl.File.__write(h,j,c+d);this.__ix=j.getSize()+d;this.__tix=m.length}else{this.__ix=0;this.__tix=0}};jsl.TextFile.__writeLine=function(d,c,a,b){/*!*/jsl.validate(c,"s","s");/*!*/this.__write(d,a?"\\n"+c:c,a,b)};jsl.TextFile.__appendLine=function(c,b,a){var d;/*!*/jsl.validate(b,"s","s");/*!*/d=this.__size(c);this.__write(c,d?"\\n"+b:b,d,a)};jsl.TextFile.__append=function(c,b,a){this.__write(c,b,this.__size(c),a)};jsl.TextFile.__read=function(p,g,a,c){var l,j,q,k,o,m,h,b;l=this.__path(p);/*!*/j=this.__exists(l);if(!j){throw jsl.ParamError("file.NotFound",[l])}if(j===2){throw jsl.ParamError("file.opError",[l])}if(arguments.length===4){jsl.validate(c,"i++","n")}jsl.validate(a,"s+","encoding");jsl.validate(a.toLowerCase(),"s("+this.__ens.join(",")+")","encoding");this.__checkBom(l,a);/*!*/h=this.__mks[a];m=this.__chs[a];q=this.__size(l);if(h&&q){b=jsl.File.__read(l,0,h).__bs}if(c){k=m.charAt(0)*c}else{k=this.__size(l)-g}m=m.charAt(1);k=m?k+3:k;j=h&&g<h?h-g:0;o=jsl.File.__read(l,g+j,k);q="";if(o){if(h){o.__bs.unshift.apply(o.__bs,b)}q=this.__decode(o,a);if(q.length>c){q=q.slice(0,c);k=m?jsl.Data.encode(q,a).getSize()-h:q.length*this.__chs[a].charAt(0)}else{k=o.__bs.length-h}this.__ix=k+j;this.__tix=q.length}return q};jsl.TextFile.__decode=function(c,a){var b;jsl.Data.__txt_stream=true;try{b=c.decode(a)}finally{jsl.Data.__txt_stream=false}this.__rb=jsl.Data.__txt_rb;return b};jsl.TextFile.__checkBom=function(i,g){var b,h,j;b=this.__mks[g];if(b&&this.__size(i)){h=this.__mds[g];j=jsl.File.__read(i,0,b);for(var d=0,c=h.length;d<c;d++){if(String.fromCharCode.apply(String,j.__bs)===h[d]){break}}if(d===c){throw jsl.ParamError("e.utf.BadUtf16Bom",[i])}}};jsl.TextFile.__readLine=function(u,g,b,d){var q,o,a,v,m,t,r,p,h,k,j;q=this.__path(u);/*!*/o=this.__exists(q);if(!o){throw jsl.ParamError("file.NotFound",[q])}if(o===2){throw jsl.ParamError("file.OpError",[q])}jsl.validate(b,"s+","encoding");jsl.validate(b.toLowerCase(),"s("+this.__ens.join(",")+")","encoding");jsl.validate(d,"i++","n");/*!*/h=this.__size(q);if(g<h){a=/\\n\\r|\\r\\n|\\n|\\r/g;v="";o=g;k=d*50;do{t=this.__read(q,o,b,k);o+=this.__ix;if(t){r=t.slice(-1);if(r==="\\n"||r==="\\r"){p=t.slice(-2);if(o<h&&p!=="\\n\\r"&&p!=="\\r\\n"){t=t.slice(0,-1)}}v+=t;m=v.split(a,d+1)}}while(t&&m.length<d+1);if(m.length>d){m.pop()}t=v.match(a);if(t){t=t.slice(0,d).join("")}else{t=""}v=m.join("")+t;j=this.__mks[b];if(this.__chs[b].charAt(1)){this.__ix=jsl.Data.encode(v,b).getSize()-j}else{this.__ix=v.length*this.__chs[b].charAt(0)}this.__ix=this.__ix+(j&&g<j?j-g:0);this.__tix=v.length;if(d==1){m=m[0]}}else{m=null}return m};jsl.setMessage("e.file.AddError","impossible add the file \'$\'. Found an existing directory");jsl.setMessage("e.file.BadSeek","negative position");jsl.setMessage("e.file.CopyError","impossible copy the file \'$\'. Found an existing file with the same destination name");jsl.setMessage("e.file.CopyError2","impossible copy the file \'$\'. Found an existing directory with the same destination name");jsl.setMessage("e.file.CreationError","impossible create the file \'$\'. Found an existing file");jsl.setMessage("e.file.MoveError","impossible move the file \'$\'. Found an existing file with the same destination name");jsl.setMessage("e.file.MoveError2","impossible move the file \'$\'. Found an existing directory with the same destination name");jsl.setMessage("e.file.NotFound","<$> file not found");jsl.setMessage("e.file.OpError","impossible complete the operation on the file \'$\'. Found a directory");jsl.setMessage("e.file.RenameError","impossible rename the file \'$\'. Found an existing file with the same destination name");jsl.setMessage("e.file.RenameError2","impossible rename the file \'$\'. Found an existing directory with the same destination name");jsl.setMessage("e.file.BadSize","<$> unexpected end of file: found an invalid code point");jsl.setMessage("e.dir.CopyError","impossible copy the directory \'$\'. Found an existing file with the same destination name");jsl.setMessage("e.dir.CopyError2","impossible copy the directory \'$\'. Found an existing directory with the same destination name");jsl.setMessage("e.dir.CreationError","impossible create the directory \'$\'. Found an existing directory");jsl.setMessage("e.dir.InvalidPath","<path> invalid value, expected an absolute path");jsl.setMessage("e.dir.MoveError","impossible move the directory \'$\'. Found an existing file with the same destination name");jsl.setMessage("e.dir.MoveError2","impossible move the directory \'$\'. Found an existing directory with the same destination name");jsl.setMessage("e.dir.NotFound","<$> directory not found");jsl.setMessage("e.dir.OpError","impossible complete the operation on the directory \'$\'. Found an ordinary file");jsl.setMessage("e.dir.PathNotFound","<$> the path does not exist");jsl.setMessage("e.dir.RenameError","impossible rename the directory \'$\'. Found an existing directory with the same name");jsl.setMessage("e.dir.RootNotDefined","<path($)> root not defined");jsl.setMessage("e.dir.TmpCreateError","impossible create the default temporary directory \'$\'. Found an ordinary file");jsl.setMessage("e.dir.TmpNotFound","temporary directory not found: \'$\'")};'